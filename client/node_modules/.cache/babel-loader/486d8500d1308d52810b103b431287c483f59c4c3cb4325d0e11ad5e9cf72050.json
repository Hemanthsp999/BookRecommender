{"ast":null,"code":"'use strict';\n\nvar Buffer = require('safe-buffer').Buffer,\n  Base = require('./base'),\n  util = require('util');\nvar Draft75 = function (request, url, options) {\n  Base.apply(this, arguments);\n  this._stage = 0;\n  this.version = 'hixie-75';\n  this._headers.set('Upgrade', 'WebSocket');\n  this._headers.set('Connection', 'Upgrade');\n  this._headers.set('WebSocket-Origin', this._request.headers.origin);\n  this._headers.set('WebSocket-Location', this.url);\n};\nutil.inherits(Draft75, Base);\nvar instance = {\n  close: function () {\n    if (this.readyState === 3) return false;\n    this.readyState = 3;\n    this.emit('close', new Base.CloseEvent(null, null));\n    return true;\n  },\n  parse: function (chunk) {\n    if (this.readyState > 1) return;\n    this._reader.put(chunk);\n    this._reader.eachByte(function (octet) {\n      var message;\n      switch (this._stage) {\n        case -1:\n          this._body.push(octet);\n          this._sendHandshakeBody();\n          break;\n        case 0:\n          this._parseLeadingByte(octet);\n          break;\n        case 1:\n          this._length = (octet & 0x7F) + 128 * this._length;\n          if (this._closing && this._length === 0) {\n            return this.close();\n          } else if ((octet & 0x80) !== 0x80) {\n            if (this._length === 0) {\n              this._stage = 0;\n            } else {\n              this._skipped = 0;\n              this._stage = 2;\n            }\n          }\n          break;\n        case 2:\n          if (octet === 0xFF) {\n            this._stage = 0;\n            message = Buffer.from(this._buffer).toString('utf8', 0, this._buffer.length);\n            this.emit('message', new Base.MessageEvent(message));\n          } else {\n            if (this._length) {\n              this._skipped += 1;\n              if (this._skipped === this._length) this._stage = 0;\n            } else {\n              this._buffer.push(octet);\n              if (this._buffer.length > this._maxLength) return this.close();\n            }\n          }\n          break;\n      }\n    }, this);\n  },\n  frame: function (buffer) {\n    if (this.readyState === 0) return this._queue([buffer]);\n    if (this.readyState > 1) return false;\n    if (typeof buffer !== 'string') buffer = buffer.toString();\n    var length = Buffer.byteLength(buffer),\n      frame = Buffer.allocUnsafe(length + 2);\n    frame[0] = 0x00;\n    frame.write(buffer, 1);\n    frame[frame.length - 1] = 0xFF;\n    this._write(frame);\n    return true;\n  },\n  _handshakeResponse: function () {\n    var start = 'HTTP/1.1 101 Web Socket Protocol Handshake',\n      headers = [start, this._headers.toString(), ''];\n    return Buffer.from(headers.join('\\r\\n'), 'utf8');\n  },\n  _parseLeadingByte: function (octet) {\n    if ((octet & 0x80) === 0x80) {\n      this._length = 0;\n      this._stage = 1;\n    } else {\n      delete this._length;\n      delete this._skipped;\n      this._buffer = [];\n      this._stage = 2;\n    }\n  }\n};\nfor (var key in instance) Draft75.prototype[key] = instance[key];\nmodule.exports = Draft75;","map":{"version":3,"names":["Buffer","require","Base","util","Draft75","request","url","options","apply","arguments","_stage","version","_headers","set","_request","headers","origin","inherits","instance","close","readyState","emit","CloseEvent","parse","chunk","_reader","put","eachByte","octet","message","_body","push","_sendHandshakeBody","_parseLeadingByte","_length","_closing","_skipped","from","_buffer","toString","length","MessageEvent","_maxLength","frame","buffer","_queue","byteLength","allocUnsafe","write","_write","_handshakeResponse","start","join","key","prototype","module","exports"],"sources":["/home/hemanth/react-project/client/node_modules/websocket-driver/lib/websocket/driver/draft75.js"],"sourcesContent":["'use strict';\n\nvar Buffer = require('safe-buffer').Buffer,\n    Base   = require('./base'),\n    util   = require('util');\n\nvar Draft75 = function(request, url, options) {\n  Base.apply(this, arguments);\n  this._stage  = 0;\n  this.version = 'hixie-75';\n\n  this._headers.set('Upgrade', 'WebSocket');\n  this._headers.set('Connection', 'Upgrade');\n  this._headers.set('WebSocket-Origin', this._request.headers.origin);\n  this._headers.set('WebSocket-Location', this.url);\n};\nutil.inherits(Draft75, Base);\n\nvar instance = {\n  close: function() {\n    if (this.readyState === 3) return false;\n    this.readyState = 3;\n    this.emit('close', new Base.CloseEvent(null, null));\n    return true;\n  },\n\n  parse: function(chunk) {\n    if (this.readyState > 1) return;\n\n    this._reader.put(chunk);\n\n    this._reader.eachByte(function(octet) {\n      var message;\n\n      switch (this._stage) {\n        case -1:\n          this._body.push(octet);\n          this._sendHandshakeBody();\n          break;\n\n        case 0:\n          this._parseLeadingByte(octet);\n          break;\n\n        case 1:\n          this._length = (octet & 0x7F) + 128 * this._length;\n\n          if (this._closing && this._length === 0) {\n            return this.close();\n          }\n          else if ((octet & 0x80) !== 0x80) {\n            if (this._length === 0) {\n              this._stage = 0;\n            }\n            else {\n              this._skipped = 0;\n              this._stage   = 2;\n            }\n          }\n          break;\n\n        case 2:\n          if (octet === 0xFF) {\n            this._stage = 0;\n            message = Buffer.from(this._buffer).toString('utf8', 0, this._buffer.length);\n            this.emit('message', new Base.MessageEvent(message));\n          }\n          else {\n            if (this._length) {\n              this._skipped += 1;\n              if (this._skipped === this._length)\n                this._stage = 0;\n            } else {\n              this._buffer.push(octet);\n              if (this._buffer.length > this._maxLength) return this.close();\n            }\n          }\n          break;\n      }\n    }, this);\n  },\n\n  frame: function(buffer) {\n    if (this.readyState === 0) return this._queue([buffer]);\n    if (this.readyState > 1) return false;\n\n    if (typeof buffer !== 'string') buffer = buffer.toString();\n\n    var length = Buffer.byteLength(buffer),\n        frame  = Buffer.allocUnsafe(length + 2);\n\n    frame[0] = 0x00;\n    frame.write(buffer, 1);\n    frame[frame.length - 1] = 0xFF;\n\n    this._write(frame);\n    return true;\n  },\n\n  _handshakeResponse: function() {\n    var start   = 'HTTP/1.1 101 Web Socket Protocol Handshake',\n        headers = [start, this._headers.toString(), ''];\n\n    return Buffer.from(headers.join('\\r\\n'), 'utf8');\n  },\n\n  _parseLeadingByte: function(octet) {\n    if ((octet & 0x80) === 0x80) {\n      this._length = 0;\n      this._stage  = 1;\n    } else {\n      delete this._length;\n      delete this._skipped;\n      this._buffer = [];\n      this._stage  = 2;\n    }\n  }\n};\n\nfor (var key in instance)\n  Draft75.prototype[key] = instance[key];\n\nmodule.exports = Draft75;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}