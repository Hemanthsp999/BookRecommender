{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FSWatcher = exports.StatWatcher = exports.Volume = exports.toUnixTimestamp = exports.bufferToEncoding = exports.dataToBuffer = exports.dataToStr = exports.pathToSteps = exports.filenameToSteps = exports.pathToFilename = exports.flagsToNumber = exports.FLAGS = void 0;\nvar pathModule = require(\"path\");\nvar node_1 = require(\"./node\");\nvar Stats_1 = require(\"./Stats\");\nvar Dirent_1 = require(\"./Dirent\");\nvar buffer_1 = require(\"./internal/buffer\");\nvar setImmediate_1 = require(\"./setImmediate\");\nvar process_1 = require(\"./process\");\nvar setTimeoutUnref_1 = require(\"./setTimeoutUnref\");\nvar stream_1 = require(\"stream\");\nvar constants_1 = require(\"./constants\");\nvar events_1 = require(\"events\");\nvar encoding_1 = require(\"./encoding\");\nvar errors = require(\"./internal/errors\");\nvar util = require(\"util\");\nvar promises_1 = require(\"./promises\");\nvar resolveCrossPlatform = pathModule.resolve;\nvar O_RDONLY = constants_1.constants.O_RDONLY,\n  O_WRONLY = constants_1.constants.O_WRONLY,\n  O_RDWR = constants_1.constants.O_RDWR,\n  O_CREAT = constants_1.constants.O_CREAT,\n  O_EXCL = constants_1.constants.O_EXCL,\n  O_TRUNC = constants_1.constants.O_TRUNC,\n  O_APPEND = constants_1.constants.O_APPEND,\n  O_SYNC = constants_1.constants.O_SYNC,\n  O_DIRECTORY = constants_1.constants.O_DIRECTORY,\n  F_OK = constants_1.constants.F_OK,\n  COPYFILE_EXCL = constants_1.constants.COPYFILE_EXCL,\n  COPYFILE_FICLONE_FORCE = constants_1.constants.COPYFILE_FICLONE_FORCE;\nvar _a = pathModule.posix ? pathModule.posix : pathModule,\n  sep = _a.sep,\n  relative = _a.relative,\n  join = _a.join,\n  dirname = _a.dirname;\nvar isWin = process_1.default.platform === 'win32';\nvar kMinPoolSpace = 128;\n// const kMaxLength = require('buffer').kMaxLength;\n// ---------------------------------------- Error messages\n// TODO: Use `internal/errors.js` in the future.\nvar ERRSTR = {\n  PATH_STR: 'path must be a string or Buffer',\n  // FD:             'file descriptor must be a unsigned 32-bit integer',\n  FD: 'fd must be a file descriptor',\n  MODE_INT: 'mode must be an int',\n  CB: 'callback must be a function',\n  UID: 'uid must be an unsigned int',\n  GID: 'gid must be an unsigned int',\n  LEN: 'len must be an integer',\n  ATIME: 'atime must be an integer',\n  MTIME: 'mtime must be an integer',\n  PREFIX: 'filename prefix is required',\n  BUFFER: 'buffer must be an instance of Buffer or StaticBuffer',\n  OFFSET: 'offset must be an integer',\n  LENGTH: 'length must be an integer',\n  POSITION: 'position must be an integer'\n};\nvar ERRSTR_OPTS = function (tipeof) {\n  return \"Expected options to be either an object or a string, but got \".concat(tipeof, \" instead\");\n};\n// const ERRSTR_FLAG = flag => `Unknown file open flag: ${flag}`;\nvar ENOENT = 'ENOENT';\nvar EBADF = 'EBADF';\nvar EINVAL = 'EINVAL';\nvar EPERM = 'EPERM';\nvar EPROTO = 'EPROTO';\nvar EEXIST = 'EEXIST';\nvar ENOTDIR = 'ENOTDIR';\nvar EMFILE = 'EMFILE';\nvar EACCES = 'EACCES';\nvar EISDIR = 'EISDIR';\nvar ENOTEMPTY = 'ENOTEMPTY';\nvar ENOSYS = 'ENOSYS';\nvar ERR_FS_EISDIR = 'ERR_FS_EISDIR';\nfunction formatError(errorCode, func, path, path2) {\n  if (func === void 0) {\n    func = '';\n  }\n  if (path === void 0) {\n    path = '';\n  }\n  if (path2 === void 0) {\n    path2 = '';\n  }\n  var pathFormatted = '';\n  if (path) pathFormatted = \" '\".concat(path, \"'\");\n  if (path2) pathFormatted += \" -> '\".concat(path2, \"'\");\n  switch (errorCode) {\n    case ENOENT:\n      return \"ENOENT: no such file or directory, \".concat(func).concat(pathFormatted);\n    case EBADF:\n      return \"EBADF: bad file descriptor, \".concat(func).concat(pathFormatted);\n    case EINVAL:\n      return \"EINVAL: invalid argument, \".concat(func).concat(pathFormatted);\n    case EPERM:\n      return \"EPERM: operation not permitted, \".concat(func).concat(pathFormatted);\n    case EPROTO:\n      return \"EPROTO: protocol error, \".concat(func).concat(pathFormatted);\n    case EEXIST:\n      return \"EEXIST: file already exists, \".concat(func).concat(pathFormatted);\n    case ENOTDIR:\n      return \"ENOTDIR: not a directory, \".concat(func).concat(pathFormatted);\n    case EISDIR:\n      return \"EISDIR: illegal operation on a directory, \".concat(func).concat(pathFormatted);\n    case EACCES:\n      return \"EACCES: permission denied, \".concat(func).concat(pathFormatted);\n    case ENOTEMPTY:\n      return \"ENOTEMPTY: directory not empty, \".concat(func).concat(pathFormatted);\n    case EMFILE:\n      return \"EMFILE: too many open files, \".concat(func).concat(pathFormatted);\n    case ENOSYS:\n      return \"ENOSYS: function not implemented, \".concat(func).concat(pathFormatted);\n    case ERR_FS_EISDIR:\n      return \"[ERR_FS_EISDIR]: Path is a directory: \".concat(func, \" returned EISDIR (is a directory) \").concat(path);\n    default:\n      return \"\".concat(errorCode, \": error occurred, \").concat(func).concat(pathFormatted);\n  }\n}\nfunction createError(errorCode, func, path, path2, Constructor) {\n  if (func === void 0) {\n    func = '';\n  }\n  if (path === void 0) {\n    path = '';\n  }\n  if (path2 === void 0) {\n    path2 = '';\n  }\n  if (Constructor === void 0) {\n    Constructor = Error;\n  }\n  var error = new Constructor(formatError(errorCode, func, path, path2));\n  error.code = errorCode;\n  if (path) {\n    error.path = path;\n  }\n  return error;\n}\n// ---------------------------------------- Flags\n// List of file `flags` as defined by Node.\nvar FLAGS;\n(function (FLAGS) {\n  // Open file for reading. An exception occurs if the file does not exist.\n  FLAGS[FLAGS[\"r\"] = O_RDONLY] = \"r\";\n  // Open file for reading and writing. An exception occurs if the file does not exist.\n  FLAGS[FLAGS[\"r+\"] = O_RDWR] = \"r+\";\n  // Open file for reading in synchronous mode. Instructs the operating system to bypass the local file system cache.\n  FLAGS[FLAGS[\"rs\"] = O_RDONLY | O_SYNC] = \"rs\";\n  FLAGS[FLAGS[\"sr\"] = FLAGS.rs] = \"sr\";\n  // Open file for reading and writing, telling the OS to open it synchronously. See notes for 'rs' about using this with caution.\n  FLAGS[FLAGS[\"rs+\"] = O_RDWR | O_SYNC] = \"rs+\";\n  FLAGS[FLAGS[\"sr+\"] = FLAGS['rs+']] = \"sr+\";\n  // Open file for writing. The file is created (if it does not exist) or truncated (if it exists).\n  FLAGS[FLAGS[\"w\"] = O_WRONLY | O_CREAT | O_TRUNC] = \"w\";\n  // Like 'w' but fails if path exists.\n  FLAGS[FLAGS[\"wx\"] = O_WRONLY | O_CREAT | O_TRUNC | O_EXCL] = \"wx\";\n  FLAGS[FLAGS[\"xw\"] = FLAGS.wx] = \"xw\";\n  // Open file for reading and writing. The file is created (if it does not exist) or truncated (if it exists).\n  FLAGS[FLAGS[\"w+\"] = O_RDWR | O_CREAT | O_TRUNC] = \"w+\";\n  // Like 'w+' but fails if path exists.\n  FLAGS[FLAGS[\"wx+\"] = O_RDWR | O_CREAT | O_TRUNC | O_EXCL] = \"wx+\";\n  FLAGS[FLAGS[\"xw+\"] = FLAGS['wx+']] = \"xw+\";\n  // Open file for appending. The file is created if it does not exist.\n  FLAGS[FLAGS[\"a\"] = O_WRONLY | O_APPEND | O_CREAT] = \"a\";\n  // Like 'a' but fails if path exists.\n  FLAGS[FLAGS[\"ax\"] = O_WRONLY | O_APPEND | O_CREAT | O_EXCL] = \"ax\";\n  FLAGS[FLAGS[\"xa\"] = FLAGS.ax] = \"xa\";\n  // Open file for reading and appending. The file is created if it does not exist.\n  FLAGS[FLAGS[\"a+\"] = O_RDWR | O_APPEND | O_CREAT] = \"a+\";\n  // Like 'a+' but fails if path exists.\n  FLAGS[FLAGS[\"ax+\"] = O_RDWR | O_APPEND | O_CREAT | O_EXCL] = \"ax+\";\n  FLAGS[FLAGS[\"xa+\"] = FLAGS['ax+']] = \"xa+\";\n})(FLAGS = exports.FLAGS || (exports.FLAGS = {}));\nfunction flagsToNumber(flags) {\n  if (typeof flags === 'number') return flags;\n  if (typeof flags === 'string') {\n    var flagsNum = FLAGS[flags];\n    if (typeof flagsNum !== 'undefined') return flagsNum;\n  }\n  // throw new TypeError(formatError(ERRSTR_FLAG(flags)));\n  throw new errors.TypeError('ERR_INVALID_OPT_VALUE', 'flags', flags);\n}\nexports.flagsToNumber = flagsToNumber;\n// ---------------------------------------- Options\nfunction getOptions(defaults, options) {\n  var opts;\n  if (!options) return defaults;else {\n    var tipeof = typeof options;\n    switch (tipeof) {\n      case 'string':\n        opts = Object.assign({}, defaults, {\n          encoding: options\n        });\n        break;\n      case 'object':\n        opts = Object.assign({}, defaults, options);\n        break;\n      default:\n        throw TypeError(ERRSTR_OPTS(tipeof));\n    }\n  }\n  if (opts.encoding !== 'buffer') (0, encoding_1.assertEncoding)(opts.encoding);\n  return opts;\n}\nfunction optsGenerator(defaults) {\n  return function (options) {\n    return getOptions(defaults, options);\n  };\n}\nfunction validateCallback(callback) {\n  if (typeof callback !== 'function') throw TypeError(ERRSTR.CB);\n  return callback;\n}\nfunction optsAndCbGenerator(getOpts) {\n  return function (options, callback) {\n    return typeof options === 'function' ? [getOpts(), options] : [getOpts(options), validateCallback(callback)];\n  };\n}\nvar optsDefaults = {\n  encoding: 'utf8'\n};\nvar getDefaultOpts = optsGenerator(optsDefaults);\nvar getDefaultOptsAndCb = optsAndCbGenerator(getDefaultOpts);\nvar readFileOptsDefaults = {\n  flag: 'r'\n};\nvar getReadFileOptions = optsGenerator(readFileOptsDefaults);\nvar writeFileDefaults = {\n  encoding: 'utf8',\n  mode: 438 /* MODE.DEFAULT */,\n  flag: FLAGS[FLAGS.w]\n};\nvar getWriteFileOptions = optsGenerator(writeFileDefaults);\nvar appendFileDefaults = {\n  encoding: 'utf8',\n  mode: 438 /* MODE.DEFAULT */,\n  flag: FLAGS[FLAGS.a]\n};\nvar getAppendFileOpts = optsGenerator(appendFileDefaults);\nvar getAppendFileOptsAndCb = optsAndCbGenerator(getAppendFileOpts);\nvar realpathDefaults = optsDefaults;\nvar getRealpathOptions = optsGenerator(realpathDefaults);\nvar getRealpathOptsAndCb = optsAndCbGenerator(getRealpathOptions);\nvar mkdirDefaults = {\n  mode: 511 /* MODE.DIR */,\n  recursive: false\n};\nvar getMkdirOptions = function (options) {\n  if (typeof options === 'number') return Object.assign({}, mkdirDefaults, {\n    mode: options\n  });\n  return Object.assign({}, mkdirDefaults, options);\n};\nvar rmdirDefaults = {\n  recursive: false\n};\nvar getRmdirOptions = function (options) {\n  return Object.assign({}, rmdirDefaults, options);\n};\nvar getRmOpts = optsGenerator(optsDefaults);\nvar getRmOptsAndCb = optsAndCbGenerator(getRmOpts);\nvar readdirDefaults = {\n  encoding: 'utf8',\n  withFileTypes: false\n};\nvar getReaddirOptions = optsGenerator(readdirDefaults);\nvar getReaddirOptsAndCb = optsAndCbGenerator(getReaddirOptions);\nvar statDefaults = {\n  bigint: false\n};\nvar getStatOptions = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return Object.assign({}, statDefaults, options);\n};\nvar getStatOptsAndCb = function (options, callback) {\n  return typeof options === 'function' ? [getStatOptions(), options] : [getStatOptions(options), validateCallback(callback)];\n};\n// ---------------------------------------- Utility functions\nfunction getPathFromURLPosix(url) {\n  if (url.hostname !== '') {\n    throw new errors.TypeError('ERR_INVALID_FILE_URL_HOST', process_1.default.platform);\n  }\n  var pathname = url.pathname;\n  for (var n = 0; n < pathname.length; n++) {\n    if (pathname[n] === '%') {\n      var third = pathname.codePointAt(n + 2) | 0x20;\n      if (pathname[n + 1] === '2' && third === 102) {\n        throw new errors.TypeError('ERR_INVALID_FILE_URL_PATH', 'must not include encoded / characters');\n      }\n    }\n  }\n  return decodeURIComponent(pathname);\n}\nfunction pathToFilename(path) {\n  if (typeof path !== 'string' && !buffer_1.Buffer.isBuffer(path)) {\n    try {\n      if (!(path instanceof require('url').URL)) throw new TypeError(ERRSTR.PATH_STR);\n    } catch (err) {\n      throw new TypeError(ERRSTR.PATH_STR);\n    }\n    path = getPathFromURLPosix(path);\n  }\n  var pathString = String(path);\n  nullCheck(pathString);\n  // return slash(pathString);\n  return pathString;\n}\nexports.pathToFilename = pathToFilename;\nvar resolve = function (filename, base) {\n  if (base === void 0) {\n    base = process_1.default.cwd();\n  }\n  return resolveCrossPlatform(base, filename);\n};\nif (isWin) {\n  var _resolve_1 = resolve;\n  var unixify_1 = require('fs-monkey/lib/correctPath').unixify;\n  resolve = function (filename, base) {\n    return unixify_1(_resolve_1(filename, base));\n  };\n}\nfunction filenameToSteps(filename, base) {\n  var fullPath = resolve(filename, base);\n  var fullPathSansSlash = fullPath.substring(1);\n  if (!fullPathSansSlash) return [];\n  return fullPathSansSlash.split(sep);\n}\nexports.filenameToSteps = filenameToSteps;\nfunction pathToSteps(path) {\n  return filenameToSteps(pathToFilename(path));\n}\nexports.pathToSteps = pathToSteps;\nfunction dataToStr(data, encoding) {\n  if (encoding === void 0) {\n    encoding = encoding_1.ENCODING_UTF8;\n  }\n  if (buffer_1.Buffer.isBuffer(data)) return data.toString(encoding);else if (data instanceof Uint8Array) return (0, buffer_1.bufferFrom)(data).toString(encoding);else return String(data);\n}\nexports.dataToStr = dataToStr;\nfunction dataToBuffer(data, encoding) {\n  if (encoding === void 0) {\n    encoding = encoding_1.ENCODING_UTF8;\n  }\n  if (buffer_1.Buffer.isBuffer(data)) return data;else if (data instanceof Uint8Array) return (0, buffer_1.bufferFrom)(data);else return (0, buffer_1.bufferFrom)(String(data), encoding);\n}\nexports.dataToBuffer = dataToBuffer;\nfunction bufferToEncoding(buffer, encoding) {\n  if (!encoding || encoding === 'buffer') return buffer;else return buffer.toString(encoding);\n}\nexports.bufferToEncoding = bufferToEncoding;\nfunction nullCheck(path, callback) {\n  if (('' + path).indexOf('\\u0000') !== -1) {\n    var er = new Error('Path must be a string without null bytes');\n    er.code = ENOENT;\n    if (typeof callback !== 'function') throw er;\n    process_1.default.nextTick(callback, er);\n    return false;\n  }\n  return true;\n}\nfunction _modeToNumber(mode, def) {\n  if (typeof mode === 'number') return mode;\n  if (typeof mode === 'string') return parseInt(mode, 8);\n  if (def) return modeToNumber(def);\n  return undefined;\n}\nfunction modeToNumber(mode, def) {\n  var result = _modeToNumber(mode, def);\n  if (typeof result !== 'number' || isNaN(result)) throw new TypeError(ERRSTR.MODE_INT);\n  return result;\n}\nfunction isFd(path) {\n  return path >>> 0 === path;\n}\nfunction validateFd(fd) {\n  if (!isFd(fd)) throw TypeError(ERRSTR.FD);\n}\n// converts Date or number to a fractional UNIX timestamp\nfunction toUnixTimestamp(time) {\n  // tslint:disable-next-line triple-equals\n  if (typeof time === 'string' && +time == time) {\n    return +time;\n  }\n  if (time instanceof Date) {\n    return time.getTime() / 1000;\n  }\n  if (isFinite(time)) {\n    if (time < 0) {\n      return Date.now() / 1000;\n    }\n    return time;\n  }\n  throw new Error('Cannot parse time: ' + time);\n}\nexports.toUnixTimestamp = toUnixTimestamp;\nfunction validateUid(uid) {\n  if (typeof uid !== 'number') throw TypeError(ERRSTR.UID);\n}\nfunction validateGid(gid) {\n  if (typeof gid !== 'number') throw TypeError(ERRSTR.GID);\n}\nfunction flattenJSON(nestedJSON) {\n  var flatJSON = {};\n  function flatten(pathPrefix, node) {\n    for (var path in node) {\n      var contentOrNode = node[path];\n      var joinedPath = join(pathPrefix, path);\n      if (typeof contentOrNode === 'string') {\n        flatJSON[joinedPath] = contentOrNode;\n      } else if (typeof contentOrNode === 'object' && contentOrNode !== null && Object.keys(contentOrNode).length > 0) {\n        // empty directories need an explicit entry and therefore get handled in `else`, non-empty ones are implicitly considered\n        flatten(joinedPath, contentOrNode);\n      } else {\n        // without this branch null, empty-object or non-object entries would not be handled in the same way\n        // by both fromJSON() and fromNestedJSON()\n        flatJSON[joinedPath] = null;\n      }\n    }\n  }\n  flatten('', nestedJSON);\n  return flatJSON;\n}\n/**\n * `Volume` represents a file system.\n */\nvar Volume = /** @class */function () {\n  function Volume(props) {\n    if (props === void 0) {\n      props = {};\n    }\n    // I-node number counter.\n    this.ino = 0;\n    // A mapping for i-node numbers to i-nodes (`Node`);\n    this.inodes = {};\n    // List of released i-node numbers, for reuse.\n    this.releasedInos = [];\n    // A mapping for file descriptors to `File`s.\n    this.fds = {};\n    // A list of reusable (opened and closed) file descriptors, that should be\n    // used first before creating a new file descriptor.\n    this.releasedFds = [];\n    // Max number of open files.\n    this.maxFiles = 10000;\n    // Current number of open files.\n    this.openFiles = 0;\n    this.promisesApi = (0, promises_1.default)(this);\n    this.statWatchers = {};\n    this.props = Object.assign({\n      Node: node_1.Node,\n      Link: node_1.Link,\n      File: node_1.File\n    }, props);\n    var root = this.createLink();\n    root.setNode(this.createNode(true));\n    var self = this; // tslint:disable-line no-this-assignment\n    this.StatWatcher = /** @class */function (_super) {\n      __extends(StatWatcher, _super);\n      function StatWatcher() {\n        return _super.call(this, self) || this;\n      }\n      return StatWatcher;\n    }(StatWatcher);\n    var _ReadStream = FsReadStream;\n    this.ReadStream = /** @class */function (_super) {\n      __extends(class_1, _super);\n      function class_1() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return _super.apply(this, __spreadArray([self], args, false)) || this;\n      }\n      return class_1;\n    }(_ReadStream);\n    var _WriteStream = FsWriteStream;\n    this.WriteStream = /** @class */function (_super) {\n      __extends(class_2, _super);\n      function class_2() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return _super.apply(this, __spreadArray([self], args, false)) || this;\n      }\n      return class_2;\n    }(_WriteStream);\n    this.FSWatcher = /** @class */function (_super) {\n      __extends(FSWatcher, _super);\n      function FSWatcher() {\n        return _super.call(this, self) || this;\n      }\n      return FSWatcher;\n    }(FSWatcher);\n    root.setChild('.', root);\n    root.getNode().nlink++;\n    root.setChild('..', root);\n    root.getNode().nlink++;\n    this.root = root;\n  }\n  Volume.fromJSON = function (json, cwd) {\n    var vol = new Volume();\n    vol.fromJSON(json, cwd);\n    return vol;\n  };\n  Volume.fromNestedJSON = function (json, cwd) {\n    var vol = new Volume();\n    vol.fromNestedJSON(json, cwd);\n    return vol;\n  };\n  Object.defineProperty(Volume.prototype, \"promises\", {\n    get: function () {\n      if (this.promisesApi === null) throw new Error('Promise is not supported in this environment.');\n      return this.promisesApi;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Volume.prototype.createLink = function (parent, name, isDirectory, perm) {\n    if (isDirectory === void 0) {\n      isDirectory = false;\n    }\n    if (!parent) {\n      return new this.props.Link(this, null, '');\n    }\n    if (!name) {\n      throw new Error('createLink: name cannot be empty');\n    }\n    return parent.createChild(name, this.createNode(isDirectory, perm));\n  };\n  Volume.prototype.deleteLink = function (link) {\n    var parent = link.parent;\n    if (parent) {\n      parent.deleteChild(link);\n      return true;\n    }\n    return false;\n  };\n  Volume.prototype.newInoNumber = function () {\n    var releasedFd = this.releasedInos.pop();\n    if (releasedFd) return releasedFd;else {\n      this.ino = (this.ino + 1) % 0xffffffff;\n      return this.ino;\n    }\n  };\n  Volume.prototype.newFdNumber = function () {\n    var releasedFd = this.releasedFds.pop();\n    return typeof releasedFd === 'number' ? releasedFd : Volume.fd--;\n  };\n  Volume.prototype.createNode = function (isDirectory, perm) {\n    if (isDirectory === void 0) {\n      isDirectory = false;\n    }\n    var node = new this.props.Node(this.newInoNumber(), perm);\n    if (isDirectory) node.setIsDirectory();\n    this.inodes[node.ino] = node;\n    return node;\n  };\n  Volume.prototype.getNode = function (ino) {\n    return this.inodes[ino];\n  };\n  Volume.prototype.deleteNode = function (node) {\n    node.del();\n    delete this.inodes[node.ino];\n    this.releasedInos.push(node.ino);\n  };\n  // Generates 6 character long random string, used by `mkdtemp`.\n  Volume.prototype.genRndStr = function () {\n    var str = (Math.random() + 1).toString(36).substring(2, 8);\n    if (str.length === 6) return str;else return this.genRndStr();\n  };\n  // Returns a `Link` (hard link) referenced by path \"split\" into steps.\n  Volume.prototype.getLink = function (steps) {\n    return this.root.walk(steps);\n  };\n  // Just link `getLink`, but throws a correct user error, if link to found.\n  Volume.prototype.getLinkOrThrow = function (filename, funcName) {\n    var steps = filenameToSteps(filename);\n    var link = this.getLink(steps);\n    if (!link) throw createError(ENOENT, funcName, filename);\n    return link;\n  };\n  // Just like `getLink`, but also dereference/resolves symbolic links.\n  Volume.prototype.getResolvedLink = function (filenameOrSteps) {\n    var steps = typeof filenameOrSteps === 'string' ? filenameToSteps(filenameOrSteps) : filenameOrSteps;\n    var link = this.root;\n    var i = 0;\n    while (i < steps.length) {\n      var step = steps[i];\n      link = link.getChild(step);\n      if (!link) return null;\n      var node = link.getNode();\n      if (node.isSymlink()) {\n        steps = node.symlink.concat(steps.slice(i + 1));\n        link = this.root;\n        i = 0;\n        continue;\n      }\n      i++;\n    }\n    return link;\n  };\n  // Just like `getLinkOrThrow`, but also dereference/resolves symbolic links.\n  Volume.prototype.getResolvedLinkOrThrow = function (filename, funcName) {\n    var link = this.getResolvedLink(filename);\n    if (!link) throw createError(ENOENT, funcName, filename);\n    return link;\n  };\n  Volume.prototype.resolveSymlinks = function (link) {\n    // let node: Node = link.getNode();\n    // while(link && node.isSymlink()) {\n    //     link = this.getLink(node.symlink);\n    //     if(!link) return null;\n    //     node = link.getNode();\n    // }\n    // return link;\n    return this.getResolvedLink(link.steps.slice(1));\n  };\n  // Just like `getLinkOrThrow`, but also verifies that the link is a directory.\n  Volume.prototype.getLinkAsDirOrThrow = function (filename, funcName) {\n    var link = this.getLinkOrThrow(filename, funcName);\n    if (!link.getNode().isDirectory()) throw createError(ENOTDIR, funcName, filename);\n    return link;\n  };\n  // Get the immediate parent directory of the link.\n  Volume.prototype.getLinkParent = function (steps) {\n    return this.root.walk(steps, steps.length - 1);\n  };\n  Volume.prototype.getLinkParentAsDirOrThrow = function (filenameOrSteps, funcName) {\n    var steps = filenameOrSteps instanceof Array ? filenameOrSteps : filenameToSteps(filenameOrSteps);\n    var link = this.getLinkParent(steps);\n    if (!link) throw createError(ENOENT, funcName, sep + steps.join(sep));\n    if (!link.getNode().isDirectory()) throw createError(ENOTDIR, funcName, sep + steps.join(sep));\n    return link;\n  };\n  Volume.prototype.getFileByFd = function (fd) {\n    return this.fds[String(fd)];\n  };\n  Volume.prototype.getFileByFdOrThrow = function (fd, funcName) {\n    if (!isFd(fd)) throw TypeError(ERRSTR.FD);\n    var file = this.getFileByFd(fd);\n    if (!file) throw createError(EBADF, funcName);\n    return file;\n  };\n  /**\n   * @todo This is not used anymore. Remove.\n   */\n  /*\n  private getNodeByIdOrCreate(id: TFileId, flags: number, perm: number): Node {\n    if (typeof id === 'number') {\n      const file = this.getFileByFd(id);\n      if (!file) throw Error('File nto found');\n      return file.node;\n    } else {\n      const steps = pathToSteps(id as PathLike);\n      let link = this.getLink(steps);\n      if (link) return link.getNode();\n         // Try creating a node if not found.\n      if (flags & O_CREAT) {\n        const dirLink = this.getLinkParent(steps);\n        if (dirLink) {\n          const name = steps[steps.length - 1];\n          link = this.createLink(dirLink, name, false, perm);\n          return link.getNode();\n        }\n      }\n         throw createError(ENOENT, 'getNodeByIdOrCreate', pathToFilename(id));\n    }\n  }\n  */\n  Volume.prototype.wrapAsync = function (method, args, callback) {\n    var _this = this;\n    validateCallback(callback);\n    (0, setImmediate_1.default)(function () {\n      var result;\n      try {\n        result = method.apply(_this, args);\n      } catch (err) {\n        callback(err);\n        return;\n      }\n      callback(null, result);\n    });\n  };\n  Volume.prototype._toJSON = function (link, json, path) {\n    var _a;\n    if (link === void 0) {\n      link = this.root;\n    }\n    if (json === void 0) {\n      json = {};\n    }\n    var isEmpty = true;\n    var children = link.children;\n    if (link.getNode().isFile()) {\n      children = (_a = {}, _a[link.getName()] = link.parent.getChild(link.getName()), _a);\n      link = link.parent;\n    }\n    for (var name_1 in children) {\n      if (name_1 === '.' || name_1 === '..') {\n        continue;\n      }\n      isEmpty = false;\n      var child = link.getChild(name_1);\n      if (!child) {\n        throw new Error('_toJSON: unexpected undefined');\n      }\n      var node = child.getNode();\n      if (node.isFile()) {\n        var filename = child.getPath();\n        if (path) filename = relative(path, filename);\n        json[filename] = node.getString();\n      } else if (node.isDirectory()) {\n        this._toJSON(child, json, path);\n      }\n    }\n    var dirPath = link.getPath();\n    if (path) dirPath = relative(path, dirPath);\n    if (dirPath && isEmpty) {\n      json[dirPath] = null;\n    }\n    return json;\n  };\n  Volume.prototype.toJSON = function (paths, json, isRelative) {\n    if (json === void 0) {\n      json = {};\n    }\n    if (isRelative === void 0) {\n      isRelative = false;\n    }\n    var links = [];\n    if (paths) {\n      if (!(paths instanceof Array)) paths = [paths];\n      for (var _i = 0, paths_1 = paths; _i < paths_1.length; _i++) {\n        var path = paths_1[_i];\n        var filename = pathToFilename(path);\n        var link = this.getResolvedLink(filename);\n        if (!link) continue;\n        links.push(link);\n      }\n    } else {\n      links.push(this.root);\n    }\n    if (!links.length) return json;\n    for (var _a = 0, links_1 = links; _a < links_1.length; _a++) {\n      var link = links_1[_a];\n      this._toJSON(link, json, isRelative ? link.getPath() : '');\n    }\n    return json;\n  };\n  Volume.prototype.fromJSON = function (json, cwd) {\n    if (cwd === void 0) {\n      cwd = process_1.default.cwd();\n    }\n    for (var filename in json) {\n      var data = json[filename];\n      filename = resolve(filename, cwd);\n      if (typeof data === 'string') {\n        var dir = dirname(filename);\n        this.mkdirpBase(dir, 511 /* MODE.DIR */);\n        this.writeFileSync(filename, data);\n      } else {\n        this.mkdirpBase(filename, 511 /* MODE.DIR */);\n      }\n    }\n  };\n\n  Volume.prototype.fromNestedJSON = function (json, cwd) {\n    this.fromJSON(flattenJSON(json), cwd);\n  };\n  Volume.prototype.reset = function () {\n    this.ino = 0;\n    this.inodes = {};\n    this.releasedInos = [];\n    this.fds = {};\n    this.releasedFds = [];\n    this.openFiles = 0;\n    this.root = this.createLink();\n    this.root.setNode(this.createNode(true));\n  };\n  // Legacy interface\n  Volume.prototype.mountSync = function (mountpoint, json) {\n    this.fromJSON(json, mountpoint);\n  };\n  Volume.prototype.openLink = function (link, flagsNum, resolveSymlinks) {\n    if (resolveSymlinks === void 0) {\n      resolveSymlinks = true;\n    }\n    if (this.openFiles >= this.maxFiles) {\n      // Too many open files.\n      throw createError(EMFILE, 'open', link.getPath());\n    }\n    // Resolve symlinks.\n    var realLink = link;\n    if (resolveSymlinks) realLink = this.resolveSymlinks(link);\n    if (!realLink) throw createError(ENOENT, 'open', link.getPath());\n    var node = realLink.getNode();\n    // Check whether node is a directory\n    if (node.isDirectory()) {\n      if ((flagsNum & (O_RDONLY | O_RDWR | O_WRONLY)) !== O_RDONLY) throw createError(EISDIR, 'open', link.getPath());\n    } else {\n      if (flagsNum & O_DIRECTORY) throw createError(ENOTDIR, 'open', link.getPath());\n    }\n    // Check node permissions\n    if (!(flagsNum & O_WRONLY)) {\n      if (!node.canRead()) {\n        throw createError(EACCES, 'open', link.getPath());\n      }\n    }\n    if (flagsNum & O_RDWR) {}\n    var file = new this.props.File(link, node, flagsNum, this.newFdNumber());\n    this.fds[file.fd] = file;\n    this.openFiles++;\n    if (flagsNum & O_TRUNC) file.truncate();\n    return file;\n  };\n  Volume.prototype.openFile = function (filename, flagsNum, modeNum, resolveSymlinks) {\n    if (resolveSymlinks === void 0) {\n      resolveSymlinks = true;\n    }\n    var steps = filenameToSteps(filename);\n    var link = resolveSymlinks ? this.getResolvedLink(steps) : this.getLink(steps);\n    if (link && flagsNum & O_EXCL) throw createError(EEXIST, 'open', filename);\n    // Try creating a new file, if it does not exist.\n    if (!link && flagsNum & O_CREAT) {\n      // const dirLink: Link = this.getLinkParent(steps);\n      var dirLink = this.getResolvedLink(steps.slice(0, steps.length - 1));\n      // if(!dirLink) throw createError(ENOENT, 'open', filename);\n      if (!dirLink) throw createError(ENOENT, 'open', sep + steps.join(sep));\n      if (flagsNum & O_CREAT && typeof modeNum === 'number') {\n        link = this.createLink(dirLink, steps[steps.length - 1], false, modeNum);\n      }\n    }\n    if (link) return this.openLink(link, flagsNum, resolveSymlinks);\n    throw createError(ENOENT, 'open', filename);\n  };\n  Volume.prototype.openBase = function (filename, flagsNum, modeNum, resolveSymlinks) {\n    if (resolveSymlinks === void 0) {\n      resolveSymlinks = true;\n    }\n    var file = this.openFile(filename, flagsNum, modeNum, resolveSymlinks);\n    if (!file) throw createError(ENOENT, 'open', filename);\n    return file.fd;\n  };\n  Volume.prototype.openSync = function (path, flags, mode) {\n    if (mode === void 0) {\n      mode = 438 /* MODE.DEFAULT */;\n    }\n    // Validate (1) mode; (2) path; (3) flags - in that order.\n    var modeNum = modeToNumber(mode);\n    var fileName = pathToFilename(path);\n    var flagsNum = flagsToNumber(flags);\n    return this.openBase(fileName, flagsNum, modeNum);\n  };\n  Volume.prototype.open = function (path, flags, a, b) {\n    var mode = a;\n    var callback = b;\n    if (typeof a === 'function') {\n      mode = 438 /* MODE.DEFAULT */;\n      callback = a;\n    }\n    mode = mode || 438 /* MODE.DEFAULT */;\n    var modeNum = modeToNumber(mode);\n    var fileName = pathToFilename(path);\n    var flagsNum = flagsToNumber(flags);\n    this.wrapAsync(this.openBase, [fileName, flagsNum, modeNum], callback);\n  };\n  Volume.prototype.closeFile = function (file) {\n    if (!this.fds[file.fd]) return;\n    this.openFiles--;\n    delete this.fds[file.fd];\n    this.releasedFds.push(file.fd);\n  };\n  Volume.prototype.closeSync = function (fd) {\n    validateFd(fd);\n    var file = this.getFileByFdOrThrow(fd, 'close');\n    this.closeFile(file);\n  };\n  Volume.prototype.close = function (fd, callback) {\n    validateFd(fd);\n    this.wrapAsync(this.closeSync, [fd], callback);\n  };\n  Volume.prototype.openFileOrGetById = function (id, flagsNum, modeNum) {\n    if (typeof id === 'number') {\n      var file = this.fds[id];\n      if (!file) throw createError(ENOENT);\n      return file;\n    } else {\n      return this.openFile(pathToFilename(id), flagsNum, modeNum);\n    }\n  };\n  Volume.prototype.readBase = function (fd, buffer, offset, length, position) {\n    var file = this.getFileByFdOrThrow(fd);\n    return file.read(buffer, Number(offset), Number(length), position);\n  };\n  Volume.prototype.readSync = function (fd, buffer, offset, length, position) {\n    validateFd(fd);\n    return this.readBase(fd, buffer, offset, length, position);\n  };\n  Volume.prototype.read = function (fd, buffer, offset, length, position, callback) {\n    var _this = this;\n    validateCallback(callback);\n    // This `if` branch is from Node.js\n    if (length === 0) {\n      return process_1.default.nextTick(function () {\n        if (callback) callback(null, 0, buffer);\n      });\n    }\n    (0, setImmediate_1.default)(function () {\n      try {\n        var bytes = _this.readBase(fd, buffer, offset, length, position);\n        callback(null, bytes, buffer);\n      } catch (err) {\n        callback(err);\n      }\n    });\n  };\n  Volume.prototype.readFileBase = function (id, flagsNum, encoding) {\n    var result;\n    var isUserFd = typeof id === 'number';\n    var userOwnsFd = isUserFd && isFd(id);\n    var fd;\n    if (userOwnsFd) fd = id;else {\n      var filename = pathToFilename(id);\n      var steps = filenameToSteps(filename);\n      var link = this.getResolvedLink(steps);\n      if (link) {\n        var node = link.getNode();\n        if (node.isDirectory()) throw createError(EISDIR, 'open', link.getPath());\n      }\n      fd = this.openSync(id, flagsNum);\n    }\n    try {\n      result = bufferToEncoding(this.getFileByFdOrThrow(fd).getBuffer(), encoding);\n    } finally {\n      if (!userOwnsFd) {\n        this.closeSync(fd);\n      }\n    }\n    return result;\n  };\n  Volume.prototype.readFileSync = function (file, options) {\n    var opts = getReadFileOptions(options);\n    var flagsNum = flagsToNumber(opts.flag);\n    return this.readFileBase(file, flagsNum, opts.encoding);\n  };\n  Volume.prototype.readFile = function (id, a, b) {\n    var _a = optsAndCbGenerator(getReadFileOptions)(a, b),\n      opts = _a[0],\n      callback = _a[1];\n    var flagsNum = flagsToNumber(opts.flag);\n    this.wrapAsync(this.readFileBase, [id, flagsNum, opts.encoding], callback);\n  };\n  Volume.prototype.writeBase = function (fd, buf, offset, length, position) {\n    var file = this.getFileByFdOrThrow(fd, 'write');\n    return file.write(buf, offset, length, position);\n  };\n  Volume.prototype.writeSync = function (fd, a, b, c, d) {\n    validateFd(fd);\n    var encoding;\n    var offset;\n    var length;\n    var position;\n    var isBuffer = typeof a !== 'string';\n    if (isBuffer) {\n      offset = (b || 0) | 0;\n      length = c;\n      position = d;\n    } else {\n      position = b;\n      encoding = c;\n    }\n    var buf = dataToBuffer(a, encoding);\n    if (isBuffer) {\n      if (typeof length === 'undefined') {\n        length = buf.length;\n      }\n    } else {\n      offset = 0;\n      length = buf.length;\n    }\n    return this.writeBase(fd, buf, offset, length, position);\n  };\n  Volume.prototype.write = function (fd, a, b, c, d, e) {\n    var _this = this;\n    validateFd(fd);\n    var offset;\n    var length;\n    var position;\n    var encoding;\n    var callback;\n    var tipa = typeof a;\n    var tipb = typeof b;\n    var tipc = typeof c;\n    var tipd = typeof d;\n    if (tipa !== 'string') {\n      if (tipb === 'function') {\n        callback = b;\n      } else if (tipc === 'function') {\n        offset = b | 0;\n        callback = c;\n      } else if (tipd === 'function') {\n        offset = b | 0;\n        length = c;\n        callback = d;\n      } else {\n        offset = b | 0;\n        length = c;\n        position = d;\n        callback = e;\n      }\n    } else {\n      if (tipb === 'function') {\n        callback = b;\n      } else if (tipc === 'function') {\n        position = b;\n        callback = c;\n      } else if (tipd === 'function') {\n        position = b;\n        encoding = c;\n        callback = d;\n      }\n    }\n    var buf = dataToBuffer(a, encoding);\n    if (tipa !== 'string') {\n      if (typeof length === 'undefined') length = buf.length;\n    } else {\n      offset = 0;\n      length = buf.length;\n    }\n    var cb = validateCallback(callback);\n    (0, setImmediate_1.default)(function () {\n      try {\n        var bytes = _this.writeBase(fd, buf, offset, length, position);\n        if (tipa !== 'string') {\n          cb(null, bytes, buf);\n        } else {\n          cb(null, bytes, a);\n        }\n      } catch (err) {\n        cb(err);\n      }\n    });\n  };\n  Volume.prototype.writeFileBase = function (id, buf, flagsNum, modeNum) {\n    // console.log('writeFileBase', id, buf, flagsNum, modeNum);\n    // const node = this.getNodeByIdOrCreate(id, flagsNum, modeNum);\n    // node.setBuffer(buf);\n    var isUserFd = typeof id === 'number';\n    var fd;\n    if (isUserFd) fd = id;else {\n      fd = this.openBase(pathToFilename(id), flagsNum, modeNum);\n      // fd = this.openSync(id as PathLike, flagsNum, modeNum);\n    }\n\n    var offset = 0;\n    var length = buf.length;\n    var position = flagsNum & O_APPEND ? undefined : 0;\n    try {\n      while (length > 0) {\n        var written = this.writeSync(fd, buf, offset, length, position);\n        offset += written;\n        length -= written;\n        if (position !== undefined) position += written;\n      }\n    } finally {\n      if (!isUserFd) this.closeSync(fd);\n    }\n  };\n  Volume.prototype.writeFileSync = function (id, data, options) {\n    var opts = getWriteFileOptions(options);\n    var flagsNum = flagsToNumber(opts.flag);\n    var modeNum = modeToNumber(opts.mode);\n    var buf = dataToBuffer(data, opts.encoding);\n    this.writeFileBase(id, buf, flagsNum, modeNum);\n  };\n  Volume.prototype.writeFile = function (id, data, a, b) {\n    var options = a;\n    var callback = b;\n    if (typeof a === 'function') {\n      options = writeFileDefaults;\n      callback = a;\n    }\n    var cb = validateCallback(callback);\n    var opts = getWriteFileOptions(options);\n    var flagsNum = flagsToNumber(opts.flag);\n    var modeNum = modeToNumber(opts.mode);\n    var buf = dataToBuffer(data, opts.encoding);\n    this.wrapAsync(this.writeFileBase, [id, buf, flagsNum, modeNum], cb);\n  };\n  Volume.prototype.linkBase = function (filename1, filename2) {\n    var steps1 = filenameToSteps(filename1);\n    var link1 = this.getLink(steps1);\n    if (!link1) throw createError(ENOENT, 'link', filename1, filename2);\n    var steps2 = filenameToSteps(filename2);\n    // Check new link directory exists.\n    var dir2 = this.getLinkParent(steps2);\n    if (!dir2) throw createError(ENOENT, 'link', filename1, filename2);\n    var name = steps2[steps2.length - 1];\n    // Check if new file already exists.\n    if (dir2.getChild(name)) throw createError(EEXIST, 'link', filename1, filename2);\n    var node = link1.getNode();\n    node.nlink++;\n    dir2.createChild(name, node);\n  };\n  Volume.prototype.copyFileBase = function (src, dest, flags) {\n    var buf = this.readFileSync(src);\n    if (flags & COPYFILE_EXCL) {\n      if (this.existsSync(dest)) {\n        throw createError(EEXIST, 'copyFile', src, dest);\n      }\n    }\n    if (flags & COPYFILE_FICLONE_FORCE) {\n      throw createError(ENOSYS, 'copyFile', src, dest);\n    }\n    this.writeFileBase(dest, buf, FLAGS.w, 438 /* MODE.DEFAULT */);\n  };\n\n  Volume.prototype.copyFileSync = function (src, dest, flags) {\n    var srcFilename = pathToFilename(src);\n    var destFilename = pathToFilename(dest);\n    return this.copyFileBase(srcFilename, destFilename, (flags || 0) | 0);\n  };\n  Volume.prototype.copyFile = function (src, dest, a, b) {\n    var srcFilename = pathToFilename(src);\n    var destFilename = pathToFilename(dest);\n    var flags;\n    var callback;\n    if (typeof a === 'function') {\n      flags = 0;\n      callback = a;\n    } else {\n      flags = a;\n      callback = b;\n    }\n    validateCallback(callback);\n    this.wrapAsync(this.copyFileBase, [srcFilename, destFilename, flags], callback);\n  };\n  Volume.prototype.linkSync = function (existingPath, newPath) {\n    var existingPathFilename = pathToFilename(existingPath);\n    var newPathFilename = pathToFilename(newPath);\n    this.linkBase(existingPathFilename, newPathFilename);\n  };\n  Volume.prototype.link = function (existingPath, newPath, callback) {\n    var existingPathFilename = pathToFilename(existingPath);\n    var newPathFilename = pathToFilename(newPath);\n    this.wrapAsync(this.linkBase, [existingPathFilename, newPathFilename], callback);\n  };\n  Volume.prototype.unlinkBase = function (filename) {\n    var steps = filenameToSteps(filename);\n    var link = this.getLink(steps);\n    if (!link) throw createError(ENOENT, 'unlink', filename);\n    // TODO: Check if it is file, dir, other...\n    if (link.length) throw Error('Dir not empty...');\n    this.deleteLink(link);\n    var node = link.getNode();\n    node.nlink--;\n    // When all hard links to i-node are deleted, remove the i-node, too.\n    if (node.nlink <= 0) {\n      this.deleteNode(node);\n    }\n  };\n  Volume.prototype.unlinkSync = function (path) {\n    var filename = pathToFilename(path);\n    this.unlinkBase(filename);\n  };\n  Volume.prototype.unlink = function (path, callback) {\n    var filename = pathToFilename(path);\n    this.wrapAsync(this.unlinkBase, [filename], callback);\n  };\n  Volume.prototype.symlinkBase = function (targetFilename, pathFilename) {\n    var pathSteps = filenameToSteps(pathFilename);\n    // Check if directory exists, where we about to create a symlink.\n    var dirLink = this.getLinkParent(pathSteps);\n    if (!dirLink) throw createError(ENOENT, 'symlink', targetFilename, pathFilename);\n    var name = pathSteps[pathSteps.length - 1];\n    // Check if new file already exists.\n    if (dirLink.getChild(name)) throw createError(EEXIST, 'symlink', targetFilename, pathFilename);\n    // Create symlink.\n    var symlink = dirLink.createChild(name);\n    symlink.getNode().makeSymlink(filenameToSteps(targetFilename));\n    return symlink;\n  };\n  // `type` argument works only on Windows.\n  Volume.prototype.symlinkSync = function (target, path, type) {\n    var targetFilename = pathToFilename(target);\n    var pathFilename = pathToFilename(path);\n    this.symlinkBase(targetFilename, pathFilename);\n  };\n  Volume.prototype.symlink = function (target, path, a, b) {\n    var callback = validateCallback(typeof a === 'function' ? a : b);\n    var targetFilename = pathToFilename(target);\n    var pathFilename = pathToFilename(path);\n    this.wrapAsync(this.symlinkBase, [targetFilename, pathFilename], callback);\n  };\n  Volume.prototype.realpathBase = function (filename, encoding) {\n    var steps = filenameToSteps(filename);\n    var realLink = this.getResolvedLink(steps);\n    if (!realLink) throw createError(ENOENT, 'realpath', filename);\n    return (0, encoding_1.strToEncoding)(realLink.getPath() || '/', encoding);\n  };\n  Volume.prototype.realpathSync = function (path, options) {\n    return this.realpathBase(pathToFilename(path), getRealpathOptions(options).encoding);\n  };\n  Volume.prototype.realpath = function (path, a, b) {\n    var _a = getRealpathOptsAndCb(a, b),\n      opts = _a[0],\n      callback = _a[1];\n    var pathFilename = pathToFilename(path);\n    this.wrapAsync(this.realpathBase, [pathFilename, opts.encoding], callback);\n  };\n  Volume.prototype.lstatBase = function (filename, bigint, throwIfNoEntry) {\n    if (bigint === void 0) {\n      bigint = false;\n    }\n    if (throwIfNoEntry === void 0) {\n      throwIfNoEntry = false;\n    }\n    var link = this.getLink(filenameToSteps(filename));\n    if (link) {\n      return Stats_1.default.build(link.getNode(), bigint);\n    } else if (!throwIfNoEntry) {\n      return undefined;\n    } else {\n      throw createError(ENOENT, 'lstat', filename);\n    }\n  };\n  Volume.prototype.lstatSync = function (path, options) {\n    var _a = getStatOptions(options),\n      _b = _a.throwIfNoEntry,\n      throwIfNoEntry = _b === void 0 ? true : _b,\n      _c = _a.bigint,\n      bigint = _c === void 0 ? false : _c;\n    return this.lstatBase(pathToFilename(path), bigint, throwIfNoEntry);\n  };\n  Volume.prototype.lstat = function (path, a, b) {\n    var _a = getStatOptsAndCb(a, b),\n      _b = _a[0],\n      _c = _b.throwIfNoEntry,\n      throwIfNoEntry = _c === void 0 ? true : _c,\n      _d = _b.bigint,\n      bigint = _d === void 0 ? false : _d,\n      callback = _a[1];\n    this.wrapAsync(this.lstatBase, [pathToFilename(path), bigint, throwIfNoEntry], callback);\n  };\n  Volume.prototype.statBase = function (filename, bigint, throwIfNoEntry) {\n    if (bigint === void 0) {\n      bigint = false;\n    }\n    if (throwIfNoEntry === void 0) {\n      throwIfNoEntry = true;\n    }\n    var link = this.getResolvedLink(filenameToSteps(filename));\n    if (link) {\n      return Stats_1.default.build(link.getNode(), bigint);\n    } else if (!throwIfNoEntry) {\n      return undefined;\n    } else {\n      throw createError(ENOENT, 'stat', filename);\n    }\n  };\n  Volume.prototype.statSync = function (path, options) {\n    var _a = getStatOptions(options),\n      _b = _a.bigint,\n      bigint = _b === void 0 ? true : _b,\n      _c = _a.throwIfNoEntry,\n      throwIfNoEntry = _c === void 0 ? true : _c;\n    return this.statBase(pathToFilename(path), bigint, throwIfNoEntry);\n  };\n  Volume.prototype.stat = function (path, a, b) {\n    var _a = getStatOptsAndCb(a, b),\n      _b = _a[0],\n      _c = _b.bigint,\n      bigint = _c === void 0 ? false : _c,\n      _d = _b.throwIfNoEntry,\n      throwIfNoEntry = _d === void 0 ? true : _d,\n      callback = _a[1];\n    this.wrapAsync(this.statBase, [pathToFilename(path), bigint, throwIfNoEntry], callback);\n  };\n  Volume.prototype.fstatBase = function (fd, bigint) {\n    if (bigint === void 0) {\n      bigint = false;\n    }\n    var file = this.getFileByFd(fd);\n    if (!file) throw createError(EBADF, 'fstat');\n    return Stats_1.default.build(file.node, bigint);\n  };\n  Volume.prototype.fstatSync = function (fd, options) {\n    return this.fstatBase(fd, getStatOptions(options).bigint);\n  };\n  Volume.prototype.fstat = function (fd, a, b) {\n    var _a = getStatOptsAndCb(a, b),\n      opts = _a[0],\n      callback = _a[1];\n    this.wrapAsync(this.fstatBase, [fd, opts.bigint], callback);\n  };\n  Volume.prototype.renameBase = function (oldPathFilename, newPathFilename) {\n    var link = this.getLink(filenameToSteps(oldPathFilename));\n    if (!link) throw createError(ENOENT, 'rename', oldPathFilename, newPathFilename);\n    // TODO: Check if it is directory, if non-empty, we cannot move it, right?\n    var newPathSteps = filenameToSteps(newPathFilename);\n    // Check directory exists for the new location.\n    var newPathDirLink = this.getLinkParent(newPathSteps);\n    if (!newPathDirLink) throw createError(ENOENT, 'rename', oldPathFilename, newPathFilename);\n    // TODO: Also treat cases with directories and symbolic links.\n    // TODO: See: http://man7.org/linux/man-pages/man2/rename.2.html\n    // Remove hard link from old folder.\n    var oldLinkParent = link.parent;\n    if (oldLinkParent) {\n      oldLinkParent.deleteChild(link);\n    }\n    // Rename should overwrite the new path, if that exists.\n    var name = newPathSteps[newPathSteps.length - 1];\n    link.name = name;\n    link.steps = __spreadArray(__spreadArray([], newPathDirLink.steps, true), [name], false);\n    newPathDirLink.setChild(link.getName(), link);\n  };\n  Volume.prototype.renameSync = function (oldPath, newPath) {\n    var oldPathFilename = pathToFilename(oldPath);\n    var newPathFilename = pathToFilename(newPath);\n    this.renameBase(oldPathFilename, newPathFilename);\n  };\n  Volume.prototype.rename = function (oldPath, newPath, callback) {\n    var oldPathFilename = pathToFilename(oldPath);\n    var newPathFilename = pathToFilename(newPath);\n    this.wrapAsync(this.renameBase, [oldPathFilename, newPathFilename], callback);\n  };\n  Volume.prototype.existsBase = function (filename) {\n    return !!this.statBase(filename);\n  };\n  Volume.prototype.existsSync = function (path) {\n    try {\n      return this.existsBase(pathToFilename(path));\n    } catch (err) {\n      return false;\n    }\n  };\n  Volume.prototype.exists = function (path, callback) {\n    var _this = this;\n    var filename = pathToFilename(path);\n    if (typeof callback !== 'function') throw Error(ERRSTR.CB);\n    (0, setImmediate_1.default)(function () {\n      try {\n        callback(_this.existsBase(filename));\n      } catch (err) {\n        callback(false);\n      }\n    });\n  };\n  Volume.prototype.accessBase = function (filename, mode) {\n    var link = this.getLinkOrThrow(filename, 'access');\n    // TODO: Verify permissions\n  };\n\n  Volume.prototype.accessSync = function (path, mode) {\n    if (mode === void 0) {\n      mode = F_OK;\n    }\n    var filename = pathToFilename(path);\n    mode = mode | 0;\n    this.accessBase(filename, mode);\n  };\n  Volume.prototype.access = function (path, a, b) {\n    var mode = F_OK;\n    var callback;\n    if (typeof a !== 'function') {\n      mode = a | 0; // cast to number\n      callback = validateCallback(b);\n    } else {\n      callback = a;\n    }\n    var filename = pathToFilename(path);\n    this.wrapAsync(this.accessBase, [filename, mode], callback);\n  };\n  Volume.prototype.appendFileSync = function (id, data, options) {\n    if (options === void 0) {\n      options = appendFileDefaults;\n    }\n    var opts = getAppendFileOpts(options);\n    // force append behavior when using a supplied file descriptor\n    if (!opts.flag || isFd(id)) opts.flag = 'a';\n    this.writeFileSync(id, data, opts);\n  };\n  Volume.prototype.appendFile = function (id, data, a, b) {\n    var _a = getAppendFileOptsAndCb(a, b),\n      opts = _a[0],\n      callback = _a[1];\n    // force append behavior when using a supplied file descriptor\n    if (!opts.flag || isFd(id)) opts.flag = 'a';\n    this.writeFile(id, data, opts, callback);\n  };\n  Volume.prototype.readdirBase = function (filename, options) {\n    var steps = filenameToSteps(filename);\n    var link = this.getResolvedLink(steps);\n    if (!link) throw createError(ENOENT, 'readdir', filename);\n    var node = link.getNode();\n    if (!node.isDirectory()) throw createError(ENOTDIR, 'scandir', filename);\n    if (options.withFileTypes) {\n      var list_1 = [];\n      for (var name_2 in link.children) {\n        var child = link.getChild(name_2);\n        if (!child || name_2 === '.' || name_2 === '..') {\n          continue;\n        }\n        list_1.push(Dirent_1.default.build(child, options.encoding));\n      }\n      if (!isWin && options.encoding !== 'buffer') list_1.sort(function (a, b) {\n        if (a.name < b.name) return -1;\n        if (a.name > b.name) return 1;\n        return 0;\n      });\n      return list_1;\n    }\n    var list = [];\n    for (var name_3 in link.children) {\n      if (name_3 === '.' || name_3 === '..') {\n        continue;\n      }\n      list.push((0, encoding_1.strToEncoding)(name_3, options.encoding));\n    }\n    if (!isWin && options.encoding !== 'buffer') list.sort();\n    return list;\n  };\n  Volume.prototype.readdirSync = function (path, options) {\n    var opts = getReaddirOptions(options);\n    var filename = pathToFilename(path);\n    return this.readdirBase(filename, opts);\n  };\n  Volume.prototype.readdir = function (path, a, b) {\n    var _a = getReaddirOptsAndCb(a, b),\n      options = _a[0],\n      callback = _a[1];\n    var filename = pathToFilename(path);\n    this.wrapAsync(this.readdirBase, [filename, options], callback);\n  };\n  Volume.prototype.readlinkBase = function (filename, encoding) {\n    var link = this.getLinkOrThrow(filename, 'readlink');\n    var node = link.getNode();\n    if (!node.isSymlink()) throw createError(EINVAL, 'readlink', filename);\n    var str = sep + node.symlink.join(sep);\n    return (0, encoding_1.strToEncoding)(str, encoding);\n  };\n  Volume.prototype.readlinkSync = function (path, options) {\n    var opts = getDefaultOpts(options);\n    var filename = pathToFilename(path);\n    return this.readlinkBase(filename, opts.encoding);\n  };\n  Volume.prototype.readlink = function (path, a, b) {\n    var _a = getDefaultOptsAndCb(a, b),\n      opts = _a[0],\n      callback = _a[1];\n    var filename = pathToFilename(path);\n    this.wrapAsync(this.readlinkBase, [filename, opts.encoding], callback);\n  };\n  Volume.prototype.fsyncBase = function (fd) {\n    this.getFileByFdOrThrow(fd, 'fsync');\n  };\n  Volume.prototype.fsyncSync = function (fd) {\n    this.fsyncBase(fd);\n  };\n  Volume.prototype.fsync = function (fd, callback) {\n    this.wrapAsync(this.fsyncBase, [fd], callback);\n  };\n  Volume.prototype.fdatasyncBase = function (fd) {\n    this.getFileByFdOrThrow(fd, 'fdatasync');\n  };\n  Volume.prototype.fdatasyncSync = function (fd) {\n    this.fdatasyncBase(fd);\n  };\n  Volume.prototype.fdatasync = function (fd, callback) {\n    this.wrapAsync(this.fdatasyncBase, [fd], callback);\n  };\n  Volume.prototype.ftruncateBase = function (fd, len) {\n    var file = this.getFileByFdOrThrow(fd, 'ftruncate');\n    file.truncate(len);\n  };\n  Volume.prototype.ftruncateSync = function (fd, len) {\n    this.ftruncateBase(fd, len);\n  };\n  Volume.prototype.ftruncate = function (fd, a, b) {\n    var len = typeof a === 'number' ? a : 0;\n    var callback = validateCallback(typeof a === 'number' ? b : a);\n    this.wrapAsync(this.ftruncateBase, [fd, len], callback);\n  };\n  Volume.prototype.truncateBase = function (path, len) {\n    var fd = this.openSync(path, 'r+');\n    try {\n      this.ftruncateSync(fd, len);\n    } finally {\n      this.closeSync(fd);\n    }\n  };\n  Volume.prototype.truncateSync = function (id, len) {\n    if (isFd(id)) return this.ftruncateSync(id, len);\n    this.truncateBase(id, len);\n  };\n  Volume.prototype.truncate = function (id, a, b) {\n    var len = typeof a === 'number' ? a : 0;\n    var callback = validateCallback(typeof a === 'number' ? b : a);\n    if (isFd(id)) return this.ftruncate(id, len, callback);\n    this.wrapAsync(this.truncateBase, [id, len], callback);\n  };\n  Volume.prototype.futimesBase = function (fd, atime, mtime) {\n    var file = this.getFileByFdOrThrow(fd, 'futimes');\n    var node = file.node;\n    node.atime = new Date(atime * 1000);\n    node.mtime = new Date(mtime * 1000);\n  };\n  Volume.prototype.futimesSync = function (fd, atime, mtime) {\n    this.futimesBase(fd, toUnixTimestamp(atime), toUnixTimestamp(mtime));\n  };\n  Volume.prototype.futimes = function (fd, atime, mtime, callback) {\n    this.wrapAsync(this.futimesBase, [fd, toUnixTimestamp(atime), toUnixTimestamp(mtime)], callback);\n  };\n  Volume.prototype.utimesBase = function (filename, atime, mtime) {\n    var fd = this.openSync(filename, 'r');\n    try {\n      this.futimesBase(fd, atime, mtime);\n    } finally {\n      this.closeSync(fd);\n    }\n  };\n  Volume.prototype.utimesSync = function (path, atime, mtime) {\n    this.utimesBase(pathToFilename(path), toUnixTimestamp(atime), toUnixTimestamp(mtime));\n  };\n  Volume.prototype.utimes = function (path, atime, mtime, callback) {\n    this.wrapAsync(this.utimesBase, [pathToFilename(path), toUnixTimestamp(atime), toUnixTimestamp(mtime)], callback);\n  };\n  Volume.prototype.mkdirBase = function (filename, modeNum) {\n    var steps = filenameToSteps(filename);\n    // This will throw if user tries to create root dir `fs.mkdirSync('/')`.\n    if (!steps.length) {\n      throw createError(EEXIST, 'mkdir', filename);\n    }\n    var dir = this.getLinkParentAsDirOrThrow(filename, 'mkdir');\n    // Check path already exists.\n    var name = steps[steps.length - 1];\n    if (dir.getChild(name)) throw createError(EEXIST, 'mkdir', filename);\n    dir.createChild(name, this.createNode(true, modeNum));\n  };\n  /**\n   * Creates directory tree recursively.\n   * @param filename\n   * @param modeNum\n   */\n  Volume.prototype.mkdirpBase = function (filename, modeNum) {\n    var fullPath = resolve(filename);\n    var fullPathSansSlash = fullPath.substring(1);\n    var steps = !fullPathSansSlash ? [] : fullPathSansSlash.split(sep);\n    var link = this.root;\n    var created = false;\n    for (var i = 0; i < steps.length; i++) {\n      var step = steps[i];\n      if (!link.getNode().isDirectory()) throw createError(ENOTDIR, 'mkdir', link.getPath());\n      var child = link.getChild(step);\n      if (child) {\n        if (child.getNode().isDirectory()) link = child;else throw createError(ENOTDIR, 'mkdir', child.getPath());\n      } else {\n        link = link.createChild(step, this.createNode(true, modeNum));\n        created = true;\n      }\n    }\n    return created ? fullPath : undefined;\n  };\n  Volume.prototype.mkdirSync = function (path, options) {\n    var opts = getMkdirOptions(options);\n    var modeNum = modeToNumber(opts.mode, 511);\n    var filename = pathToFilename(path);\n    if (opts.recursive) return this.mkdirpBase(filename, modeNum);\n    this.mkdirBase(filename, modeNum);\n  };\n  Volume.prototype.mkdir = function (path, a, b) {\n    var opts = getMkdirOptions(a);\n    var callback = validateCallback(typeof a === 'function' ? a : b);\n    var modeNum = modeToNumber(opts.mode, 511);\n    var filename = pathToFilename(path);\n    if (opts.recursive) this.wrapAsync(this.mkdirpBase, [filename, modeNum], callback);else this.wrapAsync(this.mkdirBase, [filename, modeNum], callback);\n  };\n  // legacy interface\n  Volume.prototype.mkdirpSync = function (path, mode) {\n    return this.mkdirSync(path, {\n      mode: mode,\n      recursive: true\n    });\n  };\n  Volume.prototype.mkdirp = function (path, a, b) {\n    var mode = typeof a === 'function' ? undefined : a;\n    var callback = validateCallback(typeof a === 'function' ? a : b);\n    this.mkdir(path, {\n      mode: mode,\n      recursive: true\n    }, callback);\n  };\n  Volume.prototype.mkdtempBase = function (prefix, encoding, retry) {\n    if (retry === void 0) {\n      retry = 5;\n    }\n    var filename = prefix + this.genRndStr();\n    try {\n      this.mkdirBase(filename, 511 /* MODE.DIR */);\n      return (0, encoding_1.strToEncoding)(filename, encoding);\n    } catch (err) {\n      if (err.code === EEXIST) {\n        if (retry > 1) return this.mkdtempBase(prefix, encoding, retry - 1);else throw Error('Could not create temp dir.');\n      } else throw err;\n    }\n  };\n  Volume.prototype.mkdtempSync = function (prefix, options) {\n    var encoding = getDefaultOpts(options).encoding;\n    if (!prefix || typeof prefix !== 'string') throw new TypeError('filename prefix is required');\n    nullCheck(prefix);\n    return this.mkdtempBase(prefix, encoding);\n  };\n  Volume.prototype.mkdtemp = function (prefix, a, b) {\n    var _a = getDefaultOptsAndCb(a, b),\n      encoding = _a[0].encoding,\n      callback = _a[1];\n    if (!prefix || typeof prefix !== 'string') throw new TypeError('filename prefix is required');\n    if (!nullCheck(prefix)) return;\n    this.wrapAsync(this.mkdtempBase, [prefix, encoding], callback);\n  };\n  Volume.prototype.rmdirBase = function (filename, options) {\n    var opts = getRmdirOptions(options);\n    var link = this.getLinkAsDirOrThrow(filename, 'rmdir');\n    // Check directory is empty.\n    if (link.length && !opts.recursive) throw createError(ENOTEMPTY, 'rmdir', filename);\n    this.deleteLink(link);\n  };\n  Volume.prototype.rmdirSync = function (path, options) {\n    this.rmdirBase(pathToFilename(path), options);\n  };\n  Volume.prototype.rmdir = function (path, a, b) {\n    var opts = getRmdirOptions(a);\n    var callback = validateCallback(typeof a === 'function' ? a : b);\n    this.wrapAsync(this.rmdirBase, [pathToFilename(path), opts], callback);\n  };\n  Volume.prototype.rmBase = function (filename, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var link = this.getResolvedLink(filename);\n    if (!link) {\n      // \"stat\" is used to match Node's native error message.\n      if (!options.force) throw createError(ENOENT, 'stat', filename);\n      return;\n    }\n    if (link.getNode().isDirectory()) {\n      if (!options.recursive) {\n        throw createError(ERR_FS_EISDIR, 'rm', filename);\n      }\n    }\n    this.deleteLink(link);\n  };\n  Volume.prototype.rmSync = function (path, options) {\n    this.rmBase(pathToFilename(path), options);\n  };\n  Volume.prototype.rm = function (path, a, b) {\n    var _a = getRmOptsAndCb(a, b),\n      opts = _a[0],\n      callback = _a[1];\n    this.wrapAsync(this.rmBase, [pathToFilename(path), opts], callback);\n  };\n  Volume.prototype.fchmodBase = function (fd, modeNum) {\n    var file = this.getFileByFdOrThrow(fd, 'fchmod');\n    file.chmod(modeNum);\n  };\n  Volume.prototype.fchmodSync = function (fd, mode) {\n    this.fchmodBase(fd, modeToNumber(mode));\n  };\n  Volume.prototype.fchmod = function (fd, mode, callback) {\n    this.wrapAsync(this.fchmodBase, [fd, modeToNumber(mode)], callback);\n  };\n  Volume.prototype.chmodBase = function (filename, modeNum) {\n    var fd = this.openSync(filename, 'r');\n    try {\n      this.fchmodBase(fd, modeNum);\n    } finally {\n      this.closeSync(fd);\n    }\n  };\n  Volume.prototype.chmodSync = function (path, mode) {\n    var modeNum = modeToNumber(mode);\n    var filename = pathToFilename(path);\n    this.chmodBase(filename, modeNum);\n  };\n  Volume.prototype.chmod = function (path, mode, callback) {\n    var modeNum = modeToNumber(mode);\n    var filename = pathToFilename(path);\n    this.wrapAsync(this.chmodBase, [filename, modeNum], callback);\n  };\n  Volume.prototype.lchmodBase = function (filename, modeNum) {\n    var fd = this.openBase(filename, O_RDWR, 0, false);\n    try {\n      this.fchmodBase(fd, modeNum);\n    } finally {\n      this.closeSync(fd);\n    }\n  };\n  Volume.prototype.lchmodSync = function (path, mode) {\n    var modeNum = modeToNumber(mode);\n    var filename = pathToFilename(path);\n    this.lchmodBase(filename, modeNum);\n  };\n  Volume.prototype.lchmod = function (path, mode, callback) {\n    var modeNum = modeToNumber(mode);\n    var filename = pathToFilename(path);\n    this.wrapAsync(this.lchmodBase, [filename, modeNum], callback);\n  };\n  Volume.prototype.fchownBase = function (fd, uid, gid) {\n    this.getFileByFdOrThrow(fd, 'fchown').chown(uid, gid);\n  };\n  Volume.prototype.fchownSync = function (fd, uid, gid) {\n    validateUid(uid);\n    validateGid(gid);\n    this.fchownBase(fd, uid, gid);\n  };\n  Volume.prototype.fchown = function (fd, uid, gid, callback) {\n    validateUid(uid);\n    validateGid(gid);\n    this.wrapAsync(this.fchownBase, [fd, uid, gid], callback);\n  };\n  Volume.prototype.chownBase = function (filename, uid, gid) {\n    var link = this.getResolvedLinkOrThrow(filename, 'chown');\n    var node = link.getNode();\n    node.chown(uid, gid);\n    // if(node.isFile() || node.isSymlink()) {\n    //\n    // } else if(node.isDirectory()) {\n    //\n    // } else {\n    // TODO: What do we do here?\n    // }\n  };\n\n  Volume.prototype.chownSync = function (path, uid, gid) {\n    validateUid(uid);\n    validateGid(gid);\n    this.chownBase(pathToFilename(path), uid, gid);\n  };\n  Volume.prototype.chown = function (path, uid, gid, callback) {\n    validateUid(uid);\n    validateGid(gid);\n    this.wrapAsync(this.chownBase, [pathToFilename(path), uid, gid], callback);\n  };\n  Volume.prototype.lchownBase = function (filename, uid, gid) {\n    this.getLinkOrThrow(filename, 'lchown').getNode().chown(uid, gid);\n  };\n  Volume.prototype.lchownSync = function (path, uid, gid) {\n    validateUid(uid);\n    validateGid(gid);\n    this.lchownBase(pathToFilename(path), uid, gid);\n  };\n  Volume.prototype.lchown = function (path, uid, gid, callback) {\n    validateUid(uid);\n    validateGid(gid);\n    this.wrapAsync(this.lchownBase, [pathToFilename(path), uid, gid], callback);\n  };\n  Volume.prototype.watchFile = function (path, a, b) {\n    var filename = pathToFilename(path);\n    var options = a;\n    var listener = b;\n    if (typeof options === 'function') {\n      listener = a;\n      options = null;\n    }\n    if (typeof listener !== 'function') {\n      throw Error('\"watchFile()\" requires a listener function');\n    }\n    var interval = 5007;\n    var persistent = true;\n    if (options && typeof options === 'object') {\n      if (typeof options.interval === 'number') interval = options.interval;\n      if (typeof options.persistent === 'boolean') persistent = options.persistent;\n    }\n    var watcher = this.statWatchers[filename];\n    if (!watcher) {\n      watcher = new this.StatWatcher();\n      watcher.start(filename, persistent, interval);\n      this.statWatchers[filename] = watcher;\n    }\n    watcher.addListener('change', listener);\n    return watcher;\n  };\n  Volume.prototype.unwatchFile = function (path, listener) {\n    var filename = pathToFilename(path);\n    var watcher = this.statWatchers[filename];\n    if (!watcher) return;\n    if (typeof listener === 'function') {\n      watcher.removeListener('change', listener);\n    } else {\n      watcher.removeAllListeners('change');\n    }\n    if (watcher.listenerCount('change') === 0) {\n      watcher.stop();\n      delete this.statWatchers[filename];\n    }\n  };\n  Volume.prototype.createReadStream = function (path, options) {\n    return new this.ReadStream(path, options);\n  };\n  Volume.prototype.createWriteStream = function (path, options) {\n    return new this.WriteStream(path, options);\n  };\n  // watch(path: PathLike): FSWatcher;\n  // watch(path: PathLike, options?: IWatchOptions | string): FSWatcher;\n  Volume.prototype.watch = function (path, options, listener) {\n    var filename = pathToFilename(path);\n    var givenOptions = options;\n    if (typeof options === 'function') {\n      listener = options;\n      givenOptions = null;\n    }\n    // tslint:disable-next-line prefer-const\n    var _a = getDefaultOpts(givenOptions),\n      persistent = _a.persistent,\n      recursive = _a.recursive,\n      encoding = _a.encoding;\n    if (persistent === undefined) persistent = true;\n    if (recursive === undefined) recursive = false;\n    var watcher = new this.FSWatcher();\n    watcher.start(filename, persistent, recursive, encoding);\n    if (listener) {\n      watcher.addListener('change', listener);\n    }\n    return watcher;\n  };\n  /**\n   * Global file descriptor counter. UNIX file descriptors start from 0 and go sequentially\n   * up, so here, in order not to conflict with them, we choose some big number and descrease\n   * the file descriptor of every new opened file.\n   * @type {number}\n   * @todo This should not be static, right?\n   */\n  Volume.fd = 0x7fffffff;\n  return Volume;\n}();\nexports.Volume = Volume;\nfunction emitStop(self) {\n  self.emit('stop');\n}\nvar StatWatcher = /** @class */function (_super) {\n  __extends(StatWatcher, _super);\n  function StatWatcher(vol) {\n    var _this = _super.call(this) || this;\n    _this.onInterval = function () {\n      try {\n        var stats = _this.vol.statSync(_this.filename);\n        if (_this.hasChanged(stats)) {\n          _this.emit('change', stats, _this.prev);\n          _this.prev = stats;\n        }\n      } finally {\n        _this.loop();\n      }\n    };\n    _this.vol = vol;\n    return _this;\n  }\n  StatWatcher.prototype.loop = function () {\n    this.timeoutRef = this.setTimeout(this.onInterval, this.interval);\n  };\n  StatWatcher.prototype.hasChanged = function (stats) {\n    // if(!this.prev) return false;\n    if (stats.mtimeMs > this.prev.mtimeMs) return true;\n    if (stats.nlink !== this.prev.nlink) return true;\n    return false;\n  };\n  StatWatcher.prototype.start = function (path, persistent, interval) {\n    if (persistent === void 0) {\n      persistent = true;\n    }\n    if (interval === void 0) {\n      interval = 5007;\n    }\n    this.filename = pathToFilename(path);\n    this.setTimeout = persistent ? setTimeout.bind(typeof globalThis !== 'undefined' ? globalThis : global) : setTimeoutUnref_1.default;\n    this.interval = interval;\n    this.prev = this.vol.statSync(this.filename);\n    this.loop();\n  };\n  StatWatcher.prototype.stop = function () {\n    clearTimeout(this.timeoutRef);\n    process_1.default.nextTick(emitStop, this);\n  };\n  return StatWatcher;\n}(events_1.EventEmitter);\nexports.StatWatcher = StatWatcher;\nvar pool;\nfunction allocNewPool(poolSize) {\n  pool = (0, buffer_1.bufferAllocUnsafe)(poolSize);\n  pool.used = 0;\n}\nutil.inherits(FsReadStream, stream_1.Readable);\nexports.ReadStream = FsReadStream;\nfunction FsReadStream(vol, path, options) {\n  if (!(this instanceof FsReadStream)) return new FsReadStream(vol, path, options);\n  this._vol = vol;\n  // a little bit bigger buffer and water marks by default\n  options = Object.assign({}, getOptions(options, {}));\n  if (options.highWaterMark === undefined) options.highWaterMark = 64 * 1024;\n  stream_1.Readable.call(this, options);\n  this.path = pathToFilename(path);\n  this.fd = options.fd === undefined ? null : options.fd;\n  this.flags = options.flags === undefined ? 'r' : options.flags;\n  this.mode = options.mode === undefined ? 438 : options.mode;\n  this.start = options.start;\n  this.end = options.end;\n  this.autoClose = options.autoClose === undefined ? true : options.autoClose;\n  this.pos = undefined;\n  this.bytesRead = 0;\n  if (this.start !== undefined) {\n    if (typeof this.start !== 'number') {\n      throw new TypeError('\"start\" option must be a Number');\n    }\n    if (this.end === undefined) {\n      this.end = Infinity;\n    } else if (typeof this.end !== 'number') {\n      throw new TypeError('\"end\" option must be a Number');\n    }\n    if (this.start > this.end) {\n      throw new Error('\"start\" option must be <= \"end\" option');\n    }\n    this.pos = this.start;\n  }\n  if (typeof this.fd !== 'number') this.open();\n  this.on('end', function () {\n    if (this.autoClose) {\n      if (this.destroy) this.destroy();\n    }\n  });\n}\nFsReadStream.prototype.open = function () {\n  var self = this; // tslint:disable-line no-this-assignment\n  this._vol.open(this.path, this.flags, this.mode, function (er, fd) {\n    if (er) {\n      if (self.autoClose) {\n        if (self.destroy) self.destroy();\n      }\n      self.emit('error', er);\n      return;\n    }\n    self.fd = fd;\n    self.emit('open', fd);\n    // start the flow of data.\n    self.read();\n  });\n};\nFsReadStream.prototype._read = function (n) {\n  if (typeof this.fd !== 'number') {\n    return this.once('open', function () {\n      this._read(n);\n    });\n  }\n  if (this.destroyed) return;\n  if (!pool || pool.length - pool.used < kMinPoolSpace) {\n    // discard the old pool.\n    allocNewPool(this._readableState.highWaterMark);\n  }\n  // Grab another reference to the pool in the case that while we're\n  // in the thread pool another read() finishes up the pool, and\n  // allocates a new one.\n  var thisPool = pool;\n  var toRead = Math.min(pool.length - pool.used, n);\n  var start = pool.used;\n  if (this.pos !== undefined) toRead = Math.min(this.end - this.pos + 1, toRead);\n  // already read everything we were supposed to read!\n  // treat as EOF.\n  if (toRead <= 0) return this.push(null);\n  // the actual read.\n  var self = this; // tslint:disable-line no-this-assignment\n  this._vol.read(this.fd, pool, pool.used, toRead, this.pos, onread);\n  // move the pool positions, and internal position for reading.\n  if (this.pos !== undefined) this.pos += toRead;\n  pool.used += toRead;\n  function onread(er, bytesRead) {\n    if (er) {\n      if (self.autoClose && self.destroy) {\n        self.destroy();\n      }\n      self.emit('error', er);\n    } else {\n      var b = null;\n      if (bytesRead > 0) {\n        self.bytesRead += bytesRead;\n        b = thisPool.slice(start, start + bytesRead);\n      }\n      self.push(b);\n    }\n  }\n};\nFsReadStream.prototype._destroy = function (err, cb) {\n  this.close(function (err2) {\n    cb(err || err2);\n  });\n};\nFsReadStream.prototype.close = function (cb) {\n  var _this = this;\n  var _a;\n  if (cb) this.once('close', cb);\n  if (this.closed || typeof this.fd !== 'number') {\n    if (typeof this.fd !== 'number') {\n      this.once('open', closeOnOpen);\n      return;\n    }\n    return process_1.default.nextTick(function () {\n      return _this.emit('close');\n    });\n  }\n  // Since Node 18, there is only a getter for '.closed'.\n  // The first branch mimics other setters from Readable.\n  // See https://github.com/nodejs/node/blob/v18.0.0/lib/internal/streams/readable.js#L1243\n  if (typeof ((_a = this._readableState) === null || _a === void 0 ? void 0 : _a.closed) === 'boolean') {\n    this._readableState.closed = true;\n  } else {\n    this.closed = true;\n  }\n  this._vol.close(this.fd, function (er) {\n    if (er) _this.emit('error', er);else _this.emit('close');\n  });\n  this.fd = null;\n};\n// needed because as it will be called with arguments\n// that does not match this.close() signature\nfunction closeOnOpen(fd) {\n  this.close();\n}\nutil.inherits(FsWriteStream, stream_1.Writable);\nexports.WriteStream = FsWriteStream;\nfunction FsWriteStream(vol, path, options) {\n  if (!(this instanceof FsWriteStream)) return new FsWriteStream(vol, path, options);\n  this._vol = vol;\n  options = Object.assign({}, getOptions(options, {}));\n  stream_1.Writable.call(this, options);\n  this.path = pathToFilename(path);\n  this.fd = options.fd === undefined ? null : options.fd;\n  this.flags = options.flags === undefined ? 'w' : options.flags;\n  this.mode = options.mode === undefined ? 438 : options.mode;\n  this.start = options.start;\n  this.autoClose = options.autoClose === undefined ? true : !!options.autoClose;\n  this.pos = undefined;\n  this.bytesWritten = 0;\n  if (this.start !== undefined) {\n    if (typeof this.start !== 'number') {\n      throw new TypeError('\"start\" option must be a Number');\n    }\n    if (this.start < 0) {\n      throw new Error('\"start\" must be >= zero');\n    }\n    this.pos = this.start;\n  }\n  if (options.encoding) this.setDefaultEncoding(options.encoding);\n  if (typeof this.fd !== 'number') this.open();\n  // dispose on finish.\n  this.once('finish', function () {\n    if (this.autoClose) {\n      this.close();\n    }\n  });\n}\nFsWriteStream.prototype.open = function () {\n  this._vol.open(this.path, this.flags, this.mode, function (er, fd) {\n    if (er) {\n      if (this.autoClose && this.destroy) {\n        this.destroy();\n      }\n      this.emit('error', er);\n      return;\n    }\n    this.fd = fd;\n    this.emit('open', fd);\n  }.bind(this));\n};\nFsWriteStream.prototype._write = function (data, encoding, cb) {\n  if (!(data instanceof buffer_1.Buffer || data instanceof Uint8Array)) return this.emit('error', new Error('Invalid data'));\n  if (typeof this.fd !== 'number') {\n    return this.once('open', function () {\n      this._write(data, encoding, cb);\n    });\n  }\n  var self = this; // tslint:disable-line no-this-assignment\n  this._vol.write(this.fd, data, 0, data.length, this.pos, function (er, bytes) {\n    if (er) {\n      if (self.autoClose && self.destroy) {\n        self.destroy();\n      }\n      return cb(er);\n    }\n    self.bytesWritten += bytes;\n    cb();\n  });\n  if (this.pos !== undefined) this.pos += data.length;\n};\nFsWriteStream.prototype._writev = function (data, cb) {\n  if (typeof this.fd !== 'number') {\n    return this.once('open', function () {\n      this._writev(data, cb);\n    });\n  }\n  var self = this; // tslint:disable-line no-this-assignment\n  var len = data.length;\n  var chunks = new Array(len);\n  var size = 0;\n  for (var i = 0; i < len; i++) {\n    var chunk = data[i].chunk;\n    chunks[i] = chunk;\n    size += chunk.length;\n  }\n  var buf = buffer_1.Buffer.concat(chunks);\n  this._vol.write(this.fd, buf, 0, buf.length, this.pos, function (er, bytes) {\n    if (er) {\n      if (self.destroy) self.destroy();\n      return cb(er);\n    }\n    self.bytesWritten += bytes;\n    cb();\n  });\n  if (this.pos !== undefined) this.pos += size;\n};\nFsWriteStream.prototype.close = function (cb) {\n  var _this = this;\n  var _a;\n  if (cb) this.once('close', cb);\n  if (this.closed || typeof this.fd !== 'number') {\n    if (typeof this.fd !== 'number') {\n      this.once('open', closeOnOpen);\n      return;\n    }\n    return process_1.default.nextTick(function () {\n      return _this.emit('close');\n    });\n  }\n  // Since Node 18, there is only a getter for '.closed'.\n  // The first branch mimics other setters from Writable.\n  // See https://github.com/nodejs/node/blob/v18.0.0/lib/internal/streams/writable.js#L766\n  if (typeof ((_a = this._writableState) === null || _a === void 0 ? void 0 : _a.closed) === 'boolean') {\n    this._writableState.closed = true;\n  } else {\n    this.closed = true;\n  }\n  this._vol.close(this.fd, function (er) {\n    if (er) _this.emit('error', er);else _this.emit('close');\n  });\n  this.fd = null;\n};\nFsWriteStream.prototype._destroy = FsReadStream.prototype._destroy;\n// There is no shutdown() for files.\nFsWriteStream.prototype.destroySoon = FsWriteStream.prototype.end;\n// ---------------------------------------- FSWatcher\nvar FSWatcher = /** @class */function (_super) {\n  __extends(FSWatcher, _super);\n  function FSWatcher(vol) {\n    var _this = _super.call(this) || this;\n    _this._filename = '';\n    _this._filenameEncoded = '';\n    // _persistent: boolean = true;\n    _this._recursive = false;\n    _this._encoding = encoding_1.ENCODING_UTF8;\n    // inode -> removers\n    _this._listenerRemovers = new Map();\n    _this._onParentChild = function (link) {\n      if (link.getName() === _this._getName()) {\n        _this._emit('rename');\n      }\n    };\n    _this._emit = function (type) {\n      _this.emit('change', type, _this._filenameEncoded);\n    };\n    _this._persist = function () {\n      _this._timer = setTimeout(_this._persist, 1e6);\n    };\n    _this._vol = vol;\n    return _this;\n    // TODO: Emit \"error\" messages when watching.\n    // this._handle.onchange = function(status, eventType, filename) {\n    //     if (status < 0) {\n    //         self._handle.close();\n    //         const error = !filename ?\n    //             errnoException(status, 'Error watching file for changes:') :\n    //             errnoException(status, `Error watching file ${filename} for changes:`);\n    //         error.filename = filename;\n    //         self.emit('error', error);\n    //     } else {\n    //         self.emit('change', eventType, filename);\n    //     }\n    // };\n  }\n\n  FSWatcher.prototype._getName = function () {\n    return this._steps[this._steps.length - 1];\n  };\n  FSWatcher.prototype.start = function (path, persistent, recursive, encoding) {\n    var _this = this;\n    if (persistent === void 0) {\n      persistent = true;\n    }\n    if (recursive === void 0) {\n      recursive = false;\n    }\n    if (encoding === void 0) {\n      encoding = encoding_1.ENCODING_UTF8;\n    }\n    this._filename = pathToFilename(path);\n    this._steps = filenameToSteps(this._filename);\n    this._filenameEncoded = (0, encoding_1.strToEncoding)(this._filename);\n    // this._persistent = persistent;\n    this._recursive = recursive;\n    this._encoding = encoding;\n    try {\n      this._link = this._vol.getLinkOrThrow(this._filename, 'FSWatcher');\n    } catch (err) {\n      var error = new Error(\"watch \".concat(this._filename, \" \").concat(err.code));\n      error.code = err.code;\n      error.errno = err.code;\n      throw error;\n    }\n    var watchLinkNodeChanged = function (link) {\n      var _a;\n      var filepath = link.getPath();\n      var node = link.getNode();\n      var onNodeChange = function () {\n        return _this.emit('change', 'change', relative(_this._filename, filepath));\n      };\n      node.on('change', onNodeChange);\n      var removers = (_a = _this._listenerRemovers.get(node.ino)) !== null && _a !== void 0 ? _a : [];\n      removers.push(function () {\n        return node.removeListener('change', onNodeChange);\n      });\n      _this._listenerRemovers.set(node.ino, removers);\n    };\n    var watchLinkChildrenChanged = function (link) {\n      var _a;\n      var node = link.getNode();\n      // when a new link added\n      var onLinkChildAdd = function (l) {\n        _this.emit('change', 'rename', relative(_this._filename, l.getPath()));\n        setTimeout(function () {\n          // 1. watch changes of the new link-node\n          watchLinkNodeChanged(l);\n          // 2. watch changes of the new link-node's children\n          watchLinkChildrenChanged(l);\n        });\n      };\n      // when a new link deleted\n      var onLinkChildDelete = function (l) {\n        // remove the listeners of the children nodes\n        var removeLinkNodeListeners = function (curLink) {\n          var ino = curLink.getNode().ino;\n          var removers = _this._listenerRemovers.get(ino);\n          if (removers) {\n            removers.forEach(function (r) {\n              return r();\n            });\n            _this._listenerRemovers.delete(ino);\n          }\n          Object.values(curLink.children).forEach(function (childLink) {\n            if (childLink) {\n              removeLinkNodeListeners(childLink);\n            }\n          });\n        };\n        removeLinkNodeListeners(l);\n        _this.emit('change', 'rename', relative(_this._filename, l.getPath()));\n      };\n      // children nodes changed\n      Object.entries(link.children).forEach(function (_a) {\n        var name = _a[0],\n          childLink = _a[1];\n        if (childLink && name !== '.' && name !== '..') {\n          watchLinkNodeChanged(childLink);\n        }\n      });\n      // link children add/remove\n      link.on('child:add', onLinkChildAdd);\n      link.on('child:delete', onLinkChildDelete);\n      var removers = (_a = _this._listenerRemovers.get(node.ino)) !== null && _a !== void 0 ? _a : [];\n      removers.push(function () {\n        link.removeListener('child:add', onLinkChildAdd);\n        link.removeListener('child:delete', onLinkChildDelete);\n      });\n      if (recursive) {\n        Object.entries(link.children).forEach(function (_a) {\n          var name = _a[0],\n            childLink = _a[1];\n          if (childLink && name !== '.' && name !== '..') {\n            watchLinkChildrenChanged(childLink);\n          }\n        });\n      }\n    };\n    watchLinkNodeChanged(this._link);\n    watchLinkChildrenChanged(this._link);\n    var parent = this._link.parent;\n    if (parent) {\n      // parent.on('child:add', this._onParentChild);\n      parent.setMaxListeners(parent.getMaxListeners() + 1);\n      parent.on('child:delete', this._onParentChild);\n    }\n    if (persistent) this._persist();\n  };\n  FSWatcher.prototype.close = function () {\n    clearTimeout(this._timer);\n    this._listenerRemovers.forEach(function (removers) {\n      removers.forEach(function (r) {\n        return r();\n      });\n    });\n    this._listenerRemovers.clear();\n    var parent = this._link.parent;\n    if (parent) {\n      // parent.removeListener('child:add', this._onParentChild);\n      parent.removeListener('child:delete', this._onParentChild);\n    }\n  };\n  return FSWatcher;\n}(events_1.EventEmitter);\nexports.FSWatcher = FSWatcher;","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__spreadArray","to","from","pack","arguments","length","i","l","ar","slice","concat","defineProperty","exports","value","FSWatcher","StatWatcher","Volume","toUnixTimestamp","bufferToEncoding","dataToBuffer","dataToStr","pathToSteps","filenameToSteps","pathToFilename","flagsToNumber","FLAGS","pathModule","require","node_1","Stats_1","Dirent_1","buffer_1","setImmediate_1","process_1","setTimeoutUnref_1","stream_1","constants_1","events_1","encoding_1","errors","util","promises_1","resolveCrossPlatform","resolve","O_RDONLY","constants","O_WRONLY","O_RDWR","O_CREAT","O_EXCL","O_TRUNC","O_APPEND","O_SYNC","O_DIRECTORY","F_OK","COPYFILE_EXCL","COPYFILE_FICLONE_FORCE","_a","posix","sep","relative","join","dirname","isWin","default","platform","kMinPoolSpace","ERRSTR","PATH_STR","FD","MODE_INT","CB","UID","GID","LEN","ATIME","MTIME","PREFIX","BUFFER","OFFSET","LENGTH","POSITION","ERRSTR_OPTS","tipeof","ENOENT","EBADF","EINVAL","EPERM","EPROTO","EEXIST","ENOTDIR","EMFILE","EACCES","EISDIR","ENOTEMPTY","ENOSYS","ERR_FS_EISDIR","formatError","errorCode","func","path","path2","pathFormatted","createError","Constructor","Error","error","code","rs","wx","ax","flags","flagsNum","getOptions","defaults","options","opts","assign","encoding","assertEncoding","optsGenerator","validateCallback","callback","optsAndCbGenerator","getOpts","optsDefaults","getDefaultOpts","getDefaultOptsAndCb","readFileOptsDefaults","flag","getReadFileOptions","writeFileDefaults","mode","w","getWriteFileOptions","appendFileDefaults","a","getAppendFileOpts","getAppendFileOptsAndCb","realpathDefaults","getRealpathOptions","getRealpathOptsAndCb","mkdirDefaults","recursive","getMkdirOptions","rmdirDefaults","getRmdirOptions","getRmOpts","getRmOptsAndCb","readdirDefaults","withFileTypes","getReaddirOptions","getReaddirOptsAndCb","statDefaults","bigint","getStatOptions","getStatOptsAndCb","getPathFromURLPosix","url","hostname","pathname","n","third","codePointAt","decodeURIComponent","Buffer","isBuffer","URL","err","pathString","nullCheck","filename","base","cwd","_resolve_1","unixify_1","unixify","fullPath","fullPathSansSlash","substring","split","data","ENCODING_UTF8","toString","Uint8Array","bufferFrom","buffer","indexOf","er","nextTick","_modeToNumber","def","parseInt","modeToNumber","undefined","result","isNaN","isFd","validateFd","fd","time","Date","getTime","isFinite","now","validateUid","uid","validateGid","gid","flattenJSON","nestedJSON","flatJSON","flatten","pathPrefix","node","contentOrNode","joinedPath","keys","props","ino","inodes","releasedInos","fds","releasedFds","maxFiles","openFiles","promisesApi","statWatchers","Node","Link","File","root","createLink","setNode","createNode","self","_super","_ReadStream","FsReadStream","ReadStream","class_1","args","_i","apply","_WriteStream","FsWriteStream","WriteStream","class_2","setChild","getNode","nlink","fromJSON","json","vol","fromNestedJSON","get","enumerable","configurable","parent","name","isDirectory","perm","createChild","deleteLink","link","deleteChild","newInoNumber","releasedFd","pop","newFdNumber","setIsDirectory","deleteNode","del","push","genRndStr","str","Math","random","getLink","steps","walk","getLinkOrThrow","funcName","getResolvedLink","filenameOrSteps","step","getChild","isSymlink","symlink","getResolvedLinkOrThrow","resolveSymlinks","getLinkAsDirOrThrow","getLinkParent","getLinkParentAsDirOrThrow","getFileByFd","getFileByFdOrThrow","file","wrapAsync","method","_this","_toJSON","isEmpty","children","isFile","getName","name_1","child","getPath","getString","dirPath","toJSON","paths","isRelative","links","paths_1","links_1","dir","mkdirpBase","writeFileSync","reset","mountSync","mountpoint","openLink","realLink","canRead","truncate","openFile","modeNum","dirLink","openBase","openSync","fileName","open","closeFile","closeSync","close","openFileOrGetById","id","readBase","offset","position","read","Number","readSync","bytes","readFileBase","isUserFd","userOwnsFd","getBuffer","readFileSync","readFile","writeBase","buf","write","writeSync","c","e","tipa","tipb","tipc","tipd","cb","writeFileBase","written","writeFile","linkBase","filename1","filename2","steps1","link1","steps2","dir2","copyFileBase","src","dest","existsSync","copyFileSync","srcFilename","destFilename","copyFile","linkSync","existingPath","newPath","existingPathFilename","newPathFilename","unlinkBase","unlinkSync","unlink","symlinkBase","targetFilename","pathFilename","pathSteps","makeSymlink","symlinkSync","target","type","realpathBase","strToEncoding","realpathSync","realpath","lstatBase","throwIfNoEntry","build","lstatSync","_b","_c","lstat","_d","statBase","statSync","stat","fstatBase","fstatSync","fstat","renameBase","oldPathFilename","newPathSteps","newPathDirLink","oldLinkParent","renameSync","oldPath","rename","existsBase","exists","accessBase","accessSync","access","appendFileSync","appendFile","readdirBase","list_1","name_2","sort","list","name_3","readdirSync","readdir","readlinkBase","readlinkSync","readlink","fsyncBase","fsyncSync","fsync","fdatasyncBase","fdatasyncSync","fdatasync","ftruncateBase","len","ftruncateSync","ftruncate","truncateBase","truncateSync","futimesBase","atime","mtime","futimesSync","futimes","utimesBase","utimesSync","utimes","mkdirBase","created","mkdirSync","mkdir","mkdirpSync","mkdirp","mkdtempBase","prefix","retry","mkdtempSync","mkdtemp","rmdirBase","rmdirSync","rmdir","rmBase","force","rmSync","rm","fchmodBase","chmod","fchmodSync","fchmod","chmodBase","chmodSync","lchmodBase","lchmodSync","lchmod","fchownBase","chown","fchownSync","fchown","chownBase","chownSync","lchownBase","lchownSync","lchown","watchFile","listener","interval","persistent","watcher","start","addListener","unwatchFile","removeListener","removeAllListeners","listenerCount","stop","createReadStream","createWriteStream","watch","givenOptions","emitStop","emit","onInterval","stats","hasChanged","prev","loop","timeoutRef","setTimeout","mtimeMs","bind","globalThis","global","clearTimeout","EventEmitter","pool","allocNewPool","poolSize","bufferAllocUnsafe","used","inherits","Readable","_vol","highWaterMark","end","autoClose","pos","bytesRead","Infinity","on","destroy","_read","once","destroyed","_readableState","thisPool","toRead","min","onread","_destroy","err2","closed","closeOnOpen","Writable","bytesWritten","setDefaultEncoding","_write","_writev","chunks","size","chunk","_writableState","destroySoon","_filename","_filenameEncoded","_recursive","_encoding","_listenerRemovers","Map","_onParentChild","_getName","_emit","_persist","_timer","_steps","_link","errno","watchLinkNodeChanged","filepath","onNodeChange","removers","set","watchLinkChildrenChanged","onLinkChildAdd","onLinkChildDelete","removeLinkNodeListeners","curLink","forEach","r","delete","values","childLink","entries","setMaxListeners","getMaxListeners","clear"],"sources":["/home/hemanth/react-project/client/node_modules/memfs/lib/volume.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FSWatcher = exports.StatWatcher = exports.Volume = exports.toUnixTimestamp = exports.bufferToEncoding = exports.dataToBuffer = exports.dataToStr = exports.pathToSteps = exports.filenameToSteps = exports.pathToFilename = exports.flagsToNumber = exports.FLAGS = void 0;\nvar pathModule = require(\"path\");\nvar node_1 = require(\"./node\");\nvar Stats_1 = require(\"./Stats\");\nvar Dirent_1 = require(\"./Dirent\");\nvar buffer_1 = require(\"./internal/buffer\");\nvar setImmediate_1 = require(\"./setImmediate\");\nvar process_1 = require(\"./process\");\nvar setTimeoutUnref_1 = require(\"./setTimeoutUnref\");\nvar stream_1 = require(\"stream\");\nvar constants_1 = require(\"./constants\");\nvar events_1 = require(\"events\");\nvar encoding_1 = require(\"./encoding\");\nvar errors = require(\"./internal/errors\");\nvar util = require(\"util\");\nvar promises_1 = require(\"./promises\");\nvar resolveCrossPlatform = pathModule.resolve;\nvar O_RDONLY = constants_1.constants.O_RDONLY, O_WRONLY = constants_1.constants.O_WRONLY, O_RDWR = constants_1.constants.O_RDWR, O_CREAT = constants_1.constants.O_CREAT, O_EXCL = constants_1.constants.O_EXCL, O_TRUNC = constants_1.constants.O_TRUNC, O_APPEND = constants_1.constants.O_APPEND, O_SYNC = constants_1.constants.O_SYNC, O_DIRECTORY = constants_1.constants.O_DIRECTORY, F_OK = constants_1.constants.F_OK, COPYFILE_EXCL = constants_1.constants.COPYFILE_EXCL, COPYFILE_FICLONE_FORCE = constants_1.constants.COPYFILE_FICLONE_FORCE;\nvar _a = pathModule.posix ? pathModule.posix : pathModule, sep = _a.sep, relative = _a.relative, join = _a.join, dirname = _a.dirname;\nvar isWin = process_1.default.platform === 'win32';\nvar kMinPoolSpace = 128;\n// const kMaxLength = require('buffer').kMaxLength;\n// ---------------------------------------- Error messages\n// TODO: Use `internal/errors.js` in the future.\nvar ERRSTR = {\n    PATH_STR: 'path must be a string or Buffer',\n    // FD:             'file descriptor must be a unsigned 32-bit integer',\n    FD: 'fd must be a file descriptor',\n    MODE_INT: 'mode must be an int',\n    CB: 'callback must be a function',\n    UID: 'uid must be an unsigned int',\n    GID: 'gid must be an unsigned int',\n    LEN: 'len must be an integer',\n    ATIME: 'atime must be an integer',\n    MTIME: 'mtime must be an integer',\n    PREFIX: 'filename prefix is required',\n    BUFFER: 'buffer must be an instance of Buffer or StaticBuffer',\n    OFFSET: 'offset must be an integer',\n    LENGTH: 'length must be an integer',\n    POSITION: 'position must be an integer',\n};\nvar ERRSTR_OPTS = function (tipeof) { return \"Expected options to be either an object or a string, but got \".concat(tipeof, \" instead\"); };\n// const ERRSTR_FLAG = flag => `Unknown file open flag: ${flag}`;\nvar ENOENT = 'ENOENT';\nvar EBADF = 'EBADF';\nvar EINVAL = 'EINVAL';\nvar EPERM = 'EPERM';\nvar EPROTO = 'EPROTO';\nvar EEXIST = 'EEXIST';\nvar ENOTDIR = 'ENOTDIR';\nvar EMFILE = 'EMFILE';\nvar EACCES = 'EACCES';\nvar EISDIR = 'EISDIR';\nvar ENOTEMPTY = 'ENOTEMPTY';\nvar ENOSYS = 'ENOSYS';\nvar ERR_FS_EISDIR = 'ERR_FS_EISDIR';\nfunction formatError(errorCode, func, path, path2) {\n    if (func === void 0) { func = ''; }\n    if (path === void 0) { path = ''; }\n    if (path2 === void 0) { path2 = ''; }\n    var pathFormatted = '';\n    if (path)\n        pathFormatted = \" '\".concat(path, \"'\");\n    if (path2)\n        pathFormatted += \" -> '\".concat(path2, \"'\");\n    switch (errorCode) {\n        case ENOENT:\n            return \"ENOENT: no such file or directory, \".concat(func).concat(pathFormatted);\n        case EBADF:\n            return \"EBADF: bad file descriptor, \".concat(func).concat(pathFormatted);\n        case EINVAL:\n            return \"EINVAL: invalid argument, \".concat(func).concat(pathFormatted);\n        case EPERM:\n            return \"EPERM: operation not permitted, \".concat(func).concat(pathFormatted);\n        case EPROTO:\n            return \"EPROTO: protocol error, \".concat(func).concat(pathFormatted);\n        case EEXIST:\n            return \"EEXIST: file already exists, \".concat(func).concat(pathFormatted);\n        case ENOTDIR:\n            return \"ENOTDIR: not a directory, \".concat(func).concat(pathFormatted);\n        case EISDIR:\n            return \"EISDIR: illegal operation on a directory, \".concat(func).concat(pathFormatted);\n        case EACCES:\n            return \"EACCES: permission denied, \".concat(func).concat(pathFormatted);\n        case ENOTEMPTY:\n            return \"ENOTEMPTY: directory not empty, \".concat(func).concat(pathFormatted);\n        case EMFILE:\n            return \"EMFILE: too many open files, \".concat(func).concat(pathFormatted);\n        case ENOSYS:\n            return \"ENOSYS: function not implemented, \".concat(func).concat(pathFormatted);\n        case ERR_FS_EISDIR:\n            return \"[ERR_FS_EISDIR]: Path is a directory: \".concat(func, \" returned EISDIR (is a directory) \").concat(path);\n        default:\n            return \"\".concat(errorCode, \": error occurred, \").concat(func).concat(pathFormatted);\n    }\n}\nfunction createError(errorCode, func, path, path2, Constructor) {\n    if (func === void 0) { func = ''; }\n    if (path === void 0) { path = ''; }\n    if (path2 === void 0) { path2 = ''; }\n    if (Constructor === void 0) { Constructor = Error; }\n    var error = new Constructor(formatError(errorCode, func, path, path2));\n    error.code = errorCode;\n    if (path) {\n        error.path = path;\n    }\n    return error;\n}\n// ---------------------------------------- Flags\n// List of file `flags` as defined by Node.\nvar FLAGS;\n(function (FLAGS) {\n    // Open file for reading. An exception occurs if the file does not exist.\n    FLAGS[FLAGS[\"r\"] = O_RDONLY] = \"r\";\n    // Open file for reading and writing. An exception occurs if the file does not exist.\n    FLAGS[FLAGS[\"r+\"] = O_RDWR] = \"r+\";\n    // Open file for reading in synchronous mode. Instructs the operating system to bypass the local file system cache.\n    FLAGS[FLAGS[\"rs\"] = O_RDONLY | O_SYNC] = \"rs\";\n    FLAGS[FLAGS[\"sr\"] = FLAGS.rs] = \"sr\";\n    // Open file for reading and writing, telling the OS to open it synchronously. See notes for 'rs' about using this with caution.\n    FLAGS[FLAGS[\"rs+\"] = O_RDWR | O_SYNC] = \"rs+\";\n    FLAGS[FLAGS[\"sr+\"] = FLAGS['rs+']] = \"sr+\";\n    // Open file for writing. The file is created (if it does not exist) or truncated (if it exists).\n    FLAGS[FLAGS[\"w\"] = O_WRONLY | O_CREAT | O_TRUNC] = \"w\";\n    // Like 'w' but fails if path exists.\n    FLAGS[FLAGS[\"wx\"] = O_WRONLY | O_CREAT | O_TRUNC | O_EXCL] = \"wx\";\n    FLAGS[FLAGS[\"xw\"] = FLAGS.wx] = \"xw\";\n    // Open file for reading and writing. The file is created (if it does not exist) or truncated (if it exists).\n    FLAGS[FLAGS[\"w+\"] = O_RDWR | O_CREAT | O_TRUNC] = \"w+\";\n    // Like 'w+' but fails if path exists.\n    FLAGS[FLAGS[\"wx+\"] = O_RDWR | O_CREAT | O_TRUNC | O_EXCL] = \"wx+\";\n    FLAGS[FLAGS[\"xw+\"] = FLAGS['wx+']] = \"xw+\";\n    // Open file for appending. The file is created if it does not exist.\n    FLAGS[FLAGS[\"a\"] = O_WRONLY | O_APPEND | O_CREAT] = \"a\";\n    // Like 'a' but fails if path exists.\n    FLAGS[FLAGS[\"ax\"] = O_WRONLY | O_APPEND | O_CREAT | O_EXCL] = \"ax\";\n    FLAGS[FLAGS[\"xa\"] = FLAGS.ax] = \"xa\";\n    // Open file for reading and appending. The file is created if it does not exist.\n    FLAGS[FLAGS[\"a+\"] = O_RDWR | O_APPEND | O_CREAT] = \"a+\";\n    // Like 'a+' but fails if path exists.\n    FLAGS[FLAGS[\"ax+\"] = O_RDWR | O_APPEND | O_CREAT | O_EXCL] = \"ax+\";\n    FLAGS[FLAGS[\"xa+\"] = FLAGS['ax+']] = \"xa+\";\n})(FLAGS = exports.FLAGS || (exports.FLAGS = {}));\nfunction flagsToNumber(flags) {\n    if (typeof flags === 'number')\n        return flags;\n    if (typeof flags === 'string') {\n        var flagsNum = FLAGS[flags];\n        if (typeof flagsNum !== 'undefined')\n            return flagsNum;\n    }\n    // throw new TypeError(formatError(ERRSTR_FLAG(flags)));\n    throw new errors.TypeError('ERR_INVALID_OPT_VALUE', 'flags', flags);\n}\nexports.flagsToNumber = flagsToNumber;\n// ---------------------------------------- Options\nfunction getOptions(defaults, options) {\n    var opts;\n    if (!options)\n        return defaults;\n    else {\n        var tipeof = typeof options;\n        switch (tipeof) {\n            case 'string':\n                opts = Object.assign({}, defaults, { encoding: options });\n                break;\n            case 'object':\n                opts = Object.assign({}, defaults, options);\n                break;\n            default:\n                throw TypeError(ERRSTR_OPTS(tipeof));\n        }\n    }\n    if (opts.encoding !== 'buffer')\n        (0, encoding_1.assertEncoding)(opts.encoding);\n    return opts;\n}\nfunction optsGenerator(defaults) {\n    return function (options) { return getOptions(defaults, options); };\n}\nfunction validateCallback(callback) {\n    if (typeof callback !== 'function')\n        throw TypeError(ERRSTR.CB);\n    return callback;\n}\nfunction optsAndCbGenerator(getOpts) {\n    return function (options, callback) {\n        return typeof options === 'function' ? [getOpts(), options] : [getOpts(options), validateCallback(callback)];\n    };\n}\nvar optsDefaults = {\n    encoding: 'utf8',\n};\nvar getDefaultOpts = optsGenerator(optsDefaults);\nvar getDefaultOptsAndCb = optsAndCbGenerator(getDefaultOpts);\nvar readFileOptsDefaults = {\n    flag: 'r',\n};\nvar getReadFileOptions = optsGenerator(readFileOptsDefaults);\nvar writeFileDefaults = {\n    encoding: 'utf8',\n    mode: 438 /* MODE.DEFAULT */,\n    flag: FLAGS[FLAGS.w],\n};\nvar getWriteFileOptions = optsGenerator(writeFileDefaults);\nvar appendFileDefaults = {\n    encoding: 'utf8',\n    mode: 438 /* MODE.DEFAULT */,\n    flag: FLAGS[FLAGS.a],\n};\nvar getAppendFileOpts = optsGenerator(appendFileDefaults);\nvar getAppendFileOptsAndCb = optsAndCbGenerator(getAppendFileOpts);\nvar realpathDefaults = optsDefaults;\nvar getRealpathOptions = optsGenerator(realpathDefaults);\nvar getRealpathOptsAndCb = optsAndCbGenerator(getRealpathOptions);\nvar mkdirDefaults = {\n    mode: 511 /* MODE.DIR */,\n    recursive: false,\n};\nvar getMkdirOptions = function (options) {\n    if (typeof options === 'number')\n        return Object.assign({}, mkdirDefaults, { mode: options });\n    return Object.assign({}, mkdirDefaults, options);\n};\nvar rmdirDefaults = {\n    recursive: false,\n};\nvar getRmdirOptions = function (options) {\n    return Object.assign({}, rmdirDefaults, options);\n};\nvar getRmOpts = optsGenerator(optsDefaults);\nvar getRmOptsAndCb = optsAndCbGenerator(getRmOpts);\nvar readdirDefaults = {\n    encoding: 'utf8',\n    withFileTypes: false,\n};\nvar getReaddirOptions = optsGenerator(readdirDefaults);\nvar getReaddirOptsAndCb = optsAndCbGenerator(getReaddirOptions);\nvar statDefaults = {\n    bigint: false,\n};\nvar getStatOptions = function (options) {\n    if (options === void 0) { options = {}; }\n    return Object.assign({}, statDefaults, options);\n};\nvar getStatOptsAndCb = function (options, callback) {\n    return typeof options === 'function' ? [getStatOptions(), options] : [getStatOptions(options), validateCallback(callback)];\n};\n// ---------------------------------------- Utility functions\nfunction getPathFromURLPosix(url) {\n    if (url.hostname !== '') {\n        throw new errors.TypeError('ERR_INVALID_FILE_URL_HOST', process_1.default.platform);\n    }\n    var pathname = url.pathname;\n    for (var n = 0; n < pathname.length; n++) {\n        if (pathname[n] === '%') {\n            var third = pathname.codePointAt(n + 2) | 0x20;\n            if (pathname[n + 1] === '2' && third === 102) {\n                throw new errors.TypeError('ERR_INVALID_FILE_URL_PATH', 'must not include encoded / characters');\n            }\n        }\n    }\n    return decodeURIComponent(pathname);\n}\nfunction pathToFilename(path) {\n    if (typeof path !== 'string' && !buffer_1.Buffer.isBuffer(path)) {\n        try {\n            if (!(path instanceof require('url').URL))\n                throw new TypeError(ERRSTR.PATH_STR);\n        }\n        catch (err) {\n            throw new TypeError(ERRSTR.PATH_STR);\n        }\n        path = getPathFromURLPosix(path);\n    }\n    var pathString = String(path);\n    nullCheck(pathString);\n    // return slash(pathString);\n    return pathString;\n}\nexports.pathToFilename = pathToFilename;\nvar resolve = function (filename, base) {\n    if (base === void 0) { base = process_1.default.cwd(); }\n    return resolveCrossPlatform(base, filename);\n};\nif (isWin) {\n    var _resolve_1 = resolve;\n    var unixify_1 = require('fs-monkey/lib/correctPath').unixify;\n    resolve = function (filename, base) { return unixify_1(_resolve_1(filename, base)); };\n}\nfunction filenameToSteps(filename, base) {\n    var fullPath = resolve(filename, base);\n    var fullPathSansSlash = fullPath.substring(1);\n    if (!fullPathSansSlash)\n        return [];\n    return fullPathSansSlash.split(sep);\n}\nexports.filenameToSteps = filenameToSteps;\nfunction pathToSteps(path) {\n    return filenameToSteps(pathToFilename(path));\n}\nexports.pathToSteps = pathToSteps;\nfunction dataToStr(data, encoding) {\n    if (encoding === void 0) { encoding = encoding_1.ENCODING_UTF8; }\n    if (buffer_1.Buffer.isBuffer(data))\n        return data.toString(encoding);\n    else if (data instanceof Uint8Array)\n        return (0, buffer_1.bufferFrom)(data).toString(encoding);\n    else\n        return String(data);\n}\nexports.dataToStr = dataToStr;\nfunction dataToBuffer(data, encoding) {\n    if (encoding === void 0) { encoding = encoding_1.ENCODING_UTF8; }\n    if (buffer_1.Buffer.isBuffer(data))\n        return data;\n    else if (data instanceof Uint8Array)\n        return (0, buffer_1.bufferFrom)(data);\n    else\n        return (0, buffer_1.bufferFrom)(String(data), encoding);\n}\nexports.dataToBuffer = dataToBuffer;\nfunction bufferToEncoding(buffer, encoding) {\n    if (!encoding || encoding === 'buffer')\n        return buffer;\n    else\n        return buffer.toString(encoding);\n}\nexports.bufferToEncoding = bufferToEncoding;\nfunction nullCheck(path, callback) {\n    if (('' + path).indexOf('\\u0000') !== -1) {\n        var er = new Error('Path must be a string without null bytes');\n        er.code = ENOENT;\n        if (typeof callback !== 'function')\n            throw er;\n        process_1.default.nextTick(callback, er);\n        return false;\n    }\n    return true;\n}\nfunction _modeToNumber(mode, def) {\n    if (typeof mode === 'number')\n        return mode;\n    if (typeof mode === 'string')\n        return parseInt(mode, 8);\n    if (def)\n        return modeToNumber(def);\n    return undefined;\n}\nfunction modeToNumber(mode, def) {\n    var result = _modeToNumber(mode, def);\n    if (typeof result !== 'number' || isNaN(result))\n        throw new TypeError(ERRSTR.MODE_INT);\n    return result;\n}\nfunction isFd(path) {\n    return path >>> 0 === path;\n}\nfunction validateFd(fd) {\n    if (!isFd(fd))\n        throw TypeError(ERRSTR.FD);\n}\n// converts Date or number to a fractional UNIX timestamp\nfunction toUnixTimestamp(time) {\n    // tslint:disable-next-line triple-equals\n    if (typeof time === 'string' && +time == time) {\n        return +time;\n    }\n    if (time instanceof Date) {\n        return time.getTime() / 1000;\n    }\n    if (isFinite(time)) {\n        if (time < 0) {\n            return Date.now() / 1000;\n        }\n        return time;\n    }\n    throw new Error('Cannot parse time: ' + time);\n}\nexports.toUnixTimestamp = toUnixTimestamp;\nfunction validateUid(uid) {\n    if (typeof uid !== 'number')\n        throw TypeError(ERRSTR.UID);\n}\nfunction validateGid(gid) {\n    if (typeof gid !== 'number')\n        throw TypeError(ERRSTR.GID);\n}\nfunction flattenJSON(nestedJSON) {\n    var flatJSON = {};\n    function flatten(pathPrefix, node) {\n        for (var path in node) {\n            var contentOrNode = node[path];\n            var joinedPath = join(pathPrefix, path);\n            if (typeof contentOrNode === 'string') {\n                flatJSON[joinedPath] = contentOrNode;\n            }\n            else if (typeof contentOrNode === 'object' && contentOrNode !== null && Object.keys(contentOrNode).length > 0) {\n                // empty directories need an explicit entry and therefore get handled in `else`, non-empty ones are implicitly considered\n                flatten(joinedPath, contentOrNode);\n            }\n            else {\n                // without this branch null, empty-object or non-object entries would not be handled in the same way\n                // by both fromJSON() and fromNestedJSON()\n                flatJSON[joinedPath] = null;\n            }\n        }\n    }\n    flatten('', nestedJSON);\n    return flatJSON;\n}\n/**\n * `Volume` represents a file system.\n */\nvar Volume = /** @class */ (function () {\n    function Volume(props) {\n        if (props === void 0) { props = {}; }\n        // I-node number counter.\n        this.ino = 0;\n        // A mapping for i-node numbers to i-nodes (`Node`);\n        this.inodes = {};\n        // List of released i-node numbers, for reuse.\n        this.releasedInos = [];\n        // A mapping for file descriptors to `File`s.\n        this.fds = {};\n        // A list of reusable (opened and closed) file descriptors, that should be\n        // used first before creating a new file descriptor.\n        this.releasedFds = [];\n        // Max number of open files.\n        this.maxFiles = 10000;\n        // Current number of open files.\n        this.openFiles = 0;\n        this.promisesApi = (0, promises_1.default)(this);\n        this.statWatchers = {};\n        this.props = Object.assign({ Node: node_1.Node, Link: node_1.Link, File: node_1.File }, props);\n        var root = this.createLink();\n        root.setNode(this.createNode(true));\n        var self = this; // tslint:disable-line no-this-assignment\n        this.StatWatcher = /** @class */ (function (_super) {\n            __extends(StatWatcher, _super);\n            function StatWatcher() {\n                return _super.call(this, self) || this;\n            }\n            return StatWatcher;\n        }(StatWatcher));\n        var _ReadStream = FsReadStream;\n        this.ReadStream = /** @class */ (function (_super) {\n            __extends(class_1, _super);\n            function class_1() {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return _super.apply(this, __spreadArray([self], args, false)) || this;\n            }\n            return class_1;\n        }(_ReadStream));\n        var _WriteStream = FsWriteStream;\n        this.WriteStream = /** @class */ (function (_super) {\n            __extends(class_2, _super);\n            function class_2() {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return _super.apply(this, __spreadArray([self], args, false)) || this;\n            }\n            return class_2;\n        }(_WriteStream));\n        this.FSWatcher = /** @class */ (function (_super) {\n            __extends(FSWatcher, _super);\n            function FSWatcher() {\n                return _super.call(this, self) || this;\n            }\n            return FSWatcher;\n        }(FSWatcher));\n        root.setChild('.', root);\n        root.getNode().nlink++;\n        root.setChild('..', root);\n        root.getNode().nlink++;\n        this.root = root;\n    }\n    Volume.fromJSON = function (json, cwd) {\n        var vol = new Volume();\n        vol.fromJSON(json, cwd);\n        return vol;\n    };\n    Volume.fromNestedJSON = function (json, cwd) {\n        var vol = new Volume();\n        vol.fromNestedJSON(json, cwd);\n        return vol;\n    };\n    Object.defineProperty(Volume.prototype, \"promises\", {\n        get: function () {\n            if (this.promisesApi === null)\n                throw new Error('Promise is not supported in this environment.');\n            return this.promisesApi;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Volume.prototype.createLink = function (parent, name, isDirectory, perm) {\n        if (isDirectory === void 0) { isDirectory = false; }\n        if (!parent) {\n            return new this.props.Link(this, null, '');\n        }\n        if (!name) {\n            throw new Error('createLink: name cannot be empty');\n        }\n        return parent.createChild(name, this.createNode(isDirectory, perm));\n    };\n    Volume.prototype.deleteLink = function (link) {\n        var parent = link.parent;\n        if (parent) {\n            parent.deleteChild(link);\n            return true;\n        }\n        return false;\n    };\n    Volume.prototype.newInoNumber = function () {\n        var releasedFd = this.releasedInos.pop();\n        if (releasedFd)\n            return releasedFd;\n        else {\n            this.ino = (this.ino + 1) % 0xffffffff;\n            return this.ino;\n        }\n    };\n    Volume.prototype.newFdNumber = function () {\n        var releasedFd = this.releasedFds.pop();\n        return typeof releasedFd === 'number' ? releasedFd : Volume.fd--;\n    };\n    Volume.prototype.createNode = function (isDirectory, perm) {\n        if (isDirectory === void 0) { isDirectory = false; }\n        var node = new this.props.Node(this.newInoNumber(), perm);\n        if (isDirectory)\n            node.setIsDirectory();\n        this.inodes[node.ino] = node;\n        return node;\n    };\n    Volume.prototype.getNode = function (ino) {\n        return this.inodes[ino];\n    };\n    Volume.prototype.deleteNode = function (node) {\n        node.del();\n        delete this.inodes[node.ino];\n        this.releasedInos.push(node.ino);\n    };\n    // Generates 6 character long random string, used by `mkdtemp`.\n    Volume.prototype.genRndStr = function () {\n        var str = (Math.random() + 1).toString(36).substring(2, 8);\n        if (str.length === 6)\n            return str;\n        else\n            return this.genRndStr();\n    };\n    // Returns a `Link` (hard link) referenced by path \"split\" into steps.\n    Volume.prototype.getLink = function (steps) {\n        return this.root.walk(steps);\n    };\n    // Just link `getLink`, but throws a correct user error, if link to found.\n    Volume.prototype.getLinkOrThrow = function (filename, funcName) {\n        var steps = filenameToSteps(filename);\n        var link = this.getLink(steps);\n        if (!link)\n            throw createError(ENOENT, funcName, filename);\n        return link;\n    };\n    // Just like `getLink`, but also dereference/resolves symbolic links.\n    Volume.prototype.getResolvedLink = function (filenameOrSteps) {\n        var steps = typeof filenameOrSteps === 'string' ? filenameToSteps(filenameOrSteps) : filenameOrSteps;\n        var link = this.root;\n        var i = 0;\n        while (i < steps.length) {\n            var step = steps[i];\n            link = link.getChild(step);\n            if (!link)\n                return null;\n            var node = link.getNode();\n            if (node.isSymlink()) {\n                steps = node.symlink.concat(steps.slice(i + 1));\n                link = this.root;\n                i = 0;\n                continue;\n            }\n            i++;\n        }\n        return link;\n    };\n    // Just like `getLinkOrThrow`, but also dereference/resolves symbolic links.\n    Volume.prototype.getResolvedLinkOrThrow = function (filename, funcName) {\n        var link = this.getResolvedLink(filename);\n        if (!link)\n            throw createError(ENOENT, funcName, filename);\n        return link;\n    };\n    Volume.prototype.resolveSymlinks = function (link) {\n        // let node: Node = link.getNode();\n        // while(link && node.isSymlink()) {\n        //     link = this.getLink(node.symlink);\n        //     if(!link) return null;\n        //     node = link.getNode();\n        // }\n        // return link;\n        return this.getResolvedLink(link.steps.slice(1));\n    };\n    // Just like `getLinkOrThrow`, but also verifies that the link is a directory.\n    Volume.prototype.getLinkAsDirOrThrow = function (filename, funcName) {\n        var link = this.getLinkOrThrow(filename, funcName);\n        if (!link.getNode().isDirectory())\n            throw createError(ENOTDIR, funcName, filename);\n        return link;\n    };\n    // Get the immediate parent directory of the link.\n    Volume.prototype.getLinkParent = function (steps) {\n        return this.root.walk(steps, steps.length - 1);\n    };\n    Volume.prototype.getLinkParentAsDirOrThrow = function (filenameOrSteps, funcName) {\n        var steps = filenameOrSteps instanceof Array ? filenameOrSteps : filenameToSteps(filenameOrSteps);\n        var link = this.getLinkParent(steps);\n        if (!link)\n            throw createError(ENOENT, funcName, sep + steps.join(sep));\n        if (!link.getNode().isDirectory())\n            throw createError(ENOTDIR, funcName, sep + steps.join(sep));\n        return link;\n    };\n    Volume.prototype.getFileByFd = function (fd) {\n        return this.fds[String(fd)];\n    };\n    Volume.prototype.getFileByFdOrThrow = function (fd, funcName) {\n        if (!isFd(fd))\n            throw TypeError(ERRSTR.FD);\n        var file = this.getFileByFd(fd);\n        if (!file)\n            throw createError(EBADF, funcName);\n        return file;\n    };\n    /**\n     * @todo This is not used anymore. Remove.\n     */\n    /*\n    private getNodeByIdOrCreate(id: TFileId, flags: number, perm: number): Node {\n      if (typeof id === 'number') {\n        const file = this.getFileByFd(id);\n        if (!file) throw Error('File nto found');\n        return file.node;\n      } else {\n        const steps = pathToSteps(id as PathLike);\n        let link = this.getLink(steps);\n        if (link) return link.getNode();\n  \n        // Try creating a node if not found.\n        if (flags & O_CREAT) {\n          const dirLink = this.getLinkParent(steps);\n          if (dirLink) {\n            const name = steps[steps.length - 1];\n            link = this.createLink(dirLink, name, false, perm);\n            return link.getNode();\n          }\n        }\n  \n        throw createError(ENOENT, 'getNodeByIdOrCreate', pathToFilename(id));\n      }\n    }\n    */\n    Volume.prototype.wrapAsync = function (method, args, callback) {\n        var _this = this;\n        validateCallback(callback);\n        (0, setImmediate_1.default)(function () {\n            var result;\n            try {\n                result = method.apply(_this, args);\n            }\n            catch (err) {\n                callback(err);\n                return;\n            }\n            callback(null, result);\n        });\n    };\n    Volume.prototype._toJSON = function (link, json, path) {\n        var _a;\n        if (link === void 0) { link = this.root; }\n        if (json === void 0) { json = {}; }\n        var isEmpty = true;\n        var children = link.children;\n        if (link.getNode().isFile()) {\n            children = (_a = {}, _a[link.getName()] = link.parent.getChild(link.getName()), _a);\n            link = link.parent;\n        }\n        for (var name_1 in children) {\n            if (name_1 === '.' || name_1 === '..') {\n                continue;\n            }\n            isEmpty = false;\n            var child = link.getChild(name_1);\n            if (!child) {\n                throw new Error('_toJSON: unexpected undefined');\n            }\n            var node = child.getNode();\n            if (node.isFile()) {\n                var filename = child.getPath();\n                if (path)\n                    filename = relative(path, filename);\n                json[filename] = node.getString();\n            }\n            else if (node.isDirectory()) {\n                this._toJSON(child, json, path);\n            }\n        }\n        var dirPath = link.getPath();\n        if (path)\n            dirPath = relative(path, dirPath);\n        if (dirPath && isEmpty) {\n            json[dirPath] = null;\n        }\n        return json;\n    };\n    Volume.prototype.toJSON = function (paths, json, isRelative) {\n        if (json === void 0) { json = {}; }\n        if (isRelative === void 0) { isRelative = false; }\n        var links = [];\n        if (paths) {\n            if (!(paths instanceof Array))\n                paths = [paths];\n            for (var _i = 0, paths_1 = paths; _i < paths_1.length; _i++) {\n                var path = paths_1[_i];\n                var filename = pathToFilename(path);\n                var link = this.getResolvedLink(filename);\n                if (!link)\n                    continue;\n                links.push(link);\n            }\n        }\n        else {\n            links.push(this.root);\n        }\n        if (!links.length)\n            return json;\n        for (var _a = 0, links_1 = links; _a < links_1.length; _a++) {\n            var link = links_1[_a];\n            this._toJSON(link, json, isRelative ? link.getPath() : '');\n        }\n        return json;\n    };\n    Volume.prototype.fromJSON = function (json, cwd) {\n        if (cwd === void 0) { cwd = process_1.default.cwd(); }\n        for (var filename in json) {\n            var data = json[filename];\n            filename = resolve(filename, cwd);\n            if (typeof data === 'string') {\n                var dir = dirname(filename);\n                this.mkdirpBase(dir, 511 /* MODE.DIR */);\n                this.writeFileSync(filename, data);\n            }\n            else {\n                this.mkdirpBase(filename, 511 /* MODE.DIR */);\n            }\n        }\n    };\n    Volume.prototype.fromNestedJSON = function (json, cwd) {\n        this.fromJSON(flattenJSON(json), cwd);\n    };\n    Volume.prototype.reset = function () {\n        this.ino = 0;\n        this.inodes = {};\n        this.releasedInos = [];\n        this.fds = {};\n        this.releasedFds = [];\n        this.openFiles = 0;\n        this.root = this.createLink();\n        this.root.setNode(this.createNode(true));\n    };\n    // Legacy interface\n    Volume.prototype.mountSync = function (mountpoint, json) {\n        this.fromJSON(json, mountpoint);\n    };\n    Volume.prototype.openLink = function (link, flagsNum, resolveSymlinks) {\n        if (resolveSymlinks === void 0) { resolveSymlinks = true; }\n        if (this.openFiles >= this.maxFiles) {\n            // Too many open files.\n            throw createError(EMFILE, 'open', link.getPath());\n        }\n        // Resolve symlinks.\n        var realLink = link;\n        if (resolveSymlinks)\n            realLink = this.resolveSymlinks(link);\n        if (!realLink)\n            throw createError(ENOENT, 'open', link.getPath());\n        var node = realLink.getNode();\n        // Check whether node is a directory\n        if (node.isDirectory()) {\n            if ((flagsNum & (O_RDONLY | O_RDWR | O_WRONLY)) !== O_RDONLY)\n                throw createError(EISDIR, 'open', link.getPath());\n        }\n        else {\n            if (flagsNum & O_DIRECTORY)\n                throw createError(ENOTDIR, 'open', link.getPath());\n        }\n        // Check node permissions\n        if (!(flagsNum & O_WRONLY)) {\n            if (!node.canRead()) {\n                throw createError(EACCES, 'open', link.getPath());\n            }\n        }\n        if (flagsNum & O_RDWR) {\n        }\n        var file = new this.props.File(link, node, flagsNum, this.newFdNumber());\n        this.fds[file.fd] = file;\n        this.openFiles++;\n        if (flagsNum & O_TRUNC)\n            file.truncate();\n        return file;\n    };\n    Volume.prototype.openFile = function (filename, flagsNum, modeNum, resolveSymlinks) {\n        if (resolveSymlinks === void 0) { resolveSymlinks = true; }\n        var steps = filenameToSteps(filename);\n        var link = resolveSymlinks ? this.getResolvedLink(steps) : this.getLink(steps);\n        if (link && flagsNum & O_EXCL)\n            throw createError(EEXIST, 'open', filename);\n        // Try creating a new file, if it does not exist.\n        if (!link && flagsNum & O_CREAT) {\n            // const dirLink: Link = this.getLinkParent(steps);\n            var dirLink = this.getResolvedLink(steps.slice(0, steps.length - 1));\n            // if(!dirLink) throw createError(ENOENT, 'open', filename);\n            if (!dirLink)\n                throw createError(ENOENT, 'open', sep + steps.join(sep));\n            if (flagsNum & O_CREAT && typeof modeNum === 'number') {\n                link = this.createLink(dirLink, steps[steps.length - 1], false, modeNum);\n            }\n        }\n        if (link)\n            return this.openLink(link, flagsNum, resolveSymlinks);\n        throw createError(ENOENT, 'open', filename);\n    };\n    Volume.prototype.openBase = function (filename, flagsNum, modeNum, resolveSymlinks) {\n        if (resolveSymlinks === void 0) { resolveSymlinks = true; }\n        var file = this.openFile(filename, flagsNum, modeNum, resolveSymlinks);\n        if (!file)\n            throw createError(ENOENT, 'open', filename);\n        return file.fd;\n    };\n    Volume.prototype.openSync = function (path, flags, mode) {\n        if (mode === void 0) { mode = 438 /* MODE.DEFAULT */; }\n        // Validate (1) mode; (2) path; (3) flags - in that order.\n        var modeNum = modeToNumber(mode);\n        var fileName = pathToFilename(path);\n        var flagsNum = flagsToNumber(flags);\n        return this.openBase(fileName, flagsNum, modeNum);\n    };\n    Volume.prototype.open = function (path, flags, a, b) {\n        var mode = a;\n        var callback = b;\n        if (typeof a === 'function') {\n            mode = 438 /* MODE.DEFAULT */;\n            callback = a;\n        }\n        mode = mode || 438 /* MODE.DEFAULT */;\n        var modeNum = modeToNumber(mode);\n        var fileName = pathToFilename(path);\n        var flagsNum = flagsToNumber(flags);\n        this.wrapAsync(this.openBase, [fileName, flagsNum, modeNum], callback);\n    };\n    Volume.prototype.closeFile = function (file) {\n        if (!this.fds[file.fd])\n            return;\n        this.openFiles--;\n        delete this.fds[file.fd];\n        this.releasedFds.push(file.fd);\n    };\n    Volume.prototype.closeSync = function (fd) {\n        validateFd(fd);\n        var file = this.getFileByFdOrThrow(fd, 'close');\n        this.closeFile(file);\n    };\n    Volume.prototype.close = function (fd, callback) {\n        validateFd(fd);\n        this.wrapAsync(this.closeSync, [fd], callback);\n    };\n    Volume.prototype.openFileOrGetById = function (id, flagsNum, modeNum) {\n        if (typeof id === 'number') {\n            var file = this.fds[id];\n            if (!file)\n                throw createError(ENOENT);\n            return file;\n        }\n        else {\n            return this.openFile(pathToFilename(id), flagsNum, modeNum);\n        }\n    };\n    Volume.prototype.readBase = function (fd, buffer, offset, length, position) {\n        var file = this.getFileByFdOrThrow(fd);\n        return file.read(buffer, Number(offset), Number(length), position);\n    };\n    Volume.prototype.readSync = function (fd, buffer, offset, length, position) {\n        validateFd(fd);\n        return this.readBase(fd, buffer, offset, length, position);\n    };\n    Volume.prototype.read = function (fd, buffer, offset, length, position, callback) {\n        var _this = this;\n        validateCallback(callback);\n        // This `if` branch is from Node.js\n        if (length === 0) {\n            return process_1.default.nextTick(function () {\n                if (callback)\n                    callback(null, 0, buffer);\n            });\n        }\n        (0, setImmediate_1.default)(function () {\n            try {\n                var bytes = _this.readBase(fd, buffer, offset, length, position);\n                callback(null, bytes, buffer);\n            }\n            catch (err) {\n                callback(err);\n            }\n        });\n    };\n    Volume.prototype.readFileBase = function (id, flagsNum, encoding) {\n        var result;\n        var isUserFd = typeof id === 'number';\n        var userOwnsFd = isUserFd && isFd(id);\n        var fd;\n        if (userOwnsFd)\n            fd = id;\n        else {\n            var filename = pathToFilename(id);\n            var steps = filenameToSteps(filename);\n            var link = this.getResolvedLink(steps);\n            if (link) {\n                var node = link.getNode();\n                if (node.isDirectory())\n                    throw createError(EISDIR, 'open', link.getPath());\n            }\n            fd = this.openSync(id, flagsNum);\n        }\n        try {\n            result = bufferToEncoding(this.getFileByFdOrThrow(fd).getBuffer(), encoding);\n        }\n        finally {\n            if (!userOwnsFd) {\n                this.closeSync(fd);\n            }\n        }\n        return result;\n    };\n    Volume.prototype.readFileSync = function (file, options) {\n        var opts = getReadFileOptions(options);\n        var flagsNum = flagsToNumber(opts.flag);\n        return this.readFileBase(file, flagsNum, opts.encoding);\n    };\n    Volume.prototype.readFile = function (id, a, b) {\n        var _a = optsAndCbGenerator(getReadFileOptions)(a, b), opts = _a[0], callback = _a[1];\n        var flagsNum = flagsToNumber(opts.flag);\n        this.wrapAsync(this.readFileBase, [id, flagsNum, opts.encoding], callback);\n    };\n    Volume.prototype.writeBase = function (fd, buf, offset, length, position) {\n        var file = this.getFileByFdOrThrow(fd, 'write');\n        return file.write(buf, offset, length, position);\n    };\n    Volume.prototype.writeSync = function (fd, a, b, c, d) {\n        validateFd(fd);\n        var encoding;\n        var offset;\n        var length;\n        var position;\n        var isBuffer = typeof a !== 'string';\n        if (isBuffer) {\n            offset = (b || 0) | 0;\n            length = c;\n            position = d;\n        }\n        else {\n            position = b;\n            encoding = c;\n        }\n        var buf = dataToBuffer(a, encoding);\n        if (isBuffer) {\n            if (typeof length === 'undefined') {\n                length = buf.length;\n            }\n        }\n        else {\n            offset = 0;\n            length = buf.length;\n        }\n        return this.writeBase(fd, buf, offset, length, position);\n    };\n    Volume.prototype.write = function (fd, a, b, c, d, e) {\n        var _this = this;\n        validateFd(fd);\n        var offset;\n        var length;\n        var position;\n        var encoding;\n        var callback;\n        var tipa = typeof a;\n        var tipb = typeof b;\n        var tipc = typeof c;\n        var tipd = typeof d;\n        if (tipa !== 'string') {\n            if (tipb === 'function') {\n                callback = b;\n            }\n            else if (tipc === 'function') {\n                offset = b | 0;\n                callback = c;\n            }\n            else if (tipd === 'function') {\n                offset = b | 0;\n                length = c;\n                callback = d;\n            }\n            else {\n                offset = b | 0;\n                length = c;\n                position = d;\n                callback = e;\n            }\n        }\n        else {\n            if (tipb === 'function') {\n                callback = b;\n            }\n            else if (tipc === 'function') {\n                position = b;\n                callback = c;\n            }\n            else if (tipd === 'function') {\n                position = b;\n                encoding = c;\n                callback = d;\n            }\n        }\n        var buf = dataToBuffer(a, encoding);\n        if (tipa !== 'string') {\n            if (typeof length === 'undefined')\n                length = buf.length;\n        }\n        else {\n            offset = 0;\n            length = buf.length;\n        }\n        var cb = validateCallback(callback);\n        (0, setImmediate_1.default)(function () {\n            try {\n                var bytes = _this.writeBase(fd, buf, offset, length, position);\n                if (tipa !== 'string') {\n                    cb(null, bytes, buf);\n                }\n                else {\n                    cb(null, bytes, a);\n                }\n            }\n            catch (err) {\n                cb(err);\n            }\n        });\n    };\n    Volume.prototype.writeFileBase = function (id, buf, flagsNum, modeNum) {\n        // console.log('writeFileBase', id, buf, flagsNum, modeNum);\n        // const node = this.getNodeByIdOrCreate(id, flagsNum, modeNum);\n        // node.setBuffer(buf);\n        var isUserFd = typeof id === 'number';\n        var fd;\n        if (isUserFd)\n            fd = id;\n        else {\n            fd = this.openBase(pathToFilename(id), flagsNum, modeNum);\n            // fd = this.openSync(id as PathLike, flagsNum, modeNum);\n        }\n        var offset = 0;\n        var length = buf.length;\n        var position = flagsNum & O_APPEND ? undefined : 0;\n        try {\n            while (length > 0) {\n                var written = this.writeSync(fd, buf, offset, length, position);\n                offset += written;\n                length -= written;\n                if (position !== undefined)\n                    position += written;\n            }\n        }\n        finally {\n            if (!isUserFd)\n                this.closeSync(fd);\n        }\n    };\n    Volume.prototype.writeFileSync = function (id, data, options) {\n        var opts = getWriteFileOptions(options);\n        var flagsNum = flagsToNumber(opts.flag);\n        var modeNum = modeToNumber(opts.mode);\n        var buf = dataToBuffer(data, opts.encoding);\n        this.writeFileBase(id, buf, flagsNum, modeNum);\n    };\n    Volume.prototype.writeFile = function (id, data, a, b) {\n        var options = a;\n        var callback = b;\n        if (typeof a === 'function') {\n            options = writeFileDefaults;\n            callback = a;\n        }\n        var cb = validateCallback(callback);\n        var opts = getWriteFileOptions(options);\n        var flagsNum = flagsToNumber(opts.flag);\n        var modeNum = modeToNumber(opts.mode);\n        var buf = dataToBuffer(data, opts.encoding);\n        this.wrapAsync(this.writeFileBase, [id, buf, flagsNum, modeNum], cb);\n    };\n    Volume.prototype.linkBase = function (filename1, filename2) {\n        var steps1 = filenameToSteps(filename1);\n        var link1 = this.getLink(steps1);\n        if (!link1)\n            throw createError(ENOENT, 'link', filename1, filename2);\n        var steps2 = filenameToSteps(filename2);\n        // Check new link directory exists.\n        var dir2 = this.getLinkParent(steps2);\n        if (!dir2)\n            throw createError(ENOENT, 'link', filename1, filename2);\n        var name = steps2[steps2.length - 1];\n        // Check if new file already exists.\n        if (dir2.getChild(name))\n            throw createError(EEXIST, 'link', filename1, filename2);\n        var node = link1.getNode();\n        node.nlink++;\n        dir2.createChild(name, node);\n    };\n    Volume.prototype.copyFileBase = function (src, dest, flags) {\n        var buf = this.readFileSync(src);\n        if (flags & COPYFILE_EXCL) {\n            if (this.existsSync(dest)) {\n                throw createError(EEXIST, 'copyFile', src, dest);\n            }\n        }\n        if (flags & COPYFILE_FICLONE_FORCE) {\n            throw createError(ENOSYS, 'copyFile', src, dest);\n        }\n        this.writeFileBase(dest, buf, FLAGS.w, 438 /* MODE.DEFAULT */);\n    };\n    Volume.prototype.copyFileSync = function (src, dest, flags) {\n        var srcFilename = pathToFilename(src);\n        var destFilename = pathToFilename(dest);\n        return this.copyFileBase(srcFilename, destFilename, (flags || 0) | 0);\n    };\n    Volume.prototype.copyFile = function (src, dest, a, b) {\n        var srcFilename = pathToFilename(src);\n        var destFilename = pathToFilename(dest);\n        var flags;\n        var callback;\n        if (typeof a === 'function') {\n            flags = 0;\n            callback = a;\n        }\n        else {\n            flags = a;\n            callback = b;\n        }\n        validateCallback(callback);\n        this.wrapAsync(this.copyFileBase, [srcFilename, destFilename, flags], callback);\n    };\n    Volume.prototype.linkSync = function (existingPath, newPath) {\n        var existingPathFilename = pathToFilename(existingPath);\n        var newPathFilename = pathToFilename(newPath);\n        this.linkBase(existingPathFilename, newPathFilename);\n    };\n    Volume.prototype.link = function (existingPath, newPath, callback) {\n        var existingPathFilename = pathToFilename(existingPath);\n        var newPathFilename = pathToFilename(newPath);\n        this.wrapAsync(this.linkBase, [existingPathFilename, newPathFilename], callback);\n    };\n    Volume.prototype.unlinkBase = function (filename) {\n        var steps = filenameToSteps(filename);\n        var link = this.getLink(steps);\n        if (!link)\n            throw createError(ENOENT, 'unlink', filename);\n        // TODO: Check if it is file, dir, other...\n        if (link.length)\n            throw Error('Dir not empty...');\n        this.deleteLink(link);\n        var node = link.getNode();\n        node.nlink--;\n        // When all hard links to i-node are deleted, remove the i-node, too.\n        if (node.nlink <= 0) {\n            this.deleteNode(node);\n        }\n    };\n    Volume.prototype.unlinkSync = function (path) {\n        var filename = pathToFilename(path);\n        this.unlinkBase(filename);\n    };\n    Volume.prototype.unlink = function (path, callback) {\n        var filename = pathToFilename(path);\n        this.wrapAsync(this.unlinkBase, [filename], callback);\n    };\n    Volume.prototype.symlinkBase = function (targetFilename, pathFilename) {\n        var pathSteps = filenameToSteps(pathFilename);\n        // Check if directory exists, where we about to create a symlink.\n        var dirLink = this.getLinkParent(pathSteps);\n        if (!dirLink)\n            throw createError(ENOENT, 'symlink', targetFilename, pathFilename);\n        var name = pathSteps[pathSteps.length - 1];\n        // Check if new file already exists.\n        if (dirLink.getChild(name))\n            throw createError(EEXIST, 'symlink', targetFilename, pathFilename);\n        // Create symlink.\n        var symlink = dirLink.createChild(name);\n        symlink.getNode().makeSymlink(filenameToSteps(targetFilename));\n        return symlink;\n    };\n    // `type` argument works only on Windows.\n    Volume.prototype.symlinkSync = function (target, path, type) {\n        var targetFilename = pathToFilename(target);\n        var pathFilename = pathToFilename(path);\n        this.symlinkBase(targetFilename, pathFilename);\n    };\n    Volume.prototype.symlink = function (target, path, a, b) {\n        var callback = validateCallback(typeof a === 'function' ? a : b);\n        var targetFilename = pathToFilename(target);\n        var pathFilename = pathToFilename(path);\n        this.wrapAsync(this.symlinkBase, [targetFilename, pathFilename], callback);\n    };\n    Volume.prototype.realpathBase = function (filename, encoding) {\n        var steps = filenameToSteps(filename);\n        var realLink = this.getResolvedLink(steps);\n        if (!realLink)\n            throw createError(ENOENT, 'realpath', filename);\n        return (0, encoding_1.strToEncoding)(realLink.getPath() || '/', encoding);\n    };\n    Volume.prototype.realpathSync = function (path, options) {\n        return this.realpathBase(pathToFilename(path), getRealpathOptions(options).encoding);\n    };\n    Volume.prototype.realpath = function (path, a, b) {\n        var _a = getRealpathOptsAndCb(a, b), opts = _a[0], callback = _a[1];\n        var pathFilename = pathToFilename(path);\n        this.wrapAsync(this.realpathBase, [pathFilename, opts.encoding], callback);\n    };\n    Volume.prototype.lstatBase = function (filename, bigint, throwIfNoEntry) {\n        if (bigint === void 0) { bigint = false; }\n        if (throwIfNoEntry === void 0) { throwIfNoEntry = false; }\n        var link = this.getLink(filenameToSteps(filename));\n        if (link) {\n            return Stats_1.default.build(link.getNode(), bigint);\n        }\n        else if (!throwIfNoEntry) {\n            return undefined;\n        }\n        else {\n            throw createError(ENOENT, 'lstat', filename);\n        }\n    };\n    Volume.prototype.lstatSync = function (path, options) {\n        var _a = getStatOptions(options), _b = _a.throwIfNoEntry, throwIfNoEntry = _b === void 0 ? true : _b, _c = _a.bigint, bigint = _c === void 0 ? false : _c;\n        return this.lstatBase(pathToFilename(path), bigint, throwIfNoEntry);\n    };\n    Volume.prototype.lstat = function (path, a, b) {\n        var _a = getStatOptsAndCb(a, b), _b = _a[0], _c = _b.throwIfNoEntry, throwIfNoEntry = _c === void 0 ? true : _c, _d = _b.bigint, bigint = _d === void 0 ? false : _d, callback = _a[1];\n        this.wrapAsync(this.lstatBase, [pathToFilename(path), bigint, throwIfNoEntry], callback);\n    };\n    Volume.prototype.statBase = function (filename, bigint, throwIfNoEntry) {\n        if (bigint === void 0) { bigint = false; }\n        if (throwIfNoEntry === void 0) { throwIfNoEntry = true; }\n        var link = this.getResolvedLink(filenameToSteps(filename));\n        if (link) {\n            return Stats_1.default.build(link.getNode(), bigint);\n        }\n        else if (!throwIfNoEntry) {\n            return undefined;\n        }\n        else {\n            throw createError(ENOENT, 'stat', filename);\n        }\n    };\n    Volume.prototype.statSync = function (path, options) {\n        var _a = getStatOptions(options), _b = _a.bigint, bigint = _b === void 0 ? true : _b, _c = _a.throwIfNoEntry, throwIfNoEntry = _c === void 0 ? true : _c;\n        return this.statBase(pathToFilename(path), bigint, throwIfNoEntry);\n    };\n    Volume.prototype.stat = function (path, a, b) {\n        var _a = getStatOptsAndCb(a, b), _b = _a[0], _c = _b.bigint, bigint = _c === void 0 ? false : _c, _d = _b.throwIfNoEntry, throwIfNoEntry = _d === void 0 ? true : _d, callback = _a[1];\n        this.wrapAsync(this.statBase, [pathToFilename(path), bigint, throwIfNoEntry], callback);\n    };\n    Volume.prototype.fstatBase = function (fd, bigint) {\n        if (bigint === void 0) { bigint = false; }\n        var file = this.getFileByFd(fd);\n        if (!file)\n            throw createError(EBADF, 'fstat');\n        return Stats_1.default.build(file.node, bigint);\n    };\n    Volume.prototype.fstatSync = function (fd, options) {\n        return this.fstatBase(fd, getStatOptions(options).bigint);\n    };\n    Volume.prototype.fstat = function (fd, a, b) {\n        var _a = getStatOptsAndCb(a, b), opts = _a[0], callback = _a[1];\n        this.wrapAsync(this.fstatBase, [fd, opts.bigint], callback);\n    };\n    Volume.prototype.renameBase = function (oldPathFilename, newPathFilename) {\n        var link = this.getLink(filenameToSteps(oldPathFilename));\n        if (!link)\n            throw createError(ENOENT, 'rename', oldPathFilename, newPathFilename);\n        // TODO: Check if it is directory, if non-empty, we cannot move it, right?\n        var newPathSteps = filenameToSteps(newPathFilename);\n        // Check directory exists for the new location.\n        var newPathDirLink = this.getLinkParent(newPathSteps);\n        if (!newPathDirLink)\n            throw createError(ENOENT, 'rename', oldPathFilename, newPathFilename);\n        // TODO: Also treat cases with directories and symbolic links.\n        // TODO: See: http://man7.org/linux/man-pages/man2/rename.2.html\n        // Remove hard link from old folder.\n        var oldLinkParent = link.parent;\n        if (oldLinkParent) {\n            oldLinkParent.deleteChild(link);\n        }\n        // Rename should overwrite the new path, if that exists.\n        var name = newPathSteps[newPathSteps.length - 1];\n        link.name = name;\n        link.steps = __spreadArray(__spreadArray([], newPathDirLink.steps, true), [name], false);\n        newPathDirLink.setChild(link.getName(), link);\n    };\n    Volume.prototype.renameSync = function (oldPath, newPath) {\n        var oldPathFilename = pathToFilename(oldPath);\n        var newPathFilename = pathToFilename(newPath);\n        this.renameBase(oldPathFilename, newPathFilename);\n    };\n    Volume.prototype.rename = function (oldPath, newPath, callback) {\n        var oldPathFilename = pathToFilename(oldPath);\n        var newPathFilename = pathToFilename(newPath);\n        this.wrapAsync(this.renameBase, [oldPathFilename, newPathFilename], callback);\n    };\n    Volume.prototype.existsBase = function (filename) {\n        return !!this.statBase(filename);\n    };\n    Volume.prototype.existsSync = function (path) {\n        try {\n            return this.existsBase(pathToFilename(path));\n        }\n        catch (err) {\n            return false;\n        }\n    };\n    Volume.prototype.exists = function (path, callback) {\n        var _this = this;\n        var filename = pathToFilename(path);\n        if (typeof callback !== 'function')\n            throw Error(ERRSTR.CB);\n        (0, setImmediate_1.default)(function () {\n            try {\n                callback(_this.existsBase(filename));\n            }\n            catch (err) {\n                callback(false);\n            }\n        });\n    };\n    Volume.prototype.accessBase = function (filename, mode) {\n        var link = this.getLinkOrThrow(filename, 'access');\n        // TODO: Verify permissions\n    };\n    Volume.prototype.accessSync = function (path, mode) {\n        if (mode === void 0) { mode = F_OK; }\n        var filename = pathToFilename(path);\n        mode = mode | 0;\n        this.accessBase(filename, mode);\n    };\n    Volume.prototype.access = function (path, a, b) {\n        var mode = F_OK;\n        var callback;\n        if (typeof a !== 'function') {\n            mode = a | 0; // cast to number\n            callback = validateCallback(b);\n        }\n        else {\n            callback = a;\n        }\n        var filename = pathToFilename(path);\n        this.wrapAsync(this.accessBase, [filename, mode], callback);\n    };\n    Volume.prototype.appendFileSync = function (id, data, options) {\n        if (options === void 0) { options = appendFileDefaults; }\n        var opts = getAppendFileOpts(options);\n        // force append behavior when using a supplied file descriptor\n        if (!opts.flag || isFd(id))\n            opts.flag = 'a';\n        this.writeFileSync(id, data, opts);\n    };\n    Volume.prototype.appendFile = function (id, data, a, b) {\n        var _a = getAppendFileOptsAndCb(a, b), opts = _a[0], callback = _a[1];\n        // force append behavior when using a supplied file descriptor\n        if (!opts.flag || isFd(id))\n            opts.flag = 'a';\n        this.writeFile(id, data, opts, callback);\n    };\n    Volume.prototype.readdirBase = function (filename, options) {\n        var steps = filenameToSteps(filename);\n        var link = this.getResolvedLink(steps);\n        if (!link)\n            throw createError(ENOENT, 'readdir', filename);\n        var node = link.getNode();\n        if (!node.isDirectory())\n            throw createError(ENOTDIR, 'scandir', filename);\n        if (options.withFileTypes) {\n            var list_1 = [];\n            for (var name_2 in link.children) {\n                var child = link.getChild(name_2);\n                if (!child || name_2 === '.' || name_2 === '..') {\n                    continue;\n                }\n                list_1.push(Dirent_1.default.build(child, options.encoding));\n            }\n            if (!isWin && options.encoding !== 'buffer')\n                list_1.sort(function (a, b) {\n                    if (a.name < b.name)\n                        return -1;\n                    if (a.name > b.name)\n                        return 1;\n                    return 0;\n                });\n            return list_1;\n        }\n        var list = [];\n        for (var name_3 in link.children) {\n            if (name_3 === '.' || name_3 === '..') {\n                continue;\n            }\n            list.push((0, encoding_1.strToEncoding)(name_3, options.encoding));\n        }\n        if (!isWin && options.encoding !== 'buffer')\n            list.sort();\n        return list;\n    };\n    Volume.prototype.readdirSync = function (path, options) {\n        var opts = getReaddirOptions(options);\n        var filename = pathToFilename(path);\n        return this.readdirBase(filename, opts);\n    };\n    Volume.prototype.readdir = function (path, a, b) {\n        var _a = getReaddirOptsAndCb(a, b), options = _a[0], callback = _a[1];\n        var filename = pathToFilename(path);\n        this.wrapAsync(this.readdirBase, [filename, options], callback);\n    };\n    Volume.prototype.readlinkBase = function (filename, encoding) {\n        var link = this.getLinkOrThrow(filename, 'readlink');\n        var node = link.getNode();\n        if (!node.isSymlink())\n            throw createError(EINVAL, 'readlink', filename);\n        var str = sep + node.symlink.join(sep);\n        return (0, encoding_1.strToEncoding)(str, encoding);\n    };\n    Volume.prototype.readlinkSync = function (path, options) {\n        var opts = getDefaultOpts(options);\n        var filename = pathToFilename(path);\n        return this.readlinkBase(filename, opts.encoding);\n    };\n    Volume.prototype.readlink = function (path, a, b) {\n        var _a = getDefaultOptsAndCb(a, b), opts = _a[0], callback = _a[1];\n        var filename = pathToFilename(path);\n        this.wrapAsync(this.readlinkBase, [filename, opts.encoding], callback);\n    };\n    Volume.prototype.fsyncBase = function (fd) {\n        this.getFileByFdOrThrow(fd, 'fsync');\n    };\n    Volume.prototype.fsyncSync = function (fd) {\n        this.fsyncBase(fd);\n    };\n    Volume.prototype.fsync = function (fd, callback) {\n        this.wrapAsync(this.fsyncBase, [fd], callback);\n    };\n    Volume.prototype.fdatasyncBase = function (fd) {\n        this.getFileByFdOrThrow(fd, 'fdatasync');\n    };\n    Volume.prototype.fdatasyncSync = function (fd) {\n        this.fdatasyncBase(fd);\n    };\n    Volume.prototype.fdatasync = function (fd, callback) {\n        this.wrapAsync(this.fdatasyncBase, [fd], callback);\n    };\n    Volume.prototype.ftruncateBase = function (fd, len) {\n        var file = this.getFileByFdOrThrow(fd, 'ftruncate');\n        file.truncate(len);\n    };\n    Volume.prototype.ftruncateSync = function (fd, len) {\n        this.ftruncateBase(fd, len);\n    };\n    Volume.prototype.ftruncate = function (fd, a, b) {\n        var len = typeof a === 'number' ? a : 0;\n        var callback = validateCallback(typeof a === 'number' ? b : a);\n        this.wrapAsync(this.ftruncateBase, [fd, len], callback);\n    };\n    Volume.prototype.truncateBase = function (path, len) {\n        var fd = this.openSync(path, 'r+');\n        try {\n            this.ftruncateSync(fd, len);\n        }\n        finally {\n            this.closeSync(fd);\n        }\n    };\n    Volume.prototype.truncateSync = function (id, len) {\n        if (isFd(id))\n            return this.ftruncateSync(id, len);\n        this.truncateBase(id, len);\n    };\n    Volume.prototype.truncate = function (id, a, b) {\n        var len = typeof a === 'number' ? a : 0;\n        var callback = validateCallback(typeof a === 'number' ? b : a);\n        if (isFd(id))\n            return this.ftruncate(id, len, callback);\n        this.wrapAsync(this.truncateBase, [id, len], callback);\n    };\n    Volume.prototype.futimesBase = function (fd, atime, mtime) {\n        var file = this.getFileByFdOrThrow(fd, 'futimes');\n        var node = file.node;\n        node.atime = new Date(atime * 1000);\n        node.mtime = new Date(mtime * 1000);\n    };\n    Volume.prototype.futimesSync = function (fd, atime, mtime) {\n        this.futimesBase(fd, toUnixTimestamp(atime), toUnixTimestamp(mtime));\n    };\n    Volume.prototype.futimes = function (fd, atime, mtime, callback) {\n        this.wrapAsync(this.futimesBase, [fd, toUnixTimestamp(atime), toUnixTimestamp(mtime)], callback);\n    };\n    Volume.prototype.utimesBase = function (filename, atime, mtime) {\n        var fd = this.openSync(filename, 'r');\n        try {\n            this.futimesBase(fd, atime, mtime);\n        }\n        finally {\n            this.closeSync(fd);\n        }\n    };\n    Volume.prototype.utimesSync = function (path, atime, mtime) {\n        this.utimesBase(pathToFilename(path), toUnixTimestamp(atime), toUnixTimestamp(mtime));\n    };\n    Volume.prototype.utimes = function (path, atime, mtime, callback) {\n        this.wrapAsync(this.utimesBase, [pathToFilename(path), toUnixTimestamp(atime), toUnixTimestamp(mtime)], callback);\n    };\n    Volume.prototype.mkdirBase = function (filename, modeNum) {\n        var steps = filenameToSteps(filename);\n        // This will throw if user tries to create root dir `fs.mkdirSync('/')`.\n        if (!steps.length) {\n            throw createError(EEXIST, 'mkdir', filename);\n        }\n        var dir = this.getLinkParentAsDirOrThrow(filename, 'mkdir');\n        // Check path already exists.\n        var name = steps[steps.length - 1];\n        if (dir.getChild(name))\n            throw createError(EEXIST, 'mkdir', filename);\n        dir.createChild(name, this.createNode(true, modeNum));\n    };\n    /**\n     * Creates directory tree recursively.\n     * @param filename\n     * @param modeNum\n     */\n    Volume.prototype.mkdirpBase = function (filename, modeNum) {\n        var fullPath = resolve(filename);\n        var fullPathSansSlash = fullPath.substring(1);\n        var steps = !fullPathSansSlash ? [] : fullPathSansSlash.split(sep);\n        var link = this.root;\n        var created = false;\n        for (var i = 0; i < steps.length; i++) {\n            var step = steps[i];\n            if (!link.getNode().isDirectory())\n                throw createError(ENOTDIR, 'mkdir', link.getPath());\n            var child = link.getChild(step);\n            if (child) {\n                if (child.getNode().isDirectory())\n                    link = child;\n                else\n                    throw createError(ENOTDIR, 'mkdir', child.getPath());\n            }\n            else {\n                link = link.createChild(step, this.createNode(true, modeNum));\n                created = true;\n            }\n        }\n        return created ? fullPath : undefined;\n    };\n    Volume.prototype.mkdirSync = function (path, options) {\n        var opts = getMkdirOptions(options);\n        var modeNum = modeToNumber(opts.mode, 511);\n        var filename = pathToFilename(path);\n        if (opts.recursive)\n            return this.mkdirpBase(filename, modeNum);\n        this.mkdirBase(filename, modeNum);\n    };\n    Volume.prototype.mkdir = function (path, a, b) {\n        var opts = getMkdirOptions(a);\n        var callback = validateCallback(typeof a === 'function' ? a : b);\n        var modeNum = modeToNumber(opts.mode, 511);\n        var filename = pathToFilename(path);\n        if (opts.recursive)\n            this.wrapAsync(this.mkdirpBase, [filename, modeNum], callback);\n        else\n            this.wrapAsync(this.mkdirBase, [filename, modeNum], callback);\n    };\n    // legacy interface\n    Volume.prototype.mkdirpSync = function (path, mode) {\n        return this.mkdirSync(path, { mode: mode, recursive: true });\n    };\n    Volume.prototype.mkdirp = function (path, a, b) {\n        var mode = typeof a === 'function' ? undefined : a;\n        var callback = validateCallback(typeof a === 'function' ? a : b);\n        this.mkdir(path, { mode: mode, recursive: true }, callback);\n    };\n    Volume.prototype.mkdtempBase = function (prefix, encoding, retry) {\n        if (retry === void 0) { retry = 5; }\n        var filename = prefix + this.genRndStr();\n        try {\n            this.mkdirBase(filename, 511 /* MODE.DIR */);\n            return (0, encoding_1.strToEncoding)(filename, encoding);\n        }\n        catch (err) {\n            if (err.code === EEXIST) {\n                if (retry > 1)\n                    return this.mkdtempBase(prefix, encoding, retry - 1);\n                else\n                    throw Error('Could not create temp dir.');\n            }\n            else\n                throw err;\n        }\n    };\n    Volume.prototype.mkdtempSync = function (prefix, options) {\n        var encoding = getDefaultOpts(options).encoding;\n        if (!prefix || typeof prefix !== 'string')\n            throw new TypeError('filename prefix is required');\n        nullCheck(prefix);\n        return this.mkdtempBase(prefix, encoding);\n    };\n    Volume.prototype.mkdtemp = function (prefix, a, b) {\n        var _a = getDefaultOptsAndCb(a, b), encoding = _a[0].encoding, callback = _a[1];\n        if (!prefix || typeof prefix !== 'string')\n            throw new TypeError('filename prefix is required');\n        if (!nullCheck(prefix))\n            return;\n        this.wrapAsync(this.mkdtempBase, [prefix, encoding], callback);\n    };\n    Volume.prototype.rmdirBase = function (filename, options) {\n        var opts = getRmdirOptions(options);\n        var link = this.getLinkAsDirOrThrow(filename, 'rmdir');\n        // Check directory is empty.\n        if (link.length && !opts.recursive)\n            throw createError(ENOTEMPTY, 'rmdir', filename);\n        this.deleteLink(link);\n    };\n    Volume.prototype.rmdirSync = function (path, options) {\n        this.rmdirBase(pathToFilename(path), options);\n    };\n    Volume.prototype.rmdir = function (path, a, b) {\n        var opts = getRmdirOptions(a);\n        var callback = validateCallback(typeof a === 'function' ? a : b);\n        this.wrapAsync(this.rmdirBase, [pathToFilename(path), opts], callback);\n    };\n    Volume.prototype.rmBase = function (filename, options) {\n        if (options === void 0) { options = {}; }\n        var link = this.getResolvedLink(filename);\n        if (!link) {\n            // \"stat\" is used to match Node's native error message.\n            if (!options.force)\n                throw createError(ENOENT, 'stat', filename);\n            return;\n        }\n        if (link.getNode().isDirectory()) {\n            if (!options.recursive) {\n                throw createError(ERR_FS_EISDIR, 'rm', filename);\n            }\n        }\n        this.deleteLink(link);\n    };\n    Volume.prototype.rmSync = function (path, options) {\n        this.rmBase(pathToFilename(path), options);\n    };\n    Volume.prototype.rm = function (path, a, b) {\n        var _a = getRmOptsAndCb(a, b), opts = _a[0], callback = _a[1];\n        this.wrapAsync(this.rmBase, [pathToFilename(path), opts], callback);\n    };\n    Volume.prototype.fchmodBase = function (fd, modeNum) {\n        var file = this.getFileByFdOrThrow(fd, 'fchmod');\n        file.chmod(modeNum);\n    };\n    Volume.prototype.fchmodSync = function (fd, mode) {\n        this.fchmodBase(fd, modeToNumber(mode));\n    };\n    Volume.prototype.fchmod = function (fd, mode, callback) {\n        this.wrapAsync(this.fchmodBase, [fd, modeToNumber(mode)], callback);\n    };\n    Volume.prototype.chmodBase = function (filename, modeNum) {\n        var fd = this.openSync(filename, 'r');\n        try {\n            this.fchmodBase(fd, modeNum);\n        }\n        finally {\n            this.closeSync(fd);\n        }\n    };\n    Volume.prototype.chmodSync = function (path, mode) {\n        var modeNum = modeToNumber(mode);\n        var filename = pathToFilename(path);\n        this.chmodBase(filename, modeNum);\n    };\n    Volume.prototype.chmod = function (path, mode, callback) {\n        var modeNum = modeToNumber(mode);\n        var filename = pathToFilename(path);\n        this.wrapAsync(this.chmodBase, [filename, modeNum], callback);\n    };\n    Volume.prototype.lchmodBase = function (filename, modeNum) {\n        var fd = this.openBase(filename, O_RDWR, 0, false);\n        try {\n            this.fchmodBase(fd, modeNum);\n        }\n        finally {\n            this.closeSync(fd);\n        }\n    };\n    Volume.prototype.lchmodSync = function (path, mode) {\n        var modeNum = modeToNumber(mode);\n        var filename = pathToFilename(path);\n        this.lchmodBase(filename, modeNum);\n    };\n    Volume.prototype.lchmod = function (path, mode, callback) {\n        var modeNum = modeToNumber(mode);\n        var filename = pathToFilename(path);\n        this.wrapAsync(this.lchmodBase, [filename, modeNum], callback);\n    };\n    Volume.prototype.fchownBase = function (fd, uid, gid) {\n        this.getFileByFdOrThrow(fd, 'fchown').chown(uid, gid);\n    };\n    Volume.prototype.fchownSync = function (fd, uid, gid) {\n        validateUid(uid);\n        validateGid(gid);\n        this.fchownBase(fd, uid, gid);\n    };\n    Volume.prototype.fchown = function (fd, uid, gid, callback) {\n        validateUid(uid);\n        validateGid(gid);\n        this.wrapAsync(this.fchownBase, [fd, uid, gid], callback);\n    };\n    Volume.prototype.chownBase = function (filename, uid, gid) {\n        var link = this.getResolvedLinkOrThrow(filename, 'chown');\n        var node = link.getNode();\n        node.chown(uid, gid);\n        // if(node.isFile() || node.isSymlink()) {\n        //\n        // } else if(node.isDirectory()) {\n        //\n        // } else {\n        // TODO: What do we do here?\n        // }\n    };\n    Volume.prototype.chownSync = function (path, uid, gid) {\n        validateUid(uid);\n        validateGid(gid);\n        this.chownBase(pathToFilename(path), uid, gid);\n    };\n    Volume.prototype.chown = function (path, uid, gid, callback) {\n        validateUid(uid);\n        validateGid(gid);\n        this.wrapAsync(this.chownBase, [pathToFilename(path), uid, gid], callback);\n    };\n    Volume.prototype.lchownBase = function (filename, uid, gid) {\n        this.getLinkOrThrow(filename, 'lchown').getNode().chown(uid, gid);\n    };\n    Volume.prototype.lchownSync = function (path, uid, gid) {\n        validateUid(uid);\n        validateGid(gid);\n        this.lchownBase(pathToFilename(path), uid, gid);\n    };\n    Volume.prototype.lchown = function (path, uid, gid, callback) {\n        validateUid(uid);\n        validateGid(gid);\n        this.wrapAsync(this.lchownBase, [pathToFilename(path), uid, gid], callback);\n    };\n    Volume.prototype.watchFile = function (path, a, b) {\n        var filename = pathToFilename(path);\n        var options = a;\n        var listener = b;\n        if (typeof options === 'function') {\n            listener = a;\n            options = null;\n        }\n        if (typeof listener !== 'function') {\n            throw Error('\"watchFile()\" requires a listener function');\n        }\n        var interval = 5007;\n        var persistent = true;\n        if (options && typeof options === 'object') {\n            if (typeof options.interval === 'number')\n                interval = options.interval;\n            if (typeof options.persistent === 'boolean')\n                persistent = options.persistent;\n        }\n        var watcher = this.statWatchers[filename];\n        if (!watcher) {\n            watcher = new this.StatWatcher();\n            watcher.start(filename, persistent, interval);\n            this.statWatchers[filename] = watcher;\n        }\n        watcher.addListener('change', listener);\n        return watcher;\n    };\n    Volume.prototype.unwatchFile = function (path, listener) {\n        var filename = pathToFilename(path);\n        var watcher = this.statWatchers[filename];\n        if (!watcher)\n            return;\n        if (typeof listener === 'function') {\n            watcher.removeListener('change', listener);\n        }\n        else {\n            watcher.removeAllListeners('change');\n        }\n        if (watcher.listenerCount('change') === 0) {\n            watcher.stop();\n            delete this.statWatchers[filename];\n        }\n    };\n    Volume.prototype.createReadStream = function (path, options) {\n        return new this.ReadStream(path, options);\n    };\n    Volume.prototype.createWriteStream = function (path, options) {\n        return new this.WriteStream(path, options);\n    };\n    // watch(path: PathLike): FSWatcher;\n    // watch(path: PathLike, options?: IWatchOptions | string): FSWatcher;\n    Volume.prototype.watch = function (path, options, listener) {\n        var filename = pathToFilename(path);\n        var givenOptions = options;\n        if (typeof options === 'function') {\n            listener = options;\n            givenOptions = null;\n        }\n        // tslint:disable-next-line prefer-const\n        var _a = getDefaultOpts(givenOptions), persistent = _a.persistent, recursive = _a.recursive, encoding = _a.encoding;\n        if (persistent === undefined)\n            persistent = true;\n        if (recursive === undefined)\n            recursive = false;\n        var watcher = new this.FSWatcher();\n        watcher.start(filename, persistent, recursive, encoding);\n        if (listener) {\n            watcher.addListener('change', listener);\n        }\n        return watcher;\n    };\n    /**\n     * Global file descriptor counter. UNIX file descriptors start from 0 and go sequentially\n     * up, so here, in order not to conflict with them, we choose some big number and descrease\n     * the file descriptor of every new opened file.\n     * @type {number}\n     * @todo This should not be static, right?\n     */\n    Volume.fd = 0x7fffffff;\n    return Volume;\n}());\nexports.Volume = Volume;\nfunction emitStop(self) {\n    self.emit('stop');\n}\nvar StatWatcher = /** @class */ (function (_super) {\n    __extends(StatWatcher, _super);\n    function StatWatcher(vol) {\n        var _this = _super.call(this) || this;\n        _this.onInterval = function () {\n            try {\n                var stats = _this.vol.statSync(_this.filename);\n                if (_this.hasChanged(stats)) {\n                    _this.emit('change', stats, _this.prev);\n                    _this.prev = stats;\n                }\n            }\n            finally {\n                _this.loop();\n            }\n        };\n        _this.vol = vol;\n        return _this;\n    }\n    StatWatcher.prototype.loop = function () {\n        this.timeoutRef = this.setTimeout(this.onInterval, this.interval);\n    };\n    StatWatcher.prototype.hasChanged = function (stats) {\n        // if(!this.prev) return false;\n        if (stats.mtimeMs > this.prev.mtimeMs)\n            return true;\n        if (stats.nlink !== this.prev.nlink)\n            return true;\n        return false;\n    };\n    StatWatcher.prototype.start = function (path, persistent, interval) {\n        if (persistent === void 0) { persistent = true; }\n        if (interval === void 0) { interval = 5007; }\n        this.filename = pathToFilename(path);\n        this.setTimeout = persistent\n            ? setTimeout.bind(typeof globalThis !== 'undefined' ? globalThis : global)\n            : setTimeoutUnref_1.default;\n        this.interval = interval;\n        this.prev = this.vol.statSync(this.filename);\n        this.loop();\n    };\n    StatWatcher.prototype.stop = function () {\n        clearTimeout(this.timeoutRef);\n        process_1.default.nextTick(emitStop, this);\n    };\n    return StatWatcher;\n}(events_1.EventEmitter));\nexports.StatWatcher = StatWatcher;\nvar pool;\nfunction allocNewPool(poolSize) {\n    pool = (0, buffer_1.bufferAllocUnsafe)(poolSize);\n    pool.used = 0;\n}\nutil.inherits(FsReadStream, stream_1.Readable);\nexports.ReadStream = FsReadStream;\nfunction FsReadStream(vol, path, options) {\n    if (!(this instanceof FsReadStream))\n        return new FsReadStream(vol, path, options);\n    this._vol = vol;\n    // a little bit bigger buffer and water marks by default\n    options = Object.assign({}, getOptions(options, {}));\n    if (options.highWaterMark === undefined)\n        options.highWaterMark = 64 * 1024;\n    stream_1.Readable.call(this, options);\n    this.path = pathToFilename(path);\n    this.fd = options.fd === undefined ? null : options.fd;\n    this.flags = options.flags === undefined ? 'r' : options.flags;\n    this.mode = options.mode === undefined ? 438 : options.mode;\n    this.start = options.start;\n    this.end = options.end;\n    this.autoClose = options.autoClose === undefined ? true : options.autoClose;\n    this.pos = undefined;\n    this.bytesRead = 0;\n    if (this.start !== undefined) {\n        if (typeof this.start !== 'number') {\n            throw new TypeError('\"start\" option must be a Number');\n        }\n        if (this.end === undefined) {\n            this.end = Infinity;\n        }\n        else if (typeof this.end !== 'number') {\n            throw new TypeError('\"end\" option must be a Number');\n        }\n        if (this.start > this.end) {\n            throw new Error('\"start\" option must be <= \"end\" option');\n        }\n        this.pos = this.start;\n    }\n    if (typeof this.fd !== 'number')\n        this.open();\n    this.on('end', function () {\n        if (this.autoClose) {\n            if (this.destroy)\n                this.destroy();\n        }\n    });\n}\nFsReadStream.prototype.open = function () {\n    var self = this; // tslint:disable-line no-this-assignment\n    this._vol.open(this.path, this.flags, this.mode, function (er, fd) {\n        if (er) {\n            if (self.autoClose) {\n                if (self.destroy)\n                    self.destroy();\n            }\n            self.emit('error', er);\n            return;\n        }\n        self.fd = fd;\n        self.emit('open', fd);\n        // start the flow of data.\n        self.read();\n    });\n};\nFsReadStream.prototype._read = function (n) {\n    if (typeof this.fd !== 'number') {\n        return this.once('open', function () {\n            this._read(n);\n        });\n    }\n    if (this.destroyed)\n        return;\n    if (!pool || pool.length - pool.used < kMinPoolSpace) {\n        // discard the old pool.\n        allocNewPool(this._readableState.highWaterMark);\n    }\n    // Grab another reference to the pool in the case that while we're\n    // in the thread pool another read() finishes up the pool, and\n    // allocates a new one.\n    var thisPool = pool;\n    var toRead = Math.min(pool.length - pool.used, n);\n    var start = pool.used;\n    if (this.pos !== undefined)\n        toRead = Math.min(this.end - this.pos + 1, toRead);\n    // already read everything we were supposed to read!\n    // treat as EOF.\n    if (toRead <= 0)\n        return this.push(null);\n    // the actual read.\n    var self = this; // tslint:disable-line no-this-assignment\n    this._vol.read(this.fd, pool, pool.used, toRead, this.pos, onread);\n    // move the pool positions, and internal position for reading.\n    if (this.pos !== undefined)\n        this.pos += toRead;\n    pool.used += toRead;\n    function onread(er, bytesRead) {\n        if (er) {\n            if (self.autoClose && self.destroy) {\n                self.destroy();\n            }\n            self.emit('error', er);\n        }\n        else {\n            var b = null;\n            if (bytesRead > 0) {\n                self.bytesRead += bytesRead;\n                b = thisPool.slice(start, start + bytesRead);\n            }\n            self.push(b);\n        }\n    }\n};\nFsReadStream.prototype._destroy = function (err, cb) {\n    this.close(function (err2) {\n        cb(err || err2);\n    });\n};\nFsReadStream.prototype.close = function (cb) {\n    var _this = this;\n    var _a;\n    if (cb)\n        this.once('close', cb);\n    if (this.closed || typeof this.fd !== 'number') {\n        if (typeof this.fd !== 'number') {\n            this.once('open', closeOnOpen);\n            return;\n        }\n        return process_1.default.nextTick(function () { return _this.emit('close'); });\n    }\n    // Since Node 18, there is only a getter for '.closed'.\n    // The first branch mimics other setters from Readable.\n    // See https://github.com/nodejs/node/blob/v18.0.0/lib/internal/streams/readable.js#L1243\n    if (typeof ((_a = this._readableState) === null || _a === void 0 ? void 0 : _a.closed) === 'boolean') {\n        this._readableState.closed = true;\n    }\n    else {\n        this.closed = true;\n    }\n    this._vol.close(this.fd, function (er) {\n        if (er)\n            _this.emit('error', er);\n        else\n            _this.emit('close');\n    });\n    this.fd = null;\n};\n// needed because as it will be called with arguments\n// that does not match this.close() signature\nfunction closeOnOpen(fd) {\n    this.close();\n}\nutil.inherits(FsWriteStream, stream_1.Writable);\nexports.WriteStream = FsWriteStream;\nfunction FsWriteStream(vol, path, options) {\n    if (!(this instanceof FsWriteStream))\n        return new FsWriteStream(vol, path, options);\n    this._vol = vol;\n    options = Object.assign({}, getOptions(options, {}));\n    stream_1.Writable.call(this, options);\n    this.path = pathToFilename(path);\n    this.fd = options.fd === undefined ? null : options.fd;\n    this.flags = options.flags === undefined ? 'w' : options.flags;\n    this.mode = options.mode === undefined ? 438 : options.mode;\n    this.start = options.start;\n    this.autoClose = options.autoClose === undefined ? true : !!options.autoClose;\n    this.pos = undefined;\n    this.bytesWritten = 0;\n    if (this.start !== undefined) {\n        if (typeof this.start !== 'number') {\n            throw new TypeError('\"start\" option must be a Number');\n        }\n        if (this.start < 0) {\n            throw new Error('\"start\" must be >= zero');\n        }\n        this.pos = this.start;\n    }\n    if (options.encoding)\n        this.setDefaultEncoding(options.encoding);\n    if (typeof this.fd !== 'number')\n        this.open();\n    // dispose on finish.\n    this.once('finish', function () {\n        if (this.autoClose) {\n            this.close();\n        }\n    });\n}\nFsWriteStream.prototype.open = function () {\n    this._vol.open(this.path, this.flags, this.mode, function (er, fd) {\n        if (er) {\n            if (this.autoClose && this.destroy) {\n                this.destroy();\n            }\n            this.emit('error', er);\n            return;\n        }\n        this.fd = fd;\n        this.emit('open', fd);\n    }.bind(this));\n};\nFsWriteStream.prototype._write = function (data, encoding, cb) {\n    if (!(data instanceof buffer_1.Buffer || data instanceof Uint8Array))\n        return this.emit('error', new Error('Invalid data'));\n    if (typeof this.fd !== 'number') {\n        return this.once('open', function () {\n            this._write(data, encoding, cb);\n        });\n    }\n    var self = this; // tslint:disable-line no-this-assignment\n    this._vol.write(this.fd, data, 0, data.length, this.pos, function (er, bytes) {\n        if (er) {\n            if (self.autoClose && self.destroy) {\n                self.destroy();\n            }\n            return cb(er);\n        }\n        self.bytesWritten += bytes;\n        cb();\n    });\n    if (this.pos !== undefined)\n        this.pos += data.length;\n};\nFsWriteStream.prototype._writev = function (data, cb) {\n    if (typeof this.fd !== 'number') {\n        return this.once('open', function () {\n            this._writev(data, cb);\n        });\n    }\n    var self = this; // tslint:disable-line no-this-assignment\n    var len = data.length;\n    var chunks = new Array(len);\n    var size = 0;\n    for (var i = 0; i < len; i++) {\n        var chunk = data[i].chunk;\n        chunks[i] = chunk;\n        size += chunk.length;\n    }\n    var buf = buffer_1.Buffer.concat(chunks);\n    this._vol.write(this.fd, buf, 0, buf.length, this.pos, function (er, bytes) {\n        if (er) {\n            if (self.destroy)\n                self.destroy();\n            return cb(er);\n        }\n        self.bytesWritten += bytes;\n        cb();\n    });\n    if (this.pos !== undefined)\n        this.pos += size;\n};\nFsWriteStream.prototype.close = function (cb) {\n    var _this = this;\n    var _a;\n    if (cb)\n        this.once('close', cb);\n    if (this.closed || typeof this.fd !== 'number') {\n        if (typeof this.fd !== 'number') {\n            this.once('open', closeOnOpen);\n            return;\n        }\n        return process_1.default.nextTick(function () { return _this.emit('close'); });\n    }\n    // Since Node 18, there is only a getter for '.closed'.\n    // The first branch mimics other setters from Writable.\n    // See https://github.com/nodejs/node/blob/v18.0.0/lib/internal/streams/writable.js#L766\n    if (typeof ((_a = this._writableState) === null || _a === void 0 ? void 0 : _a.closed) === 'boolean') {\n        this._writableState.closed = true;\n    }\n    else {\n        this.closed = true;\n    }\n    this._vol.close(this.fd, function (er) {\n        if (er)\n            _this.emit('error', er);\n        else\n            _this.emit('close');\n    });\n    this.fd = null;\n};\nFsWriteStream.prototype._destroy = FsReadStream.prototype._destroy;\n// There is no shutdown() for files.\nFsWriteStream.prototype.destroySoon = FsWriteStream.prototype.end;\n// ---------------------------------------- FSWatcher\nvar FSWatcher = /** @class */ (function (_super) {\n    __extends(FSWatcher, _super);\n    function FSWatcher(vol) {\n        var _this = _super.call(this) || this;\n        _this._filename = '';\n        _this._filenameEncoded = '';\n        // _persistent: boolean = true;\n        _this._recursive = false;\n        _this._encoding = encoding_1.ENCODING_UTF8;\n        // inode -> removers\n        _this._listenerRemovers = new Map();\n        _this._onParentChild = function (link) {\n            if (link.getName() === _this._getName()) {\n                _this._emit('rename');\n            }\n        };\n        _this._emit = function (type) {\n            _this.emit('change', type, _this._filenameEncoded);\n        };\n        _this._persist = function () {\n            _this._timer = setTimeout(_this._persist, 1e6);\n        };\n        _this._vol = vol;\n        return _this;\n        // TODO: Emit \"error\" messages when watching.\n        // this._handle.onchange = function(status, eventType, filename) {\n        //     if (status < 0) {\n        //         self._handle.close();\n        //         const error = !filename ?\n        //             errnoException(status, 'Error watching file for changes:') :\n        //             errnoException(status, `Error watching file ${filename} for changes:`);\n        //         error.filename = filename;\n        //         self.emit('error', error);\n        //     } else {\n        //         self.emit('change', eventType, filename);\n        //     }\n        // };\n    }\n    FSWatcher.prototype._getName = function () {\n        return this._steps[this._steps.length - 1];\n    };\n    FSWatcher.prototype.start = function (path, persistent, recursive, encoding) {\n        var _this = this;\n        if (persistent === void 0) { persistent = true; }\n        if (recursive === void 0) { recursive = false; }\n        if (encoding === void 0) { encoding = encoding_1.ENCODING_UTF8; }\n        this._filename = pathToFilename(path);\n        this._steps = filenameToSteps(this._filename);\n        this._filenameEncoded = (0, encoding_1.strToEncoding)(this._filename);\n        // this._persistent = persistent;\n        this._recursive = recursive;\n        this._encoding = encoding;\n        try {\n            this._link = this._vol.getLinkOrThrow(this._filename, 'FSWatcher');\n        }\n        catch (err) {\n            var error = new Error(\"watch \".concat(this._filename, \" \").concat(err.code));\n            error.code = err.code;\n            error.errno = err.code;\n            throw error;\n        }\n        var watchLinkNodeChanged = function (link) {\n            var _a;\n            var filepath = link.getPath();\n            var node = link.getNode();\n            var onNodeChange = function () { return _this.emit('change', 'change', relative(_this._filename, filepath)); };\n            node.on('change', onNodeChange);\n            var removers = (_a = _this._listenerRemovers.get(node.ino)) !== null && _a !== void 0 ? _a : [];\n            removers.push(function () { return node.removeListener('change', onNodeChange); });\n            _this._listenerRemovers.set(node.ino, removers);\n        };\n        var watchLinkChildrenChanged = function (link) {\n            var _a;\n            var node = link.getNode();\n            // when a new link added\n            var onLinkChildAdd = function (l) {\n                _this.emit('change', 'rename', relative(_this._filename, l.getPath()));\n                setTimeout(function () {\n                    // 1. watch changes of the new link-node\n                    watchLinkNodeChanged(l);\n                    // 2. watch changes of the new link-node's children\n                    watchLinkChildrenChanged(l);\n                });\n            };\n            // when a new link deleted\n            var onLinkChildDelete = function (l) {\n                // remove the listeners of the children nodes\n                var removeLinkNodeListeners = function (curLink) {\n                    var ino = curLink.getNode().ino;\n                    var removers = _this._listenerRemovers.get(ino);\n                    if (removers) {\n                        removers.forEach(function (r) { return r(); });\n                        _this._listenerRemovers.delete(ino);\n                    }\n                    Object.values(curLink.children).forEach(function (childLink) {\n                        if (childLink) {\n                            removeLinkNodeListeners(childLink);\n                        }\n                    });\n                };\n                removeLinkNodeListeners(l);\n                _this.emit('change', 'rename', relative(_this._filename, l.getPath()));\n            };\n            // children nodes changed\n            Object.entries(link.children).forEach(function (_a) {\n                var name = _a[0], childLink = _a[1];\n                if (childLink && name !== '.' && name !== '..') {\n                    watchLinkNodeChanged(childLink);\n                }\n            });\n            // link children add/remove\n            link.on('child:add', onLinkChildAdd);\n            link.on('child:delete', onLinkChildDelete);\n            var removers = (_a = _this._listenerRemovers.get(node.ino)) !== null && _a !== void 0 ? _a : [];\n            removers.push(function () {\n                link.removeListener('child:add', onLinkChildAdd);\n                link.removeListener('child:delete', onLinkChildDelete);\n            });\n            if (recursive) {\n                Object.entries(link.children).forEach(function (_a) {\n                    var name = _a[0], childLink = _a[1];\n                    if (childLink && name !== '.' && name !== '..') {\n                        watchLinkChildrenChanged(childLink);\n                    }\n                });\n            }\n        };\n        watchLinkNodeChanged(this._link);\n        watchLinkChildrenChanged(this._link);\n        var parent = this._link.parent;\n        if (parent) {\n            // parent.on('child:add', this._onParentChild);\n            parent.setMaxListeners(parent.getMaxListeners() + 1);\n            parent.on('child:delete', this._onParentChild);\n        }\n        if (persistent)\n            this._persist();\n    };\n    FSWatcher.prototype.close = function () {\n        clearTimeout(this._timer);\n        this._listenerRemovers.forEach(function (removers) {\n            removers.forEach(function (r) { return r(); });\n        });\n        this._listenerRemovers.clear();\n        var parent = this._link.parent;\n        if (parent) {\n            // parent.removeListener('child:add', this._onParentChild);\n            parent.removeListener('child:delete', this._onParentChild);\n        }\n    };\n    return FSWatcher;\n}(events_1.EventEmitter));\nexports.FSWatcher = FSWatcher;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}