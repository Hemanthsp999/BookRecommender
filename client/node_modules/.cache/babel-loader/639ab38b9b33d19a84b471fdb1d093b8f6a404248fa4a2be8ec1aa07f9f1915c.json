{"ast":null,"code":"'use strict';\n\nvar Buffer = require('safe-buffer').Buffer,\n  Base = require('./base'),\n  Draft75 = require('./draft75'),\n  crypto = require('crypto'),\n  util = require('util');\nvar numberFromKey = function (key) {\n  return parseInt((key.match(/[0-9]/g) || []).join(''), 10);\n};\nvar spacesInKey = function (key) {\n  return (key.match(/ /g) || []).length;\n};\nvar Draft76 = function (request, url, options) {\n  Draft75.apply(this, arguments);\n  this._stage = -1;\n  this._body = [];\n  this.version = 'hixie-76';\n  this._headers.clear();\n  this._headers.set('Upgrade', 'WebSocket');\n  this._headers.set('Connection', 'Upgrade');\n  this._headers.set('Sec-WebSocket-Origin', this._request.headers.origin);\n  this._headers.set('Sec-WebSocket-Location', this.url);\n};\nutil.inherits(Draft76, Draft75);\nvar instance = {\n  BODY_SIZE: 8,\n  start: function () {\n    if (!Draft75.prototype.start.call(this)) return false;\n    this._started = true;\n    this._sendHandshakeBody();\n    return true;\n  },\n  close: function () {\n    if (this.readyState === 3) return false;\n    if (this.readyState === 1) this._write(Buffer.from([0xFF, 0x00]));\n    this.readyState = 3;\n    this.emit('close', new Base.CloseEvent(null, null));\n    return true;\n  },\n  _handshakeResponse: function () {\n    var headers = this._request.headers,\n      key1 = headers['sec-websocket-key1'],\n      key2 = headers['sec-websocket-key2'];\n    if (!key1) throw new Error('Missing required header: Sec-WebSocket-Key1');\n    if (!key2) throw new Error('Missing required header: Sec-WebSocket-Key2');\n    var number1 = numberFromKey(key1),\n      spaces1 = spacesInKey(key1),\n      number2 = numberFromKey(key2),\n      spaces2 = spacesInKey(key2);\n    if (number1 % spaces1 !== 0 || number2 % spaces2 !== 0) throw new Error('Client sent invalid Sec-WebSocket-Key headers');\n    this._keyValues = [number1 / spaces1, number2 / spaces2];\n    var start = 'HTTP/1.1 101 WebSocket Protocol Handshake',\n      headers = [start, this._headers.toString(), ''];\n    return Buffer.from(headers.join('\\r\\n'), 'binary');\n  },\n  _handshakeSignature: function () {\n    if (this._body.length < this.BODY_SIZE) return null;\n    var md5 = crypto.createHash('md5'),\n      buffer = Buffer.allocUnsafe(8 + this.BODY_SIZE);\n    buffer.writeUInt32BE(this._keyValues[0], 0);\n    buffer.writeUInt32BE(this._keyValues[1], 4);\n    Buffer.from(this._body).copy(buffer, 8, 0, this.BODY_SIZE);\n    md5.update(buffer);\n    return Buffer.from(md5.digest('binary'), 'binary');\n  },\n  _sendHandshakeBody: function () {\n    if (!this._started) return;\n    var signature = this._handshakeSignature();\n    if (!signature) return;\n    this._write(signature);\n    this._stage = 0;\n    this._open();\n    if (this._body.length > this.BODY_SIZE) this.parse(this._body.slice(this.BODY_SIZE));\n  },\n  _parseLeadingByte: function (octet) {\n    if (octet !== 0xFF) return Draft75.prototype._parseLeadingByte.call(this, octet);\n    this._closing = true;\n    this._length = 0;\n    this._stage = 1;\n  }\n};\nfor (var key in instance) Draft76.prototype[key] = instance[key];\nmodule.exports = Draft76;","map":{"version":3,"names":["Buffer","require","Base","Draft75","crypto","util","numberFromKey","key","parseInt","match","join","spacesInKey","length","Draft76","request","url","options","apply","arguments","_stage","_body","version","_headers","clear","set","_request","headers","origin","inherits","instance","BODY_SIZE","start","prototype","call","_started","_sendHandshakeBody","close","readyState","_write","from","emit","CloseEvent","_handshakeResponse","key1","key2","Error","number1","spaces1","number2","spaces2","_keyValues","toString","_handshakeSignature","md5","createHash","buffer","allocUnsafe","writeUInt32BE","copy","update","digest","signature","_open","parse","slice","_parseLeadingByte","octet","_closing","_length","module","exports"],"sources":["/home/hemanth/react-project/client/node_modules/websocket-driver/lib/websocket/driver/draft76.js"],"sourcesContent":["'use strict';\n\nvar Buffer  = require('safe-buffer').Buffer,\n    Base    = require('./base'),\n    Draft75 = require('./draft75'),\n    crypto  = require('crypto'),\n    util    = require('util');\n\n\nvar numberFromKey = function(key) {\n  return parseInt((key.match(/[0-9]/g) || []).join(''), 10);\n};\n\nvar spacesInKey = function(key) {\n  return (key.match(/ /g) || []).length;\n};\n\n\nvar Draft76 = function(request, url, options) {\n  Draft75.apply(this, arguments);\n  this._stage  = -1;\n  this._body   = [];\n  this.version = 'hixie-76';\n\n  this._headers.clear();\n\n  this._headers.set('Upgrade', 'WebSocket');\n  this._headers.set('Connection', 'Upgrade');\n  this._headers.set('Sec-WebSocket-Origin', this._request.headers.origin);\n  this._headers.set('Sec-WebSocket-Location', this.url);\n};\nutil.inherits(Draft76, Draft75);\n\nvar instance = {\n  BODY_SIZE: 8,\n\n  start: function() {\n    if (!Draft75.prototype.start.call(this)) return false;\n    this._started = true;\n    this._sendHandshakeBody();\n    return true;\n  },\n\n  close: function() {\n    if (this.readyState === 3) return false;\n    if (this.readyState === 1) this._write(Buffer.from([0xFF, 0x00]));\n    this.readyState = 3;\n    this.emit('close', new Base.CloseEvent(null, null));\n    return true;\n  },\n\n  _handshakeResponse: function() {\n    var headers = this._request.headers,\n        key1    = headers['sec-websocket-key1'],\n        key2    = headers['sec-websocket-key2'];\n\n    if (!key1) throw new Error('Missing required header: Sec-WebSocket-Key1');\n    if (!key2) throw new Error('Missing required header: Sec-WebSocket-Key2');\n\n    var number1 = numberFromKey(key1),\n        spaces1 = spacesInKey(key1),\n\n        number2 = numberFromKey(key2),\n        spaces2 = spacesInKey(key2);\n\n    if (number1 % spaces1 !== 0 || number2 % spaces2 !== 0)\n      throw new Error('Client sent invalid Sec-WebSocket-Key headers');\n\n    this._keyValues = [number1 / spaces1, number2 / spaces2];\n\n    var start   = 'HTTP/1.1 101 WebSocket Protocol Handshake',\n        headers = [start, this._headers.toString(), ''];\n\n    return Buffer.from(headers.join('\\r\\n'), 'binary');\n  },\n\n  _handshakeSignature: function() {\n    if (this._body.length < this.BODY_SIZE) return null;\n\n    var md5    = crypto.createHash('md5'),\n        buffer = Buffer.allocUnsafe(8 + this.BODY_SIZE);\n\n    buffer.writeUInt32BE(this._keyValues[0], 0);\n    buffer.writeUInt32BE(this._keyValues[1], 4);\n    Buffer.from(this._body).copy(buffer, 8, 0, this.BODY_SIZE);\n\n    md5.update(buffer);\n    return Buffer.from(md5.digest('binary'), 'binary');\n  },\n\n  _sendHandshakeBody: function() {\n    if (!this._started) return;\n    var signature = this._handshakeSignature();\n    if (!signature) return;\n\n    this._write(signature);\n    this._stage = 0;\n    this._open();\n\n    if (this._body.length > this.BODY_SIZE)\n      this.parse(this._body.slice(this.BODY_SIZE));\n  },\n\n  _parseLeadingByte: function(octet) {\n    if (octet !== 0xFF)\n      return Draft75.prototype._parseLeadingByte.call(this, octet);\n\n    this._closing = true;\n    this._length  = 0;\n    this._stage   = 1;\n  }\n};\n\nfor (var key in instance)\n  Draft76.prototype[key] = instance[key];\n\nmodule.exports = Draft76;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,MAAM,GAAIC,OAAO,CAAC,aAAa,CAAC,CAACD,MAAM;EACvCE,IAAI,GAAMD,OAAO,CAAC,QAAQ,CAAC;EAC3BE,OAAO,GAAGF,OAAO,CAAC,WAAW,CAAC;EAC9BG,MAAM,GAAIH,OAAO,CAAC,QAAQ,CAAC;EAC3BI,IAAI,GAAMJ,OAAO,CAAC,MAAM,CAAC;AAG7B,IAAIK,aAAa,GAAG,SAAAA,CAASC,GAAG,EAAE;EAChC,OAAOC,QAAQ,CAAC,CAACD,GAAG,CAACE,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE,EAAEC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;AAC3D,CAAC;AAED,IAAIC,WAAW,GAAG,SAAAA,CAASJ,GAAG,EAAE;EAC9B,OAAO,CAACA,GAAG,CAACE,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,EAAEG,MAAM;AACvC,CAAC;AAGD,IAAIC,OAAO,GAAG,SAAAA,CAASC,OAAO,EAAEC,GAAG,EAAEC,OAAO,EAAE;EAC5Cb,OAAO,CAACc,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;EAC9B,IAAI,CAACC,MAAM,GAAI,CAAC,CAAC;EACjB,IAAI,CAACC,KAAK,GAAK,EAAE;EACjB,IAAI,CAACC,OAAO,GAAG,UAAU;EAEzB,IAAI,CAACC,QAAQ,CAACC,KAAK,CAAC,CAAC;EAErB,IAAI,CAACD,QAAQ,CAACE,GAAG,CAAC,SAAS,EAAE,WAAW,CAAC;EACzC,IAAI,CAACF,QAAQ,CAACE,GAAG,CAAC,YAAY,EAAE,SAAS,CAAC;EAC1C,IAAI,CAACF,QAAQ,CAACE,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAACC,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC;EACvE,IAAI,CAACL,QAAQ,CAACE,GAAG,CAAC,wBAAwB,EAAE,IAAI,CAACT,GAAG,CAAC;AACvD,CAAC;AACDV,IAAI,CAACuB,QAAQ,CAACf,OAAO,EAAEV,OAAO,CAAC;AAE/B,IAAI0B,QAAQ,GAAG;EACbC,SAAS,EAAE,CAAC;EAEZC,KAAK,EAAE,SAAAA,CAAA,EAAW;IAChB,IAAI,CAAC5B,OAAO,CAAC6B,SAAS,CAACD,KAAK,CAACE,IAAI,CAAC,IAAI,CAAC,EAAE,OAAO,KAAK;IACrD,IAAI,CAACC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACC,kBAAkB,CAAC,CAAC;IACzB,OAAO,IAAI;EACb,CAAC;EAEDC,KAAK,EAAE,SAAAA,CAAA,EAAW;IAChB,IAAI,IAAI,CAACC,UAAU,KAAK,CAAC,EAAE,OAAO,KAAK;IACvC,IAAI,IAAI,CAACA,UAAU,KAAK,CAAC,EAAE,IAAI,CAACC,MAAM,CAACtC,MAAM,CAACuC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;IACjE,IAAI,CAACF,UAAU,GAAG,CAAC;IACnB,IAAI,CAACG,IAAI,CAAC,OAAO,EAAE,IAAItC,IAAI,CAACuC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACnD,OAAO,IAAI;EACb,CAAC;EAEDC,kBAAkB,EAAE,SAAAA,CAAA,EAAW;IAC7B,IAAIhB,OAAO,GAAG,IAAI,CAACD,QAAQ,CAACC,OAAO;MAC/BiB,IAAI,GAAMjB,OAAO,CAAC,oBAAoB,CAAC;MACvCkB,IAAI,GAAMlB,OAAO,CAAC,oBAAoB,CAAC;IAE3C,IAAI,CAACiB,IAAI,EAAE,MAAM,IAAIE,KAAK,CAAC,6CAA6C,CAAC;IACzE,IAAI,CAACD,IAAI,EAAE,MAAM,IAAIC,KAAK,CAAC,6CAA6C,CAAC;IAEzE,IAAIC,OAAO,GAAGxC,aAAa,CAACqC,IAAI,CAAC;MAC7BI,OAAO,GAAGpC,WAAW,CAACgC,IAAI,CAAC;MAE3BK,OAAO,GAAG1C,aAAa,CAACsC,IAAI,CAAC;MAC7BK,OAAO,GAAGtC,WAAW,CAACiC,IAAI,CAAC;IAE/B,IAAIE,OAAO,GAAGC,OAAO,KAAK,CAAC,IAAIC,OAAO,GAAGC,OAAO,KAAK,CAAC,EACpD,MAAM,IAAIJ,KAAK,CAAC,+CAA+C,CAAC;IAElE,IAAI,CAACK,UAAU,GAAG,CAACJ,OAAO,GAAGC,OAAO,EAAEC,OAAO,GAAGC,OAAO,CAAC;IAExD,IAAIlB,KAAK,GAAK,2CAA2C;MACrDL,OAAO,GAAG,CAACK,KAAK,EAAE,IAAI,CAACT,QAAQ,CAAC6B,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC;IAEnD,OAAOnD,MAAM,CAACuC,IAAI,CAACb,OAAO,CAAChB,IAAI,CAAC,MAAM,CAAC,EAAE,QAAQ,CAAC;EACpD,CAAC;EAED0C,mBAAmB,EAAE,SAAAA,CAAA,EAAW;IAC9B,IAAI,IAAI,CAAChC,KAAK,CAACR,MAAM,GAAG,IAAI,CAACkB,SAAS,EAAE,OAAO,IAAI;IAEnD,IAAIuB,GAAG,GAAMjD,MAAM,CAACkD,UAAU,CAAC,KAAK,CAAC;MACjCC,MAAM,GAAGvD,MAAM,CAACwD,WAAW,CAAC,CAAC,GAAG,IAAI,CAAC1B,SAAS,CAAC;IAEnDyB,MAAM,CAACE,aAAa,CAAC,IAAI,CAACP,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAC3CK,MAAM,CAACE,aAAa,CAAC,IAAI,CAACP,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAC3ClD,MAAM,CAACuC,IAAI,CAAC,IAAI,CAACnB,KAAK,CAAC,CAACsC,IAAI,CAACH,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAACzB,SAAS,CAAC;IAE1DuB,GAAG,CAACM,MAAM,CAACJ,MAAM,CAAC;IAClB,OAAOvD,MAAM,CAACuC,IAAI,CAACc,GAAG,CAACO,MAAM,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC;EACpD,CAAC;EAEDzB,kBAAkB,EAAE,SAAAA,CAAA,EAAW;IAC7B,IAAI,CAAC,IAAI,CAACD,QAAQ,EAAE;IACpB,IAAI2B,SAAS,GAAG,IAAI,CAACT,mBAAmB,CAAC,CAAC;IAC1C,IAAI,CAACS,SAAS,EAAE;IAEhB,IAAI,CAACvB,MAAM,CAACuB,SAAS,CAAC;IACtB,IAAI,CAAC1C,MAAM,GAAG,CAAC;IACf,IAAI,CAAC2C,KAAK,CAAC,CAAC;IAEZ,IAAI,IAAI,CAAC1C,KAAK,CAACR,MAAM,GAAG,IAAI,CAACkB,SAAS,EACpC,IAAI,CAACiC,KAAK,CAAC,IAAI,CAAC3C,KAAK,CAAC4C,KAAK,CAAC,IAAI,CAAClC,SAAS,CAAC,CAAC;EAChD,CAAC;EAEDmC,iBAAiB,EAAE,SAAAA,CAASC,KAAK,EAAE;IACjC,IAAIA,KAAK,KAAK,IAAI,EAChB,OAAO/D,OAAO,CAAC6B,SAAS,CAACiC,iBAAiB,CAAChC,IAAI,CAAC,IAAI,EAAEiC,KAAK,CAAC;IAE9D,IAAI,CAACC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACC,OAAO,GAAI,CAAC;IACjB,IAAI,CAACjD,MAAM,GAAK,CAAC;EACnB;AACF,CAAC;AAED,KAAK,IAAIZ,GAAG,IAAIsB,QAAQ,EACtBhB,OAAO,CAACmB,SAAS,CAACzB,GAAG,CAAC,GAAGsB,QAAQ,CAACtB,GAAG,CAAC;AAExC8D,MAAM,CAACC,OAAO,GAAGzD,OAAO"},"metadata":{},"sourceType":"script","externalDependencies":[]}