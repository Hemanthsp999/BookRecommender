{"ast":null,"code":"'use strict';\n\nvar RingBuffer = function (bufferSize) {\n  this._bufferSize = bufferSize;\n  this.clear();\n};\nRingBuffer.prototype.clear = function () {\n  this._buffer = new Array(this._bufferSize);\n  this._ringOffset = 0;\n  this._ringSize = this._bufferSize;\n  this._head = 0;\n  this._tail = 0;\n  this.length = 0;\n};\nRingBuffer.prototype.push = function (value) {\n  var expandBuffer = false,\n    expandRing = false;\n  if (this._ringSize < this._bufferSize) {\n    expandBuffer = this._tail === 0;\n  } else if (this._ringOffset === this._ringSize) {\n    expandBuffer = true;\n    expandRing = this._tail === 0;\n  }\n  if (expandBuffer) {\n    this._tail = this._bufferSize;\n    this._buffer = this._buffer.concat(new Array(this._bufferSize));\n    this._bufferSize = this._buffer.length;\n    if (expandRing) this._ringSize = this._bufferSize;\n  }\n  this._buffer[this._tail] = value;\n  this.length += 1;\n  if (this._tail < this._ringSize) this._ringOffset += 1;\n  this._tail = (this._tail + 1) % this._bufferSize;\n};\nRingBuffer.prototype.peek = function () {\n  if (this.length === 0) return void 0;\n  return this._buffer[this._head];\n};\nRingBuffer.prototype.shift = function () {\n  if (this.length === 0) return void 0;\n  var value = this._buffer[this._head];\n  this._buffer[this._head] = void 0;\n  this.length -= 1;\n  this._ringOffset -= 1;\n  if (this._ringOffset === 0 && this.length > 0) {\n    this._head = this._ringSize;\n    this._ringOffset = this.length;\n    this._ringSize = this._bufferSize;\n  } else {\n    this._head = (this._head + 1) % this._ringSize;\n  }\n  return value;\n};\nmodule.exports = RingBuffer;","map":{"version":3,"names":["RingBuffer","bufferSize","_bufferSize","clear","prototype","_buffer","Array","_ringOffset","_ringSize","_head","_tail","length","push","value","expandBuffer","expandRing","concat","peek","shift","module","exports"],"sources":["/home/hemanth/react-project/client/node_modules/websocket-extensions/lib/pipeline/ring_buffer.js"],"sourcesContent":["'use strict';\n\nvar RingBuffer = function(bufferSize) {\n  this._bufferSize = bufferSize;\n  this.clear();\n};\n\nRingBuffer.prototype.clear = function() {\n  this._buffer     = new Array(this._bufferSize);\n  this._ringOffset = 0;\n  this._ringSize   = this._bufferSize;\n  this._head       = 0;\n  this._tail       = 0;\n  this.length      = 0;\n};\n\nRingBuffer.prototype.push = function(value) {\n  var expandBuffer = false,\n      expandRing   = false;\n\n  if (this._ringSize < this._bufferSize) {\n    expandBuffer = (this._tail === 0);\n  } else if (this._ringOffset === this._ringSize) {\n    expandBuffer = true;\n    expandRing   = (this._tail === 0);\n  }\n\n  if (expandBuffer) {\n    this._tail       = this._bufferSize;\n    this._buffer     = this._buffer.concat(new Array(this._bufferSize));\n    this._bufferSize = this._buffer.length;\n\n    if (expandRing)\n      this._ringSize = this._bufferSize;\n  }\n\n  this._buffer[this._tail] = value;\n  this.length += 1;\n  if (this._tail < this._ringSize) this._ringOffset += 1;\n  this._tail = (this._tail + 1) % this._bufferSize;\n};\n\nRingBuffer.prototype.peek = function() {\n  if (this.length === 0) return void 0;\n  return this._buffer[this._head];\n};\n\nRingBuffer.prototype.shift = function() {\n  if (this.length === 0) return void 0;\n\n  var value = this._buffer[this._head];\n  this._buffer[this._head] = void 0;\n  this.length -= 1;\n  this._ringOffset -= 1;\n\n  if (this._ringOffset === 0 && this.length > 0) {\n    this._head       = this._ringSize;\n    this._ringOffset = this.length;\n    this._ringSize   = this._bufferSize;\n  } else {\n    this._head = (this._head + 1) % this._ringSize;\n  }\n  return value;\n};\n\nmodule.exports = RingBuffer;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}