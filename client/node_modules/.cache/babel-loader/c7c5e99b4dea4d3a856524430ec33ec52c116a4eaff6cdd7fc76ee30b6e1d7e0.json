{"ast":null,"code":"'use strict';\n\nvar RingBuffer = require('./ring_buffer');\nvar Pledge = function () {\n  this._complete = false;\n  this._callbacks = new RingBuffer(Pledge.QUEUE_SIZE);\n};\nPledge.QUEUE_SIZE = 4;\nPledge.all = function (list) {\n  var pledge = new Pledge(),\n    pending = list.length,\n    n = pending;\n  if (pending === 0) pledge.done();\n  while (n--) list[n].then(function () {\n    pending -= 1;\n    if (pending === 0) pledge.done();\n  });\n  return pledge;\n};\nPledge.prototype.then = function (callback) {\n  if (this._complete) callback();else this._callbacks.push(callback);\n};\nPledge.prototype.done = function () {\n  this._complete = true;\n  var callbacks = this._callbacks,\n    callback;\n  while (callback = callbacks.shift()) callback();\n};\nmodule.exports = Pledge;","map":{"version":3,"names":["RingBuffer","require","Pledge","_complete","_callbacks","QUEUE_SIZE","all","list","pledge","pending","length","n","done","then","prototype","callback","push","callbacks","shift","module","exports"],"sources":["/home/hemanth/react-project/client/node_modules/websocket-extensions/lib/pipeline/pledge.js"],"sourcesContent":["'use strict';\n\nvar RingBuffer = require('./ring_buffer');\n\nvar Pledge = function() {\n  this._complete  = false;\n  this._callbacks = new RingBuffer(Pledge.QUEUE_SIZE);\n};\n\nPledge.QUEUE_SIZE = 4;\n\nPledge.all = function(list) {\n  var pledge  = new Pledge(),\n      pending = list.length,\n      n       = pending;\n\n  if (pending === 0) pledge.done();\n\n  while (n--) list[n].then(function() {\n    pending -= 1;\n    if (pending === 0) pledge.done();\n  });\n  return pledge;\n};\n\nPledge.prototype.then = function(callback) {\n  if (this._complete) callback();\n  else this._callbacks.push(callback);\n};\n\nPledge.prototype.done = function() {\n  this._complete = true;\n  var callbacks = this._callbacks, callback;\n  while (callback = callbacks.shift()) callback();\n};\n\nmodule.exports = Pledge;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,UAAU,GAAGC,OAAO,CAAC,eAAe,CAAC;AAEzC,IAAIC,MAAM,GAAG,SAAAA,CAAA,EAAW;EACtB,IAAI,CAACC,SAAS,GAAI,KAAK;EACvB,IAAI,CAACC,UAAU,GAAG,IAAIJ,UAAU,CAACE,MAAM,CAACG,UAAU,CAAC;AACrD,CAAC;AAEDH,MAAM,CAACG,UAAU,GAAG,CAAC;AAErBH,MAAM,CAACI,GAAG,GAAG,UAASC,IAAI,EAAE;EAC1B,IAAIC,MAAM,GAAI,IAAIN,MAAM,CAAC,CAAC;IACtBO,OAAO,GAAGF,IAAI,CAACG,MAAM;IACrBC,CAAC,GAASF,OAAO;EAErB,IAAIA,OAAO,KAAK,CAAC,EAAED,MAAM,CAACI,IAAI,CAAC,CAAC;EAEhC,OAAOD,CAAC,EAAE,EAAEJ,IAAI,CAACI,CAAC,CAAC,CAACE,IAAI,CAAC,YAAW;IAClCJ,OAAO,IAAI,CAAC;IACZ,IAAIA,OAAO,KAAK,CAAC,EAAED,MAAM,CAACI,IAAI,CAAC,CAAC;EAClC,CAAC,CAAC;EACF,OAAOJ,MAAM;AACf,CAAC;AAEDN,MAAM,CAACY,SAAS,CAACD,IAAI,GAAG,UAASE,QAAQ,EAAE;EACzC,IAAI,IAAI,CAACZ,SAAS,EAAEY,QAAQ,CAAC,CAAC,CAAC,KAC1B,IAAI,CAACX,UAAU,CAACY,IAAI,CAACD,QAAQ,CAAC;AACrC,CAAC;AAEDb,MAAM,CAACY,SAAS,CAACF,IAAI,GAAG,YAAW;EACjC,IAAI,CAACT,SAAS,GAAG,IAAI;EACrB,IAAIc,SAAS,GAAG,IAAI,CAACb,UAAU;IAAEW,QAAQ;EACzC,OAAOA,QAAQ,GAAGE,SAAS,CAACC,KAAK,CAAC,CAAC,EAAEH,QAAQ,CAAC,CAAC;AACjD,CAAC;AAEDI,MAAM,CAACC,OAAO,GAAGlB,MAAM"},"metadata":{},"sourceType":"script","externalDependencies":[]}