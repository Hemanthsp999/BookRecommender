{"ast":null,"code":"'use strict';\n\nvar util = require('util'),\n  HttpParser = require('../http_parser'),\n  Base = require('./base'),\n  Draft75 = require('./draft75'),\n  Draft76 = require('./draft76'),\n  Hybi = require('./hybi');\nvar Server = function (options) {\n  Base.call(this, null, null, options);\n  this._http = new HttpParser('request');\n};\nutil.inherits(Server, Base);\nvar instance = {\n  EVENTS: ['open', 'message', 'error', 'close', 'ping', 'pong'],\n  _bindEventListeners: function () {\n    this.messages.on('error', function () {});\n    this.on('error', function () {});\n  },\n  parse: function (chunk) {\n    if (this._delegate) return this._delegate.parse(chunk);\n    this._http.parse(chunk);\n    if (!this._http.isComplete()) return;\n    this.method = this._http.method;\n    this.url = this._http.url;\n    this.headers = this._http.headers;\n    this.body = this._http.body;\n    var self = this;\n    this._delegate = Server.http(this, this._options);\n    this._delegate.messages = this.messages;\n    this._delegate.io = this.io;\n    this._open();\n    this.EVENTS.forEach(function (event) {\n      this._delegate.on(event, function (e) {\n        self.emit(event, e);\n      });\n    }, this);\n    this.protocol = this._delegate.protocol;\n    this.version = this._delegate.version;\n    this.parse(this._http.body);\n    this.emit('connect', new Base.ConnectEvent());\n  },\n  _open: function () {\n    this.__queue.forEach(function (msg) {\n      this._delegate[msg[0]].apply(this._delegate, msg[1]);\n    }, this);\n    this.__queue = [];\n  }\n};\n['addExtension', 'setHeader', 'start', 'frame', 'text', 'binary', 'ping', 'close'].forEach(function (method) {\n  instance[method] = function () {\n    if (this._delegate) {\n      return this._delegate[method].apply(this._delegate, arguments);\n    } else {\n      this.__queue.push([method, arguments]);\n      return true;\n    }\n  };\n});\nfor (var key in instance) Server.prototype[key] = instance[key];\nServer.isSecureRequest = function (request) {\n  if (request.connection && request.connection.authorized !== undefined) return true;\n  if (request.socket && request.socket.secure) return true;\n  var headers = request.headers;\n  if (!headers) return false;\n  if (headers['https'] === 'on') return true;\n  if (headers['x-forwarded-ssl'] === 'on') return true;\n  if (headers['x-forwarded-scheme'] === 'https') return true;\n  if (headers['x-forwarded-proto'] === 'https') return true;\n  return false;\n};\nServer.determineUrl = function (request) {\n  var scheme = this.isSecureRequest(request) ? 'wss:' : 'ws:';\n  return scheme + '//' + request.headers.host + request.url;\n};\nServer.http = function (request, options) {\n  options = options || {};\n  if (options.requireMasking === undefined) options.requireMasking = true;\n  var headers = request.headers,\n    version = headers['sec-websocket-version'],\n    key = headers['sec-websocket-key'],\n    key1 = headers['sec-websocket-key1'],\n    key2 = headers['sec-websocket-key2'],\n    url = this.determineUrl(request);\n  if (version || key) return new Hybi(request, url, options);else if (key1 || key2) return new Draft76(request, url, options);else return new Draft75(request, url, options);\n};\nmodule.exports = Server;","map":{"version":3,"names":["util","require","HttpParser","Base","Draft75","Draft76","Hybi","Server","options","call","_http","inherits","instance","EVENTS","_bindEventListeners","messages","on","parse","chunk","_delegate","isComplete","method","url","headers","body","self","http","_options","io","_open","forEach","event","e","emit","protocol","version","ConnectEvent","__queue","msg","apply","arguments","push","key","prototype","isSecureRequest","request","connection","authorized","undefined","socket","secure","determineUrl","scheme","host","requireMasking","key1","key2","module","exports"],"sources":["/home/hemanth/react-project/client/node_modules/websocket-driver/lib/websocket/driver/server.js"],"sourcesContent":["'use strict';\n\nvar util       = require('util'),\n    HttpParser = require('../http_parser'),\n    Base       = require('./base'),\n    Draft75    = require('./draft75'),\n    Draft76    = require('./draft76'),\n    Hybi       = require('./hybi');\n\nvar Server = function(options) {\n  Base.call(this, null, null, options);\n  this._http = new HttpParser('request');\n};\nutil.inherits(Server, Base);\n\nvar instance = {\n  EVENTS: ['open', 'message', 'error', 'close', 'ping', 'pong'],\n\n  _bindEventListeners: function() {\n    this.messages.on('error', function() {});\n    this.on('error', function() {});\n  },\n\n  parse: function(chunk) {\n    if (this._delegate) return this._delegate.parse(chunk);\n\n    this._http.parse(chunk);\n    if (!this._http.isComplete()) return;\n\n    this.method  = this._http.method;\n    this.url     = this._http.url;\n    this.headers = this._http.headers;\n    this.body    = this._http.body;\n\n    var self = this;\n    this._delegate = Server.http(this, this._options);\n    this._delegate.messages = this.messages;\n    this._delegate.io = this.io;\n    this._open();\n\n    this.EVENTS.forEach(function(event) {\n      this._delegate.on(event, function(e) { self.emit(event, e) });\n    }, this);\n\n    this.protocol = this._delegate.protocol;\n    this.version  = this._delegate.version;\n\n    this.parse(this._http.body);\n    this.emit('connect', new Base.ConnectEvent());\n  },\n\n  _open: function() {\n    this.__queue.forEach(function(msg) {\n      this._delegate[msg[0]].apply(this._delegate, msg[1]);\n    }, this);\n    this.__queue = [];\n  }\n};\n\n['addExtension', 'setHeader', 'start', 'frame', 'text', 'binary', 'ping', 'close'].forEach(function(method) {\n  instance[method] = function() {\n    if (this._delegate) {\n      return this._delegate[method].apply(this._delegate, arguments);\n    } else {\n      this.__queue.push([method, arguments]);\n      return true;\n    }\n  };\n});\n\nfor (var key in instance)\n  Server.prototype[key] = instance[key];\n\nServer.isSecureRequest = function(request) {\n  if (request.connection && request.connection.authorized !== undefined) return true;\n  if (request.socket && request.socket.secure) return true;\n\n  var headers = request.headers;\n  if (!headers) return false;\n  if (headers['https'] === 'on') return true;\n  if (headers['x-forwarded-ssl'] === 'on') return true;\n  if (headers['x-forwarded-scheme'] === 'https') return true;\n  if (headers['x-forwarded-proto'] === 'https') return true;\n\n  return false;\n};\n\nServer.determineUrl = function(request) {\n  var scheme = this.isSecureRequest(request) ? 'wss:' : 'ws:';\n  return scheme + '//' + request.headers.host + request.url;\n};\n\nServer.http = function(request, options) {\n  options = options || {};\n  if (options.requireMasking === undefined) options.requireMasking = true;\n\n  var headers = request.headers,\n      version = headers['sec-websocket-version'],\n      key     = headers['sec-websocket-key'],\n      key1    = headers['sec-websocket-key1'],\n      key2    = headers['sec-websocket-key2'],\n      url     = this.determineUrl(request);\n\n  if (version || key)\n    return new Hybi(request, url, options);\n  else if (key1 || key2)\n    return new Draft76(request, url, options);\n  else\n    return new Draft75(request, url, options);\n};\n\nmodule.exports = Server;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}