{"ast":null,"code":"// API references:\n//\n// * https://html.spec.whatwg.org/multipage/comms.html#network\n// * https://dom.spec.whatwg.org/#interface-eventtarget\n// * https://dom.spec.whatwg.org/#interface-event\n\n'use strict';\n\nvar util = require('util'),\n  driver = require('websocket-driver'),\n  API = require('./websocket/api');\nvar WebSocket = function (request, socket, body, protocols, options) {\n  options = options || {};\n  this._stream = socket;\n  this._driver = driver.http(request, {\n    maxLength: options.maxLength,\n    protocols: protocols\n  });\n  var self = this;\n  if (!this._stream || !this._stream.writable) return;\n  if (!this._stream.readable) return this._stream.end();\n  var catchup = function () {\n    self._stream.removeListener('data', catchup);\n  };\n  this._stream.on('data', catchup);\n  API.call(this, options);\n  process.nextTick(function () {\n    self._driver.start();\n    self._driver.io.write(body);\n  });\n};\nutil.inherits(WebSocket, API);\nWebSocket.isWebSocket = function (request) {\n  return driver.isWebSocket(request);\n};\nWebSocket.validateOptions = function (options, validKeys) {\n  driver.validateOptions(options, validKeys);\n};\nWebSocket.WebSocket = WebSocket;\nWebSocket.Client = require('./websocket/client');\nWebSocket.EventSource = require('./eventsource');\nmodule.exports = WebSocket;","map":{"version":3,"names":["util","require","driver","API","WebSocket","request","socket","body","protocols","options","_stream","_driver","http","maxLength","self","writable","readable","end","catchup","removeListener","on","call","process","nextTick","start","io","write","inherits","isWebSocket","validateOptions","validKeys","Client","EventSource","module","exports"],"sources":["/home/hemanth/react-project/client/node_modules/faye-websocket/lib/faye/websocket.js"],"sourcesContent":["// API references:\n//\n// * https://html.spec.whatwg.org/multipage/comms.html#network\n// * https://dom.spec.whatwg.org/#interface-eventtarget\n// * https://dom.spec.whatwg.org/#interface-event\n\n'use strict';\n\nvar util   = require('util'),\n    driver = require('websocket-driver'),\n    API    = require('./websocket/api');\n\nvar WebSocket = function(request, socket, body, protocols, options) {\n  options = options || {};\n\n  this._stream = socket;\n  this._driver = driver.http(request, { maxLength: options.maxLength, protocols: protocols });\n\n  var self = this;\n  if (!this._stream || !this._stream.writable) return;\n  if (!this._stream.readable) return this._stream.end();\n\n  var catchup = function() { self._stream.removeListener('data', catchup) };\n  this._stream.on('data', catchup);\n\n  API.call(this, options);\n\n  process.nextTick(function() {\n    self._driver.start();\n    self._driver.io.write(body);\n  });\n};\nutil.inherits(WebSocket, API);\n\nWebSocket.isWebSocket = function(request) {\n  return driver.isWebSocket(request);\n};\n\nWebSocket.validateOptions = function(options, validKeys) {\n  driver.validateOptions(options, validKeys);\n};\n\nWebSocket.WebSocket   = WebSocket;\nWebSocket.Client      = require('./websocket/client');\nWebSocket.EventSource = require('./eventsource');\n\nmodule.exports        = WebSocket;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,IAAI,GAAKC,OAAO,CAAC,MAAM,CAAC;EACxBC,MAAM,GAAGD,OAAO,CAAC,kBAAkB,CAAC;EACpCE,GAAG,GAAMF,OAAO,CAAC,iBAAiB,CAAC;AAEvC,IAAIG,SAAS,GAAG,SAAAA,CAASC,OAAO,EAAEC,MAAM,EAAEC,IAAI,EAAEC,SAAS,EAAEC,OAAO,EAAE;EAClEA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EAEvB,IAAI,CAACC,OAAO,GAAGJ,MAAM;EACrB,IAAI,CAACK,OAAO,GAAGT,MAAM,CAACU,IAAI,CAACP,OAAO,EAAE;IAAEQ,SAAS,EAAEJ,OAAO,CAACI,SAAS;IAAEL,SAAS,EAAEA;EAAU,CAAC,CAAC;EAE3F,IAAIM,IAAI,GAAG,IAAI;EACf,IAAI,CAAC,IAAI,CAACJ,OAAO,IAAI,CAAC,IAAI,CAACA,OAAO,CAACK,QAAQ,EAAE;EAC7C,IAAI,CAAC,IAAI,CAACL,OAAO,CAACM,QAAQ,EAAE,OAAO,IAAI,CAACN,OAAO,CAACO,GAAG,CAAC,CAAC;EAErD,IAAIC,OAAO,GAAG,SAAAA,CAAA,EAAW;IAAEJ,IAAI,CAACJ,OAAO,CAACS,cAAc,CAAC,MAAM,EAAED,OAAO,CAAC;EAAC,CAAC;EACzE,IAAI,CAACR,OAAO,CAACU,EAAE,CAAC,MAAM,EAAEF,OAAO,CAAC;EAEhCf,GAAG,CAACkB,IAAI,CAAC,IAAI,EAAEZ,OAAO,CAAC;EAEvBa,OAAO,CAACC,QAAQ,CAAC,YAAW;IAC1BT,IAAI,CAACH,OAAO,CAACa,KAAK,CAAC,CAAC;IACpBV,IAAI,CAACH,OAAO,CAACc,EAAE,CAACC,KAAK,CAACnB,IAAI,CAAC;EAC7B,CAAC,CAAC;AACJ,CAAC;AACDP,IAAI,CAAC2B,QAAQ,CAACvB,SAAS,EAAED,GAAG,CAAC;AAE7BC,SAAS,CAACwB,WAAW,GAAG,UAASvB,OAAO,EAAE;EACxC,OAAOH,MAAM,CAAC0B,WAAW,CAACvB,OAAO,CAAC;AACpC,CAAC;AAEDD,SAAS,CAACyB,eAAe,GAAG,UAASpB,OAAO,EAAEqB,SAAS,EAAE;EACvD5B,MAAM,CAAC2B,eAAe,CAACpB,OAAO,EAAEqB,SAAS,CAAC;AAC5C,CAAC;AAED1B,SAAS,CAACA,SAAS,GAAKA,SAAS;AACjCA,SAAS,CAAC2B,MAAM,GAAQ9B,OAAO,CAAC,oBAAoB,CAAC;AACrDG,SAAS,CAAC4B,WAAW,GAAG/B,OAAO,CAAC,eAAe,CAAC;AAEhDgC,MAAM,CAACC,OAAO,GAAU9B,SAAS"},"metadata":{},"sourceType":"script","externalDependencies":[]}