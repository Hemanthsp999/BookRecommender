{"ast":null,"code":"'use strict';\n\nvar Buffer = require('safe-buffer').Buffer,\n  Stream = require('stream').Stream,\n  url = require('url'),\n  util = require('util'),\n  Base = require('./base'),\n  Headers = require('./headers'),\n  HttpParser = require('../http_parser');\nvar PORTS = {\n  'ws:': 80,\n  'wss:': 443\n};\nvar Proxy = function (client, origin, options) {\n  this._client = client;\n  this._http = new HttpParser('response');\n  this._origin = typeof client.url === 'object' ? client.url : url.parse(client.url);\n  this._url = typeof origin === 'object' ? origin : url.parse(origin);\n  this._options = options || {};\n  this._state = 0;\n  this.readable = this.writable = true;\n  this._paused = false;\n  this._headers = new Headers();\n  this._headers.set('Host', this._origin.host);\n  this._headers.set('Connection', 'keep-alive');\n  this._headers.set('Proxy-Connection', 'keep-alive');\n  var auth = this._url.auth && Buffer.from(this._url.auth, 'utf8').toString('base64');\n  if (auth) this._headers.set('Proxy-Authorization', 'Basic ' + auth);\n};\nutil.inherits(Proxy, Stream);\nvar instance = {\n  setHeader: function (name, value) {\n    if (this._state !== 0) return false;\n    this._headers.set(name, value);\n    return true;\n  },\n  start: function () {\n    if (this._state !== 0) return false;\n    this._state = 1;\n    var origin = this._origin,\n      port = origin.port || PORTS[origin.protocol],\n      start = 'CONNECT ' + origin.hostname + ':' + port + ' HTTP/1.1';\n    var headers = [start, this._headers.toString(), ''];\n    this.emit('data', Buffer.from(headers.join('\\r\\n'), 'utf8'));\n    return true;\n  },\n  pause: function () {\n    this._paused = true;\n  },\n  resume: function () {\n    this._paused = false;\n    this.emit('drain');\n  },\n  write: function (chunk) {\n    if (!this.writable) return false;\n    this._http.parse(chunk);\n    if (!this._http.isComplete()) return !this._paused;\n    this.statusCode = this._http.statusCode;\n    this.headers = this._http.headers;\n    if (this.statusCode === 200) {\n      this.emit('connect', new Base.ConnectEvent());\n    } else {\n      var message = \"Can't establish a connection to the server at \" + this._origin.href;\n      this.emit('error', new Error(message));\n    }\n    this.end();\n    return !this._paused;\n  },\n  end: function (chunk) {\n    if (!this.writable) return;\n    if (chunk !== undefined) this.write(chunk);\n    this.readable = this.writable = false;\n    this.emit('close');\n    this.emit('end');\n  },\n  destroy: function () {\n    this.end();\n  }\n};\nfor (var key in instance) Proxy.prototype[key] = instance[key];\nmodule.exports = Proxy;","map":{"version":3,"names":["Buffer","require","Stream","url","util","Base","Headers","HttpParser","PORTS","Proxy","client","origin","options","_client","_http","_origin","parse","_url","_options","_state","readable","writable","_paused","_headers","set","host","auth","from","toString","inherits","instance","setHeader","name","value","start","port","protocol","hostname","headers","emit","join","pause","resume","write","chunk","isComplete","statusCode","ConnectEvent","message","href","Error","end","undefined","destroy","key","prototype","module","exports"],"sources":["/home/hemanth/react-project/client/node_modules/websocket-driver/lib/websocket/driver/proxy.js"],"sourcesContent":["'use strict';\n\nvar Buffer     = require('safe-buffer').Buffer,\n    Stream     = require('stream').Stream,\n    url        = require('url'),\n    util       = require('util'),\n    Base       = require('./base'),\n    Headers    = require('./headers'),\n    HttpParser = require('../http_parser');\n\nvar PORTS = { 'ws:': 80, 'wss:': 443 };\n\nvar Proxy = function(client, origin, options) {\n  this._client  = client;\n  this._http    = new HttpParser('response');\n  this._origin  = (typeof client.url === 'object') ? client.url : url.parse(client.url);\n  this._url     = (typeof origin === 'object') ? origin : url.parse(origin);\n  this._options = options || {};\n  this._state   = 0;\n\n  this.readable = this.writable = true;\n  this._paused  = false;\n\n  this._headers = new Headers();\n  this._headers.set('Host', this._origin.host);\n  this._headers.set('Connection', 'keep-alive');\n  this._headers.set('Proxy-Connection', 'keep-alive');\n\n  var auth = this._url.auth && Buffer.from(this._url.auth, 'utf8').toString('base64');\n  if (auth) this._headers.set('Proxy-Authorization', 'Basic ' + auth);\n};\nutil.inherits(Proxy, Stream);\n\nvar instance = {\n  setHeader: function(name, value) {\n    if (this._state !== 0) return false;\n    this._headers.set(name, value);\n    return true;\n  },\n\n  start: function() {\n    if (this._state !== 0) return false;\n    this._state = 1;\n\n    var origin = this._origin,\n        port   = origin.port || PORTS[origin.protocol],\n        start  = 'CONNECT ' + origin.hostname + ':' + port + ' HTTP/1.1';\n\n    var headers = [start, this._headers.toString(), ''];\n\n    this.emit('data', Buffer.from(headers.join('\\r\\n'), 'utf8'));\n    return true;\n  },\n\n  pause: function() {\n    this._paused = true;\n  },\n\n  resume: function() {\n    this._paused = false;\n    this.emit('drain');\n  },\n\n  write: function(chunk) {\n    if (!this.writable) return false;\n\n    this._http.parse(chunk);\n    if (!this._http.isComplete()) return !this._paused;\n\n    this.statusCode = this._http.statusCode;\n    this.headers    = this._http.headers;\n\n    if (this.statusCode === 200) {\n      this.emit('connect', new Base.ConnectEvent());\n    } else {\n      var message = \"Can't establish a connection to the server at \" + this._origin.href;\n      this.emit('error', new Error(message));\n    }\n    this.end();\n    return !this._paused;\n  },\n\n  end: function(chunk) {\n    if (!this.writable) return;\n    if (chunk !== undefined) this.write(chunk);\n    this.readable = this.writable = false;\n    this.emit('close');\n    this.emit('end');\n  },\n\n  destroy: function() {\n    this.end();\n  }\n};\n\nfor (var key in instance)\n  Proxy.prototype[key] = instance[key];\n\nmodule.exports = Proxy;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}