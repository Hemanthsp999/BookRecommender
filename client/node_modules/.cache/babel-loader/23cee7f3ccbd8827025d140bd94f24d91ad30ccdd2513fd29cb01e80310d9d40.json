{"ast":null,"code":"'use strict';\n\nvar Buffer = require('safe-buffer').Buffer,\n  crypto = require('crypto'),\n  util = require('util'),\n  Extensions = require('websocket-extensions'),\n  Base = require('./base'),\n  Frame = require('./hybi/frame'),\n  Message = require('./hybi/message');\nvar Hybi = function (request, url, options) {\n  Base.apply(this, arguments);\n  this._extensions = new Extensions();\n  this._stage = 0;\n  this._masking = this._options.masking;\n  this._protocols = this._options.protocols || [];\n  this._requireMasking = this._options.requireMasking;\n  this._pingCallbacks = {};\n  if (typeof this._protocols === 'string') this._protocols = this._protocols.split(/ *, */);\n  if (!this._request) return;\n  var protos = this._request.headers['sec-websocket-protocol'],\n    supported = this._protocols;\n  if (protos !== undefined) {\n    if (typeof protos === 'string') protos = protos.split(/ *, */);\n    this.protocol = protos.filter(function (p) {\n      return supported.indexOf(p) >= 0;\n    })[0];\n  }\n  this.version = 'hybi-' + Hybi.VERSION;\n};\nutil.inherits(Hybi, Base);\nHybi.VERSION = '13';\nHybi.mask = function (payload, mask, offset) {\n  if (!mask || mask.length === 0) return payload;\n  offset = offset || 0;\n  for (var i = 0, n = payload.length - offset; i < n; i++) {\n    payload[offset + i] = payload[offset + i] ^ mask[i % 4];\n  }\n  return payload;\n};\nHybi.generateAccept = function (key) {\n  var sha1 = crypto.createHash('sha1');\n  sha1.update(key + Hybi.GUID);\n  return sha1.digest('base64');\n};\nHybi.GUID = '258EAFA5-E914-47DA-95CA-C5AB0DC85B11';\nvar instance = {\n  FIN: 0x80,\n  MASK: 0x80,\n  RSV1: 0x40,\n  RSV2: 0x20,\n  RSV3: 0x10,\n  OPCODE: 0x0F,\n  LENGTH: 0x7F,\n  OPCODES: {\n    continuation: 0,\n    text: 1,\n    binary: 2,\n    close: 8,\n    ping: 9,\n    pong: 10\n  },\n  OPCODE_CODES: [0, 1, 2, 8, 9, 10],\n  MESSAGE_OPCODES: [0, 1, 2],\n  OPENING_OPCODES: [1, 2],\n  ERRORS: {\n    normal_closure: 1000,\n    going_away: 1001,\n    protocol_error: 1002,\n    unacceptable: 1003,\n    encoding_error: 1007,\n    policy_violation: 1008,\n    too_large: 1009,\n    extension_error: 1010,\n    unexpected_condition: 1011\n  },\n  ERROR_CODES: [1000, 1001, 1002, 1003, 1007, 1008, 1009, 1010, 1011],\n  DEFAULT_ERROR_CODE: 1000,\n  MIN_RESERVED_ERROR: 3000,\n  MAX_RESERVED_ERROR: 4999,\n  // http://www.w3.org/International/questions/qa-forms-utf-8.en.php\n  UTF8_MATCH: /^([\\x00-\\x7F]|[\\xC2-\\xDF][\\x80-\\xBF]|\\xE0[\\xA0-\\xBF][\\x80-\\xBF]|[\\xE1-\\xEC\\xEE\\xEF][\\x80-\\xBF]{2}|\\xED[\\x80-\\x9F][\\x80-\\xBF]|\\xF0[\\x90-\\xBF][\\x80-\\xBF]{2}|[\\xF1-\\xF3][\\x80-\\xBF]{3}|\\xF4[\\x80-\\x8F][\\x80-\\xBF]{2})*$/,\n  addExtension: function (extension) {\n    this._extensions.add(extension);\n    return true;\n  },\n  parse: function (chunk) {\n    this._reader.put(chunk);\n    var buffer = true;\n    while (buffer) {\n      switch (this._stage) {\n        case 0:\n          buffer = this._reader.read(1);\n          if (buffer) this._parseOpcode(buffer[0]);\n          break;\n        case 1:\n          buffer = this._reader.read(1);\n          if (buffer) this._parseLength(buffer[0]);\n          break;\n        case 2:\n          buffer = this._reader.read(this._frame.lengthBytes);\n          if (buffer) this._parseExtendedLength(buffer);\n          break;\n        case 3:\n          buffer = this._reader.read(4);\n          if (buffer) {\n            this._stage = 4;\n            this._frame.maskingKey = buffer;\n          }\n          break;\n        case 4:\n          buffer = this._reader.read(this._frame.length);\n          if (buffer) {\n            this._stage = 0;\n            this._emitFrame(buffer);\n          }\n          break;\n        default:\n          buffer = null;\n      }\n    }\n  },\n  text: function (message) {\n    if (this.readyState > 1) return false;\n    return this.frame(message, 'text');\n  },\n  binary: function (message) {\n    if (this.readyState > 1) return false;\n    return this.frame(message, 'binary');\n  },\n  ping: function (message, callback) {\n    if (this.readyState > 1) return false;\n    message = message || '';\n    if (callback) this._pingCallbacks[message] = callback;\n    return this.frame(message, 'ping');\n  },\n  pong: function (message) {\n    if (this.readyState > 1) return false;\n    message = message || '';\n    return this.frame(message, 'pong');\n  },\n  close: function (reason, code) {\n    reason = reason || '';\n    code = code || this.ERRORS.normal_closure;\n    if (this.readyState <= 0) {\n      this.readyState = 3;\n      this.emit('close', new Base.CloseEvent(code, reason));\n      return true;\n    } else if (this.readyState === 1) {\n      this.readyState = 2;\n      this._extensions.close(function () {\n        this.frame(reason, 'close', code);\n      }, this);\n      return true;\n    } else {\n      return false;\n    }\n  },\n  frame: function (buffer, type, code) {\n    if (this.readyState <= 0) return this._queue([buffer, type, code]);\n    if (this.readyState > 2) return false;\n    if (buffer instanceof Array) buffer = Buffer.from(buffer);\n    if (typeof buffer === 'number') buffer = buffer.toString();\n    var message = new Message(),\n      isText = typeof buffer === 'string',\n      payload,\n      copy;\n    message.rsv1 = message.rsv2 = message.rsv3 = false;\n    message.opcode = this.OPCODES[type || (isText ? 'text' : 'binary')];\n    payload = isText ? Buffer.from(buffer, 'utf8') : buffer;\n    if (code) {\n      copy = payload;\n      payload = Buffer.allocUnsafe(2 + copy.length);\n      payload.writeUInt16BE(code, 0);\n      copy.copy(payload, 2);\n    }\n    message.data = payload;\n    var onMessageReady = function (message) {\n      var frame = new Frame();\n      frame.final = true;\n      frame.rsv1 = message.rsv1;\n      frame.rsv2 = message.rsv2;\n      frame.rsv3 = message.rsv3;\n      frame.opcode = message.opcode;\n      frame.masked = !!this._masking;\n      frame.length = message.data.length;\n      frame.payload = message.data;\n      if (frame.masked) frame.maskingKey = crypto.randomBytes(4);\n      this._sendFrame(frame);\n    };\n    if (this.MESSAGE_OPCODES.indexOf(message.opcode) >= 0) this._extensions.processOutgoingMessage(message, function (error, message) {\n      if (error) return this._fail('extension_error', error.message);\n      onMessageReady.call(this, message);\n    }, this);else onMessageReady.call(this, message);\n    return true;\n  },\n  _sendFrame: function (frame) {\n    var length = frame.length,\n      header = length <= 125 ? 2 : length <= 65535 ? 4 : 10,\n      offset = header + (frame.masked ? 4 : 0),\n      buffer = Buffer.allocUnsafe(offset + length),\n      masked = frame.masked ? this.MASK : 0;\n    buffer[0] = (frame.final ? this.FIN : 0) | (frame.rsv1 ? this.RSV1 : 0) | (frame.rsv2 ? this.RSV2 : 0) | (frame.rsv3 ? this.RSV3 : 0) | frame.opcode;\n    if (length <= 125) {\n      buffer[1] = masked | length;\n    } else if (length <= 65535) {\n      buffer[1] = masked | 126;\n      buffer.writeUInt16BE(length, 2);\n    } else {\n      buffer[1] = masked | 127;\n      buffer.writeUInt32BE(Math.floor(length / 0x100000000), 2);\n      buffer.writeUInt32BE(length % 0x100000000, 6);\n    }\n    frame.payload.copy(buffer, offset);\n    if (frame.masked) {\n      frame.maskingKey.copy(buffer, header);\n      Hybi.mask(buffer, frame.maskingKey, offset);\n    }\n    this._write(buffer);\n  },\n  _handshakeResponse: function () {\n    var secKey = this._request.headers['sec-websocket-key'],\n      version = this._request.headers['sec-websocket-version'];\n    if (version !== Hybi.VERSION) throw new Error('Unsupported WebSocket version: ' + version);\n    if (typeof secKey !== 'string') throw new Error('Missing handshake request header: Sec-WebSocket-Key');\n    this._headers.set('Upgrade', 'websocket');\n    this._headers.set('Connection', 'Upgrade');\n    this._headers.set('Sec-WebSocket-Accept', Hybi.generateAccept(secKey));\n    if (this.protocol) this._headers.set('Sec-WebSocket-Protocol', this.protocol);\n    var extensions = this._extensions.generateResponse(this._request.headers['sec-websocket-extensions']);\n    if (extensions) this._headers.set('Sec-WebSocket-Extensions', extensions);\n    var start = 'HTTP/1.1 101 Switching Protocols',\n      headers = [start, this._headers.toString(), ''];\n    return Buffer.from(headers.join('\\r\\n'), 'utf8');\n  },\n  _shutdown: function (code, reason, error) {\n    delete this._frame;\n    delete this._message;\n    this._stage = 5;\n    var sendCloseFrame = this.readyState === 1;\n    this.readyState = 2;\n    this._extensions.close(function () {\n      if (sendCloseFrame) this.frame(reason, 'close', code);\n      this.readyState = 3;\n      if (error) this.emit('error', new Error(reason));\n      this.emit('close', new Base.CloseEvent(code, reason));\n    }, this);\n  },\n  _fail: function (type, message) {\n    if (this.readyState > 1) return;\n    this._shutdown(this.ERRORS[type], message, true);\n  },\n  _parseOpcode: function (octet) {\n    var rsvs = [this.RSV1, this.RSV2, this.RSV3].map(function (rsv) {\n      return (octet & rsv) === rsv;\n    });\n    var frame = this._frame = new Frame();\n    frame.final = (octet & this.FIN) === this.FIN;\n    frame.rsv1 = rsvs[0];\n    frame.rsv2 = rsvs[1];\n    frame.rsv3 = rsvs[2];\n    frame.opcode = octet & this.OPCODE;\n    this._stage = 1;\n    if (!this._extensions.validFrameRsv(frame)) return this._fail('protocol_error', 'One or more reserved bits are on: reserved1 = ' + (frame.rsv1 ? 1 : 0) + ', reserved2 = ' + (frame.rsv2 ? 1 : 0) + ', reserved3 = ' + (frame.rsv3 ? 1 : 0));\n    if (this.OPCODE_CODES.indexOf(frame.opcode) < 0) return this._fail('protocol_error', 'Unrecognized frame opcode: ' + frame.opcode);\n    if (this.MESSAGE_OPCODES.indexOf(frame.opcode) < 0 && !frame.final) return this._fail('protocol_error', 'Received fragmented control frame: opcode = ' + frame.opcode);\n    if (this._message && this.OPENING_OPCODES.indexOf(frame.opcode) >= 0) return this._fail('protocol_error', 'Received new data frame but previous continuous frame is unfinished');\n  },\n  _parseLength: function (octet) {\n    var frame = this._frame;\n    frame.masked = (octet & this.MASK) === this.MASK;\n    frame.length = octet & this.LENGTH;\n    if (frame.length >= 0 && frame.length <= 125) {\n      this._stage = frame.masked ? 3 : 4;\n      if (!this._checkFrameLength()) return;\n    } else {\n      this._stage = 2;\n      frame.lengthBytes = frame.length === 126 ? 2 : 8;\n    }\n    if (this._requireMasking && !frame.masked) return this._fail('unacceptable', 'Received unmasked frame but masking is required');\n  },\n  _parseExtendedLength: function (buffer) {\n    var frame = this._frame;\n    frame.length = this._readUInt(buffer);\n    this._stage = frame.masked ? 3 : 4;\n    if (this.MESSAGE_OPCODES.indexOf(frame.opcode) < 0 && frame.length > 125) return this._fail('protocol_error', 'Received control frame having too long payload: ' + frame.length);\n    if (!this._checkFrameLength()) return;\n  },\n  _checkFrameLength: function () {\n    var length = this._message ? this._message.length : 0;\n    if (length + this._frame.length > this._maxLength) {\n      this._fail('too_large', 'WebSocket frame length too large');\n      return false;\n    } else {\n      return true;\n    }\n  },\n  _emitFrame: function (buffer) {\n    var frame = this._frame,\n      payload = frame.payload = Hybi.mask(buffer, frame.maskingKey),\n      opcode = frame.opcode,\n      message,\n      code,\n      reason,\n      callbacks,\n      callback;\n    delete this._frame;\n    if (opcode === this.OPCODES.continuation) {\n      if (!this._message) return this._fail('protocol_error', 'Received unexpected continuation frame');\n      this._message.pushFrame(frame);\n    }\n    if (opcode === this.OPCODES.text || opcode === this.OPCODES.binary) {\n      this._message = new Message();\n      this._message.pushFrame(frame);\n    }\n    if (frame.final && this.MESSAGE_OPCODES.indexOf(opcode) >= 0) return this._emitMessage(this._message);\n    if (opcode === this.OPCODES.close) {\n      code = payload.length >= 2 ? payload.readUInt16BE(0) : null;\n      reason = payload.length > 2 ? this._encode(payload.slice(2)) : null;\n      if (!(payload.length === 0) && !(code !== null && code >= this.MIN_RESERVED_ERROR && code <= this.MAX_RESERVED_ERROR) && this.ERROR_CODES.indexOf(code) < 0) code = this.ERRORS.protocol_error;\n      if (payload.length > 125 || payload.length > 2 && !reason) code = this.ERRORS.protocol_error;\n      this._shutdown(code || this.DEFAULT_ERROR_CODE, reason || '');\n    }\n    if (opcode === this.OPCODES.ping) {\n      this.frame(payload, 'pong');\n      this.emit('ping', new Base.PingEvent(payload.toString()));\n    }\n    if (opcode === this.OPCODES.pong) {\n      callbacks = this._pingCallbacks;\n      message = this._encode(payload);\n      callback = callbacks[message];\n      delete callbacks[message];\n      if (callback) callback();\n      this.emit('pong', new Base.PongEvent(payload.toString()));\n    }\n  },\n  _emitMessage: function (message) {\n    var message = this._message;\n    message.read();\n    delete this._message;\n    this._extensions.processIncomingMessage(message, function (error, message) {\n      if (error) return this._fail('extension_error', error.message);\n      var payload = message.data;\n      if (message.opcode === this.OPCODES.text) payload = this._encode(payload);\n      if (payload === null) return this._fail('encoding_error', 'Could not decode a text frame as UTF-8');else this.emit('message', new Base.MessageEvent(payload));\n    }, this);\n  },\n  _encode: function (buffer) {\n    try {\n      var string = buffer.toString('binary', 0, buffer.length);\n      if (!this.UTF8_MATCH.test(string)) return null;\n    } catch (e) {}\n    return buffer.toString('utf8', 0, buffer.length);\n  },\n  _readUInt: function (buffer) {\n    if (buffer.length === 2) return buffer.readUInt16BE(0);\n    return buffer.readUInt32BE(0) * 0x100000000 + buffer.readUInt32BE(4);\n  }\n};\nfor (var key in instance) Hybi.prototype[key] = instance[key];\nmodule.exports = Hybi;","map":{"version":3,"names":["Buffer","require","crypto","util","Extensions","Base","Frame","Message","Hybi","request","url","options","apply","arguments","_extensions","_stage","_masking","_options","masking","_protocols","protocols","_requireMasking","requireMasking","_pingCallbacks","split","_request","protos","headers","supported","undefined","protocol","filter","p","indexOf","version","VERSION","inherits","mask","payload","offset","length","i","n","generateAccept","key","sha1","createHash","update","GUID","digest","instance","FIN","MASK","RSV1","RSV2","RSV3","OPCODE","LENGTH","OPCODES","continuation","text","binary","close","ping","pong","OPCODE_CODES","MESSAGE_OPCODES","OPENING_OPCODES","ERRORS","normal_closure","going_away","protocol_error","unacceptable","encoding_error","policy_violation","too_large","extension_error","unexpected_condition","ERROR_CODES","DEFAULT_ERROR_CODE","MIN_RESERVED_ERROR","MAX_RESERVED_ERROR","UTF8_MATCH","addExtension","extension","add","parse","chunk","_reader","put","buffer","read","_parseOpcode","_parseLength","_frame","lengthBytes","_parseExtendedLength","maskingKey","_emitFrame","message","readyState","frame","callback","reason","code","emit","CloseEvent","type","_queue","Array","from","toString","isText","copy","rsv1","rsv2","rsv3","opcode","allocUnsafe","writeUInt16BE","data","onMessageReady","final","masked","randomBytes","_sendFrame","processOutgoingMessage","error","_fail","call","header","writeUInt32BE","Math","floor","_write","_handshakeResponse","secKey","Error","_headers","set","extensions","generateResponse","start","join","_shutdown","_message","sendCloseFrame","octet","rsvs","map","rsv","validFrameRsv","_checkFrameLength","_readUInt","_maxLength","callbacks","pushFrame","_emitMessage","readUInt16BE","_encode","slice","PingEvent","PongEvent","processIncomingMessage","MessageEvent","string","test","e","readUInt32BE","prototype","module","exports"],"sources":["/home/hemanth/react-project/client/node_modules/websocket-driver/lib/websocket/driver/hybi.js"],"sourcesContent":["'use strict';\n\nvar Buffer     = require('safe-buffer').Buffer,\n    crypto     = require('crypto'),\n    util       = require('util'),\n    Extensions = require('websocket-extensions'),\n    Base       = require('./base'),\n    Frame      = require('./hybi/frame'),\n    Message    = require('./hybi/message');\n\nvar Hybi = function(request, url, options) {\n  Base.apply(this, arguments);\n\n  this._extensions     = new Extensions();\n  this._stage          = 0;\n  this._masking        = this._options.masking;\n  this._protocols      = this._options.protocols || [];\n  this._requireMasking = this._options.requireMasking;\n  this._pingCallbacks  = {};\n\n  if (typeof this._protocols === 'string')\n    this._protocols = this._protocols.split(/ *, */);\n\n  if (!this._request) return;\n\n  var protos    = this._request.headers['sec-websocket-protocol'],\n      supported = this._protocols;\n\n  if (protos !== undefined) {\n    if (typeof protos === 'string') protos = protos.split(/ *, */);\n    this.protocol = protos.filter(function(p) { return supported.indexOf(p) >= 0 })[0];\n  }\n\n  this.version = 'hybi-' + Hybi.VERSION;\n};\nutil.inherits(Hybi, Base);\n\nHybi.VERSION = '13';\n\nHybi.mask = function(payload, mask, offset) {\n  if (!mask || mask.length === 0) return payload;\n  offset = offset || 0;\n\n  for (var i = 0, n = payload.length - offset; i < n; i++) {\n    payload[offset + i] = payload[offset + i] ^ mask[i % 4];\n  }\n  return payload;\n};\n\nHybi.generateAccept = function(key) {\n  var sha1 = crypto.createHash('sha1');\n  sha1.update(key + Hybi.GUID);\n  return sha1.digest('base64');\n};\n\nHybi.GUID = '258EAFA5-E914-47DA-95CA-C5AB0DC85B11';\n\nvar instance = {\n  FIN:    0x80,\n  MASK:   0x80,\n  RSV1:   0x40,\n  RSV2:   0x20,\n  RSV3:   0x10,\n  OPCODE: 0x0F,\n  LENGTH: 0x7F,\n\n  OPCODES: {\n    continuation: 0,\n    text:         1,\n    binary:       2,\n    close:        8,\n    ping:         9,\n    pong:         10\n  },\n\n  OPCODE_CODES:    [0, 1, 2, 8, 9, 10],\n  MESSAGE_OPCODES: [0, 1, 2],\n  OPENING_OPCODES: [1, 2],\n\n  ERRORS: {\n    normal_closure:       1000,\n    going_away:           1001,\n    protocol_error:       1002,\n    unacceptable:         1003,\n    encoding_error:       1007,\n    policy_violation:     1008,\n    too_large:            1009,\n    extension_error:      1010,\n    unexpected_condition: 1011\n  },\n\n  ERROR_CODES:        [1000, 1001, 1002, 1003, 1007, 1008, 1009, 1010, 1011],\n  DEFAULT_ERROR_CODE: 1000,\n  MIN_RESERVED_ERROR: 3000,\n  MAX_RESERVED_ERROR: 4999,\n\n  // http://www.w3.org/International/questions/qa-forms-utf-8.en.php\n  UTF8_MATCH: /^([\\x00-\\x7F]|[\\xC2-\\xDF][\\x80-\\xBF]|\\xE0[\\xA0-\\xBF][\\x80-\\xBF]|[\\xE1-\\xEC\\xEE\\xEF][\\x80-\\xBF]{2}|\\xED[\\x80-\\x9F][\\x80-\\xBF]|\\xF0[\\x90-\\xBF][\\x80-\\xBF]{2}|[\\xF1-\\xF3][\\x80-\\xBF]{3}|\\xF4[\\x80-\\x8F][\\x80-\\xBF]{2})*$/,\n\n  addExtension: function(extension) {\n    this._extensions.add(extension);\n    return true;\n  },\n\n  parse: function(chunk) {\n    this._reader.put(chunk);\n    var buffer = true;\n    while (buffer) {\n      switch (this._stage) {\n        case 0:\n          buffer = this._reader.read(1);\n          if (buffer) this._parseOpcode(buffer[0]);\n          break;\n\n        case 1:\n          buffer = this._reader.read(1);\n          if (buffer) this._parseLength(buffer[0]);\n          break;\n\n        case 2:\n          buffer = this._reader.read(this._frame.lengthBytes);\n          if (buffer) this._parseExtendedLength(buffer);\n          break;\n\n        case 3:\n          buffer = this._reader.read(4);\n          if (buffer) {\n            this._stage = 4;\n            this._frame.maskingKey = buffer;\n          }\n          break;\n\n        case 4:\n          buffer = this._reader.read(this._frame.length);\n          if (buffer) {\n            this._stage = 0;\n            this._emitFrame(buffer);\n          }\n          break;\n\n        default:\n          buffer = null;\n      }\n    }\n  },\n\n  text: function(message) {\n    if (this.readyState > 1) return false;\n    return this.frame(message, 'text');\n  },\n\n  binary: function(message) {\n    if (this.readyState > 1) return false;\n    return this.frame(message, 'binary');\n  },\n\n  ping: function(message, callback) {\n    if (this.readyState > 1) return false;\n    message = message || '';\n    if (callback) this._pingCallbacks[message] = callback;\n    return this.frame(message, 'ping');\n  },\n\n  pong: function(message) {\n      if (this.readyState > 1) return false;\n      message = message ||'';\n      return this.frame(message, 'pong');\n  },\n\n  close: function(reason, code) {\n    reason = reason || '';\n    code   = code   || this.ERRORS.normal_closure;\n\n    if (this.readyState <= 0) {\n      this.readyState = 3;\n      this.emit('close', new Base.CloseEvent(code, reason));\n      return true;\n    } else if (this.readyState === 1) {\n      this.readyState = 2;\n      this._extensions.close(function() { this.frame(reason, 'close', code) }, this);\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  frame: function(buffer, type, code) {\n    if (this.readyState <= 0) return this._queue([buffer, type, code]);\n    if (this.readyState > 2) return false;\n\n    if (buffer instanceof Array)    buffer = Buffer.from(buffer);\n    if (typeof buffer === 'number') buffer = buffer.toString();\n\n    var message = new Message(),\n        isText  = (typeof buffer === 'string'),\n        payload, copy;\n\n    message.rsv1   = message.rsv2 = message.rsv3 = false;\n    message.opcode = this.OPCODES[type || (isText ? 'text' : 'binary')];\n\n    payload = isText ? Buffer.from(buffer, 'utf8') : buffer;\n\n    if (code) {\n      copy = payload;\n      payload = Buffer.allocUnsafe(2 + copy.length);\n      payload.writeUInt16BE(code, 0);\n      copy.copy(payload, 2);\n    }\n    message.data = payload;\n\n    var onMessageReady = function(message) {\n      var frame = new Frame();\n\n      frame.final   = true;\n      frame.rsv1    = message.rsv1;\n      frame.rsv2    = message.rsv2;\n      frame.rsv3    = message.rsv3;\n      frame.opcode  = message.opcode;\n      frame.masked  = !!this._masking;\n      frame.length  = message.data.length;\n      frame.payload = message.data;\n\n      if (frame.masked) frame.maskingKey = crypto.randomBytes(4);\n\n      this._sendFrame(frame);\n    };\n\n    if (this.MESSAGE_OPCODES.indexOf(message.opcode) >= 0)\n      this._extensions.processOutgoingMessage(message, function(error, message) {\n        if (error) return this._fail('extension_error', error.message);\n        onMessageReady.call(this, message);\n      }, this);\n    else\n      onMessageReady.call(this, message);\n\n    return true;\n  },\n\n  _sendFrame: function(frame) {\n    var length = frame.length,\n        header = (length <= 125) ? 2 : (length <= 65535 ? 4 : 10),\n        offset = header + (frame.masked ? 4 : 0),\n        buffer = Buffer.allocUnsafe(offset + length),\n        masked = frame.masked ? this.MASK : 0;\n\n    buffer[0] = (frame.final ? this.FIN : 0) |\n                (frame.rsv1 ? this.RSV1 : 0) |\n                (frame.rsv2 ? this.RSV2 : 0) |\n                (frame.rsv3 ? this.RSV3 : 0) |\n                frame.opcode;\n\n    if (length <= 125) {\n      buffer[1] = masked | length;\n    } else if (length <= 65535) {\n      buffer[1] = masked | 126;\n      buffer.writeUInt16BE(length, 2);\n    } else {\n      buffer[1] = masked | 127;\n      buffer.writeUInt32BE(Math.floor(length / 0x100000000), 2);\n      buffer.writeUInt32BE(length % 0x100000000, 6);\n    }\n\n    frame.payload.copy(buffer, offset);\n\n    if (frame.masked) {\n      frame.maskingKey.copy(buffer, header);\n      Hybi.mask(buffer, frame.maskingKey, offset);\n    }\n\n    this._write(buffer);\n  },\n\n  _handshakeResponse: function() {\n    var secKey  = this._request.headers['sec-websocket-key'],\n        version = this._request.headers['sec-websocket-version'];\n\n    if (version !== Hybi.VERSION)\n      throw new Error('Unsupported WebSocket version: ' + version);\n\n    if (typeof secKey !== 'string')\n      throw new Error('Missing handshake request header: Sec-WebSocket-Key');\n\n    this._headers.set('Upgrade', 'websocket');\n    this._headers.set('Connection', 'Upgrade');\n    this._headers.set('Sec-WebSocket-Accept', Hybi.generateAccept(secKey));\n\n    if (this.protocol) this._headers.set('Sec-WebSocket-Protocol', this.protocol);\n\n    var extensions = this._extensions.generateResponse(this._request.headers['sec-websocket-extensions']);\n    if (extensions) this._headers.set('Sec-WebSocket-Extensions', extensions);\n\n    var start   = 'HTTP/1.1 101 Switching Protocols',\n        headers = [start, this._headers.toString(), ''];\n\n    return Buffer.from(headers.join('\\r\\n'), 'utf8');\n  },\n\n  _shutdown: function(code, reason, error) {\n    delete this._frame;\n    delete this._message;\n    this._stage = 5;\n\n    var sendCloseFrame = (this.readyState === 1);\n    this.readyState = 2;\n\n    this._extensions.close(function() {\n      if (sendCloseFrame) this.frame(reason, 'close', code);\n      this.readyState = 3;\n      if (error) this.emit('error', new Error(reason));\n      this.emit('close', new Base.CloseEvent(code, reason));\n    }, this);\n  },\n\n  _fail: function(type, message) {\n    if (this.readyState > 1) return;\n    this._shutdown(this.ERRORS[type], message, true);\n  },\n\n  _parseOpcode: function(octet) {\n    var rsvs = [this.RSV1, this.RSV2, this.RSV3].map(function(rsv) {\n      return (octet & rsv) === rsv;\n    });\n\n    var frame = this._frame = new Frame();\n\n    frame.final  = (octet & this.FIN) === this.FIN;\n    frame.rsv1   = rsvs[0];\n    frame.rsv2   = rsvs[1];\n    frame.rsv3   = rsvs[2];\n    frame.opcode = (octet & this.OPCODE);\n\n    this._stage = 1;\n\n    if (!this._extensions.validFrameRsv(frame))\n      return this._fail('protocol_error',\n          'One or more reserved bits are on: reserved1 = ' + (frame.rsv1 ? 1 : 0) +\n          ', reserved2 = ' + (frame.rsv2 ? 1 : 0) +\n          ', reserved3 = ' + (frame.rsv3 ? 1 : 0));\n\n    if (this.OPCODE_CODES.indexOf(frame.opcode) < 0)\n      return this._fail('protocol_error', 'Unrecognized frame opcode: ' + frame.opcode);\n\n    if (this.MESSAGE_OPCODES.indexOf(frame.opcode) < 0 && !frame.final)\n      return this._fail('protocol_error', 'Received fragmented control frame: opcode = ' + frame.opcode);\n\n    if (this._message && this.OPENING_OPCODES.indexOf(frame.opcode) >= 0)\n      return this._fail('protocol_error', 'Received new data frame but previous continuous frame is unfinished');\n  },\n\n  _parseLength: function(octet) {\n    var frame = this._frame;\n    frame.masked = (octet & this.MASK) === this.MASK;\n    frame.length = (octet & this.LENGTH);\n\n    if (frame.length >= 0 && frame.length <= 125) {\n      this._stage = frame.masked ? 3 : 4;\n      if (!this._checkFrameLength()) return;\n    } else {\n      this._stage = 2;\n      frame.lengthBytes = (frame.length === 126 ? 2 : 8);\n    }\n\n    if (this._requireMasking && !frame.masked)\n      return this._fail('unacceptable', 'Received unmasked frame but masking is required');\n  },\n\n  _parseExtendedLength: function(buffer) {\n    var frame = this._frame;\n    frame.length = this._readUInt(buffer);\n\n    this._stage = frame.masked ? 3 : 4;\n\n    if (this.MESSAGE_OPCODES.indexOf(frame.opcode) < 0 && frame.length > 125)\n      return this._fail('protocol_error', 'Received control frame having too long payload: ' + frame.length);\n\n    if (!this._checkFrameLength()) return;\n  },\n\n  _checkFrameLength: function() {\n    var length = this._message ? this._message.length : 0;\n\n    if (length + this._frame.length > this._maxLength) {\n      this._fail('too_large', 'WebSocket frame length too large');\n      return false;\n    } else {\n      return true;\n    }\n  },\n\n  _emitFrame: function(buffer) {\n    var frame   = this._frame,\n        payload = frame.payload = Hybi.mask(buffer, frame.maskingKey),\n        opcode  = frame.opcode,\n        message,\n        code, reason,\n        callbacks, callback;\n\n    delete this._frame;\n\n    if (opcode === this.OPCODES.continuation) {\n      if (!this._message) return this._fail('protocol_error', 'Received unexpected continuation frame');\n      this._message.pushFrame(frame);\n    }\n\n    if (opcode === this.OPCODES.text || opcode === this.OPCODES.binary) {\n      this._message = new Message();\n      this._message.pushFrame(frame);\n    }\n\n    if (frame.final && this.MESSAGE_OPCODES.indexOf(opcode) >= 0)\n      return this._emitMessage(this._message);\n\n    if (opcode === this.OPCODES.close) {\n      code   = (payload.length >= 2) ? payload.readUInt16BE(0) : null;\n      reason = (payload.length > 2) ? this._encode(payload.slice(2)) : null;\n\n      if (!(payload.length === 0) &&\n          !(code !== null && code >= this.MIN_RESERVED_ERROR && code <= this.MAX_RESERVED_ERROR) &&\n          this.ERROR_CODES.indexOf(code) < 0)\n        code = this.ERRORS.protocol_error;\n\n      if (payload.length > 125 || (payload.length > 2 && !reason))\n        code = this.ERRORS.protocol_error;\n\n      this._shutdown(code || this.DEFAULT_ERROR_CODE, reason || '');\n    }\n\n    if (opcode === this.OPCODES.ping) {\n      this.frame(payload, 'pong');\n      this.emit('ping', new Base.PingEvent(payload.toString()))\n    }\n\n    if (opcode === this.OPCODES.pong) {\n      callbacks = this._pingCallbacks;\n      message   = this._encode(payload);\n      callback  = callbacks[message];\n\n      delete callbacks[message];\n      if (callback) callback()\n\n      this.emit('pong', new Base.PongEvent(payload.toString()))\n    }\n  },\n\n  _emitMessage: function(message) {\n    var message = this._message;\n    message.read();\n\n    delete this._message;\n\n    this._extensions.processIncomingMessage(message, function(error, message) {\n      if (error) return this._fail('extension_error', error.message);\n\n      var payload = message.data;\n      if (message.opcode === this.OPCODES.text) payload = this._encode(payload);\n\n      if (payload === null)\n        return this._fail('encoding_error', 'Could not decode a text frame as UTF-8');\n      else\n        this.emit('message', new Base.MessageEvent(payload));\n    }, this);\n  },\n\n  _encode: function(buffer) {\n    try {\n      var string = buffer.toString('binary', 0, buffer.length);\n      if (!this.UTF8_MATCH.test(string)) return null;\n    } catch (e) {}\n    return buffer.toString('utf8', 0, buffer.length);\n  },\n\n  _readUInt: function(buffer) {\n    if (buffer.length === 2) return buffer.readUInt16BE(0);\n\n    return buffer.readUInt32BE(0) * 0x100000000 +\n           buffer.readUInt32BE(4);\n  }\n};\n\nfor (var key in instance)\n  Hybi.prototype[key] = instance[key];\n\nmodule.exports = Hybi;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}