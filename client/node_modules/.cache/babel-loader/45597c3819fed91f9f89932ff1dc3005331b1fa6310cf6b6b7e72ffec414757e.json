{"ast":null,"code":"'use strict';\n\nvar Stream = require('stream').Stream,\n  util = require('util'),\n  driver = require('websocket-driver'),\n  Headers = require('websocket-driver/lib/websocket/driver/headers'),\n  API = require('./websocket/api'),\n  EventTarget = require('./websocket/api/event_target'),\n  Event = require('./websocket/api/event');\nvar EventSource = function (request, response, options) {\n  this.writable = true;\n  options = options || {};\n  this._stream = response.socket;\n  this._ping = options.ping || this.DEFAULT_PING;\n  this._retry = options.retry || this.DEFAULT_RETRY;\n  var scheme = driver.isSecureRequest(request) ? 'https:' : 'http:';\n  this.url = scheme + '//' + request.headers.host + request.url;\n  this.lastEventId = request.headers['last-event-id'] || '';\n  this.readyState = API.CONNECTING;\n  var headers = new Headers(),\n    self = this;\n  if (options.headers) {\n    for (var key in options.headers) headers.set(key, options.headers[key]);\n  }\n  if (!this._stream || !this._stream.writable) return;\n  process.nextTick(function () {\n    self._open();\n  });\n  this._stream.setTimeout(0);\n  this._stream.setNoDelay(true);\n  var handshake = 'HTTP/1.1 200 OK\\r\\n' + 'Content-Type: text/event-stream\\r\\n' + 'Cache-Control: no-cache, no-store\\r\\n' + 'Connection: close\\r\\n' + headers.toString() + '\\r\\n' + 'retry: ' + Math.floor(this._retry * 1000) + '\\r\\n\\r\\n';\n  this._write(handshake);\n  this._stream.on('drain', function () {\n    self.emit('drain');\n  });\n  if (this._ping) this._pingTimer = setInterval(function () {\n    self.ping();\n  }, this._ping * 1000);\n  ['error', 'end'].forEach(function (event) {\n    self._stream.on(event, function () {\n      self.close();\n    });\n  });\n};\nutil.inherits(EventSource, Stream);\nEventSource.isEventSource = function (request) {\n  if (request.method !== 'GET') return false;\n  var accept = (request.headers.accept || '').split(/\\s*,\\s*/);\n  return accept.indexOf('text/event-stream') >= 0;\n};\nvar instance = {\n  DEFAULT_PING: 10,\n  DEFAULT_RETRY: 5,\n  _write: function (chunk) {\n    if (!this.writable) return false;\n    try {\n      return this._stream.write(chunk, 'utf8');\n    } catch (e) {\n      return false;\n    }\n  },\n  _open: function () {\n    if (this.readyState !== API.CONNECTING) return;\n    this.readyState = API.OPEN;\n    var event = new Event('open');\n    event.initEvent('open', false, false);\n    this.dispatchEvent(event);\n  },\n  write: function (message) {\n    return this.send(message);\n  },\n  end: function (message) {\n    if (message !== undefined) this.write(message);\n    this.close();\n  },\n  send: function (message, options) {\n    if (this.readyState > API.OPEN) return false;\n    message = String(message).replace(/(\\r\\n|\\r|\\n)/g, '$1data: ');\n    options = options || {};\n    var frame = '';\n    if (options.event) frame += 'event: ' + options.event + '\\r\\n';\n    if (options.id) frame += 'id: ' + options.id + '\\r\\n';\n    frame += 'data: ' + message + '\\r\\n\\r\\n';\n    return this._write(frame);\n  },\n  ping: function () {\n    return this._write(':\\r\\n\\r\\n');\n  },\n  close: function () {\n    if (this.readyState > API.OPEN) return false;\n    this.readyState = API.CLOSED;\n    this.writable = false;\n    if (this._pingTimer) clearInterval(this._pingTimer);\n    if (this._stream) this._stream.end();\n    var event = new Event('close');\n    event.initEvent('close', false, false);\n    this.dispatchEvent(event);\n    return true;\n  }\n};\nfor (var method in instance) EventSource.prototype[method] = instance[method];\nfor (var key in EventTarget) EventSource.prototype[key] = EventTarget[key];\nmodule.exports = EventSource;","map":{"version":3,"names":["Stream","require","util","driver","Headers","API","EventTarget","Event","EventSource","request","response","options","writable","_stream","socket","_ping","ping","DEFAULT_PING","_retry","retry","DEFAULT_RETRY","scheme","isSecureRequest","url","headers","host","lastEventId","readyState","CONNECTING","self","key","set","process","nextTick","_open","setTimeout","setNoDelay","handshake","toString","Math","floor","_write","on","emit","_pingTimer","setInterval","forEach","event","close","inherits","isEventSource","method","accept","split","indexOf","instance","chunk","write","e","OPEN","initEvent","dispatchEvent","message","send","end","undefined","String","replace","frame","id","CLOSED","clearInterval","prototype","module","exports"],"sources":["/home/hemanth/react-project/client/node_modules/faye-websocket/lib/faye/eventsource.js"],"sourcesContent":["'use strict';\n\nvar Stream      = require('stream').Stream,\n    util        = require('util'),\n    driver      = require('websocket-driver'),\n    Headers     = require('websocket-driver/lib/websocket/driver/headers'),\n    API         = require('./websocket/api'),\n    EventTarget = require('./websocket/api/event_target'),\n    Event       = require('./websocket/api/event');\n\nvar EventSource = function(request, response, options) {\n  this.writable = true;\n  options = options || {};\n\n  this._stream = response.socket;\n  this._ping   = options.ping  || this.DEFAULT_PING;\n  this._retry  = options.retry || this.DEFAULT_RETRY;\n\n  var scheme       = driver.isSecureRequest(request) ? 'https:' : 'http:';\n  this.url         = scheme + '//' + request.headers.host + request.url;\n  this.lastEventId = request.headers['last-event-id'] || '';\n  this.readyState  = API.CONNECTING;\n\n  var headers = new Headers(),\n      self    = this;\n\n  if (options.headers) {\n    for (var key in options.headers) headers.set(key, options.headers[key]);\n  }\n\n  if (!this._stream || !this._stream.writable) return;\n  process.nextTick(function() { self._open() });\n\n  this._stream.setTimeout(0);\n  this._stream.setNoDelay(true);\n\n  var handshake = 'HTTP/1.1 200 OK\\r\\n' +\n                  'Content-Type: text/event-stream\\r\\n' +\n                  'Cache-Control: no-cache, no-store\\r\\n' +\n                  'Connection: close\\r\\n' +\n                  headers.toString() +\n                  '\\r\\n' +\n                  'retry: ' + Math.floor(this._retry * 1000) + '\\r\\n\\r\\n';\n\n  this._write(handshake);\n\n  this._stream.on('drain', function() { self.emit('drain') });\n\n  if (this._ping)\n    this._pingTimer = setInterval(function() { self.ping() }, this._ping * 1000);\n\n  ['error', 'end'].forEach(function(event) {\n    self._stream.on(event, function() { self.close() });\n  });\n};\nutil.inherits(EventSource, Stream);\n\nEventSource.isEventSource = function(request) {\n  if (request.method !== 'GET') return false;\n  var accept = (request.headers.accept || '').split(/\\s*,\\s*/);\n  return accept.indexOf('text/event-stream') >= 0;\n};\n\nvar instance = {\n  DEFAULT_PING:   10,\n  DEFAULT_RETRY:  5,\n\n  _write: function(chunk) {\n    if (!this.writable) return false;\n    try {\n      return this._stream.write(chunk, 'utf8');\n    } catch (e) {\n      return false;\n    }\n  },\n\n  _open: function() {\n    if (this.readyState !== API.CONNECTING) return;\n\n    this.readyState = API.OPEN;\n\n    var event = new Event('open');\n    event.initEvent('open', false, false);\n    this.dispatchEvent(event);\n  },\n\n  write: function(message) {\n    return this.send(message);\n  },\n\n  end: function(message) {\n    if (message !== undefined) this.write(message);\n    this.close();\n  },\n\n  send: function(message, options) {\n    if (this.readyState > API.OPEN) return false;\n\n    message = String(message).replace(/(\\r\\n|\\r|\\n)/g, '$1data: ');\n    options = options || {};\n\n    var frame = '';\n    if (options.event) frame += 'event: ' + options.event + '\\r\\n';\n    if (options.id)    frame += 'id: '    + options.id    + '\\r\\n';\n    frame += 'data: ' + message + '\\r\\n\\r\\n';\n\n    return this._write(frame);\n  },\n\n  ping: function() {\n    return this._write(':\\r\\n\\r\\n');\n  },\n\n  close: function() {\n    if (this.readyState > API.OPEN) return false;\n\n    this.readyState = API.CLOSED;\n    this.writable = false;\n    if (this._pingTimer) clearInterval(this._pingTimer);\n    if (this._stream) this._stream.end();\n\n    var event = new Event('close');\n    event.initEvent('close', false, false);\n    this.dispatchEvent(event);\n\n    return true;\n  }\n};\n\nfor (var method in instance) EventSource.prototype[method] = instance[method];\nfor (var key in EventTarget) EventSource.prototype[key] = EventTarget[key];\n\nmodule.exports = EventSource;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}